{"version":3,"file":"treweler-marker.js","mappings":"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","sources":["webpack://treweler/./src/js/admin/modules/controls.js","webpack://treweler/./src/js/admin/modules/custom-fields.js","webpack://treweler/./src/js/admin/modules/uploads.js","webpack://treweler/webpack/bootstrap","webpack://treweler/webpack/runtime/make namespace object","webpack://treweler/./src/js/admin/treweler-marker.js"],"sourcesContent":["'use strict';\r\n\r\nconst { __ } = wp.i18n;\r\n\r\n/**\r\n * Init All Controls Logic\r\n */\r\nclass TWER_CONTROLS {\r\n\r\n  /**\r\n   * Controls constructor\r\n   *\r\n   * @param props\r\n   */\r\n  constructor(props) {\r\n    // Init JQuery\r\n    this.$ = $ = props;\r\n\r\n\r\n    // Toggle TR table row after controls change\r\n    const toggleElements = document.querySelectorAll('.js-twer-tr-toggle');\r\n    const toggleControls = [];\r\n\r\n    // Load status show/hide\r\n    toggleElements.forEach(element => {\r\n      const $toggleControl = document.getElementById(element.getAttribute('id').replace('-toggle',''));\r\n      toggleControls.push($toggleControl);\r\n\r\n      const toggleControlValue = $toggleControl.options[$toggleControl.selectedIndex].value;\r\n      const triggerValue = element.dataset.trigger;\r\n      if(toggleControlValue === triggerValue) {\r\n        element.classList.add('twer-tr-toggle--show');\r\n        element.classList.remove('twer-tr-toggle--hide');\r\n      } else {\r\n        element.classList.remove('twer-tr-toggle--show');\r\n        element.classList.add('twer-tr-toggle--hide');\r\n      }\r\n    });\r\n\r\n    // Change status\r\n    toggleControls.forEach(element => {\r\n      element.addEventListener('change', event => {\r\n        const $toggleElement = document.getElementById(event.target.getAttribute('id') + '-toggle');\r\n\r\n        const toggleControlValue = event.target.value;\r\n        const triggerValue = $toggleElement.dataset.trigger;\r\n\r\n        if(toggleControlValue === triggerValue) {\r\n          $toggleElement.classList.add('twer-tr-toggle--show');\r\n          $toggleElement.classList.remove('twer-tr-toggle--hide');\r\n        } else {\r\n          $toggleElement.classList.remove('twer-tr-toggle--show');\r\n          $toggleElement.classList.add('twer-tr-toggle--hide');\r\n        }\r\n      });\r\n    });\r\n\r\n  }\r\n\r\n}\r\n\r\nexport default TWER_CONTROLS;\r\n\r\n","'use strict';\r\n\r\nconst {__} = wp.i18n;\r\n\r\n/**\r\n * Init All Custom Fields Logic\r\n */\r\nclass TWER_CUSTOM_FIELDS {\r\n  elementCount(arr, element){\r\n    return arr.filter((currentElement) => currentElement == element).length;\r\n  }\r\n  /**\r\n   * Uploads constructor\r\n   *\r\n   * @param props\r\n   */\r\n  constructor(props) {\r\n    // Init JQuery\r\n    this.$ = $ = props;\r\n\r\n    const scope = this;\r\n\r\n    $('.js-ui-slider-wrap').each((index, element) => {\r\n      const $sortableList = $(element);\r\n      $sortableList.sortable({\r\n        cursor: 'move',\r\n        placeholder: 'ui-sortable-placeholder twer-tr-toggle js-ui-slider-item',\r\n        forcePlaceholderSize: true,\r\n        forceHelperSize: true,\r\n        scroll: true,\r\n        revert: false,\r\n        tolerance: 'pointer',\r\n        handle: '.js-twer-ui-sort-tr',\r\n        items: '> .js-ui-slider-item',\r\n        create : function() {\r\n          const $input = $sortableList.find('input.js-twer-custom-fields-list');\r\n          let ids = [];\r\n          $sortableList.children('.js-ui-slider-item').each(function(divIndex, div) {\r\n            ids.push($(div).data('id'));\r\n          });\r\n          //console.log(ids);\r\n          $input.val(ids.join(','));\r\n        },\r\n        update: function(event, ui) {\r\n         const $input = $sortableList.find('input.js-twer-custom-fields-list');\r\n          let ids = [];\r\n          $sortableList.children('.js-ui-slider-item').each(function(divIndex, div) {\r\n            ids.push($(div).data('id'));\r\n          });\r\n          //console.log(ids);\r\n          $input.val(ids.join(','));\r\n        }\r\n      }).disableSelection();\r\n    });\r\n\r\n    $('select, input:checkbox').each(function(){\r\n\r\n      const readOnly = $(this).attr('readonly');\r\n\r\n      if(readOnly === 'readonly') {\r\n        $(this).closest('.col-simple, .col-fixed').css({pointerEvents: \"none\"});\r\n        $(this).closest('.col-simple, .col-fixed').addClass('penoneSelect');\r\n      }\r\n\r\n    });\r\n\r\n    $(document).on('click', '.js-twer-ui-del-tr', function(e) {\r\n      e.preventDefault();\r\n\r\n      const $removeButton = $(this);\r\n      const $sortableList = $removeButton.closest('.js-ui-slider-wrap');\r\n      const $input = $sortableList.find('input.js-twer-custom-fields-list');\r\n      const $select = $sortableList.find('.js-custom-fields-list');\r\n      const ids = [];\r\n      const id = parseInt($removeButton.closest('.js-ui-slider-item').data('id'));\r\n      const label = $removeButton.closest('.js-ui-slider-item').find('th label').text();\r\n\r\n      if (0 === $select.find('option[value=' + id + ']').length && !isNaN(id)) {\r\n        $select.append(`<option value=\"${id}\">${label}</option>`);\r\n      }\r\n\r\n      $removeButton.closest('.js-ui-slider-item').remove();\r\n      $sortableList.children('.js-ui-slider-item').each(function(divIndex, div) {\r\n        ids.push($(div).data('id'));\r\n      });\r\n      $input.val(ids.join(','));\r\n\r\n\r\n      const popupIds = $('#treweler-custom-fields-list').val().trim() !== '' ? $('#treweler-custom-fields-list').val().split(',').map(id => parseInt(id)) : [];\r\n      const locatorPreviewIds = $('#treweler-custom-fields-list-locator-preview').val().trim() !== '' ? $('#treweler-custom-fields-list-locator-preview').val().split(',').map(id => parseInt(id)) : [];\r\n      const locatorIds = $('#treweler-custom-fields-list-locator').val().trim() !== '' ? $('#treweler-custom-fields-list-locator').val().split(',').map(id => parseInt(id)) : [] ;\r\n\r\n      const allCustomFieldsIds = [...popupIds, ...locatorPreviewIds, ...locatorIds];\r\n\r\n\r\n      setTimeout(function(){\r\n        if($removeButton.closest('.tab-pane').attr('id') !== 'twer-nav-custom-fields-wo-template' && scope.elementCount(allCustomFieldsIds, id) === 0) {\r\n          const $uniqueInput = $('#treweler-custom-fields-list-unique');\r\n          const $uniqueInputWrapper = $uniqueInput.closest('.js-ui-slider-wrap');\r\n          const $uniqueRow = $uniqueInputWrapper.find('.js-ui-slider-item[data-id=\"'+id+'\"]');\r\n          $uniqueRow.find('.js-twer-ui-del-tr').trigger('click');\r\n        }\r\n      }, 500);\r\n\r\n      setTimeout(() => {\r\n        scope.toggleNotEditableFieldsNotice();\r\n      }, 600);\r\n\r\n    });\r\n\r\n\r\n    $(document).on('click', '.js-add-custom-field', function(e){\r\n      e.preventDefault();\r\n\r\n      const $addButton = $(this);\r\n      const $sortableWrap = $addButton.closest('.js-ui-slider-wrap');\r\n      const $select = $sortableWrap.find('.js-custom-fields-list');\r\n      const selectedId = $select.val();\r\n      if('none' !== selectedId) {\r\n\r\n        const $row = $sortableWrap.find('.js-hidden-item[data-id=\"' + selectedId + '\"]').clone();\r\n        const ids = [];\r\n\r\n        $row.find('select.js-field-multiselect').select2({\r\n          placeholder: 'No values selected',\r\n          width: '100%',\r\n          minimumResultsForSearch: -1,\r\n        });\r\n\r\n        $row.toggleClass('d-none js-ui-slider-item');\r\n        $row.removeClass('js-hidden-item');\r\n\r\n        $row.find('textarea:not(.select2-search__field), input:not(:checkbox):not(.js-twer-lock-status)').each(function(){\r\n          const $input = $(this);\r\n          $input.prop('disabled',false);\r\n          $input.prop('readonly',true);\r\n          $input.val($input.data('default'));\r\n          $input.attr('value',$input.data('default'));\r\n        });\r\n\r\n        $row.find('input.js-twer-lock-status').each(function(){\r\n          const $input = $(this);\r\n          $input.prop('disabled',false);\r\n          $input.prop('readonly',false);\r\n          $input.val('close');\r\n          $input.attr('value','close');\r\n        });\r\n\r\n        $row.find('.js-twer-lock').removeClass('twer-lock--open');\r\n\r\n\r\n        $row.find('input:checkbox').each(function(){\r\n          const $input = $(this);\r\n          $input.prop('disabled',false);\r\n          $input.prop('readonly',true);\r\n          $input.prop( \"checked\", $input.data('default') );\r\n\r\n          $input.closest('.col-fixed').css({pointerEvents: \"none\"});\r\n        });\r\n\r\n        $row.find('select').each(function(){\r\n          const $input = $(this);\r\n          $input.prop('disabled',false);\r\n          $input.prop('readonly',true);\r\n\r\n          let defaultValue = $input.data('default');\r\n\r\n          if(defaultValue === '') {\r\n            defaultValue = null;\r\n          } else {\r\n            defaultValue = typeof defaultValue === 'string' ? JSON.parse(defaultValue) : defaultValue;\r\n          }\r\n          $input.val(defaultValue).trigger('change');\r\n\r\n\r\n          $input.closest('.col-simple').css({pointerEvents: \"none\"});\r\n          $input.closest('.col-simple').addClass('penoneSelect');\r\n        });\r\n\r\n\r\n        $row.insertBefore($sortableWrap.find('.js-hidden-item:first'));\r\n        $select.find('option:selected').remove();\r\n        const $sortableList = $(this).closest('.js-ui-slider-wrap');\r\n        const $input = $sortableList.find('input.js-twer-custom-fields-list');\r\n        $sortableList.sortable('refresh');\r\n        $sortableList.sortable('refreshPositions');\r\n        $sortableList.children('.js-ui-slider-item').each(function(divIndex, div) {\r\n          ids.push($(div).data('id'));\r\n        });\r\n        $input.val(ids.join(','));\r\n\r\n\r\n        setTimeout(function(){\r\n          if($addButton.closest('.tab-pane').attr('id') !== 'twer-nav-custom-fields-wo-template') {\r\n            const $uniqueInput = $('#treweler-custom-fields-list-unique');\r\n            const $uniqueInputWrapper = $uniqueInput.closest('.js-ui-slider-wrap');\r\n\r\n            console.log(selectedId);\r\n\r\n            $uniqueInputWrapper.find('.js-custom-fields-list').val(selectedId);\r\n            $uniqueInputWrapper.find('.js-add-custom-field').trigger('click');\r\n          }\r\n        }, 500);\r\n\r\n      }\r\n\r\n\r\n      setTimeout(() => {\r\n        scope.toggleNotEditableFieldsNotice();\r\n      }, 700);\r\n    });\r\n\r\n\r\n    $(document).on('click','.js-twer-lock', function(e) {\r\n      e.preventDefault();\r\n\r\n      const $lock = $(this);\r\n      const index = $lock.index();\r\n      const lockStatus = $lock.hasClass('twer-lock--open') ? 'open' : 'close';\r\n      let $field = $lock.closest('.twer-wrap-fields').find('.twer-group-elements .row');\r\n\r\n      if($field.length > 0) {\r\n        $field = $field.children().eq(index);\r\n      } else {\r\n        $field = $lock.closest('.twer-wrap-fields').find('.twer-form-group');\r\n      }\r\n\r\n      if('open' === lockStatus) {\r\n        const $input = $field.find('textarea:not(.select2-search__field), input:not(.js-twer-lock-status):not(:checkbox)');\r\n        $input.prop('readonly', true);\r\n        $input.data('current', $input.val());\r\n        $input.val($input.data('default'));\r\n        $input.attr('value', $input.data('default'));\r\n        $lock.removeClass('twer-lock--open');\r\n\r\n        $field.find('.js-twer-lock-status').val('close');\r\n        $field.find('.js-twer-lock-status').attr('value', 'close');\r\n\r\n\r\n        const $checkbox = $field.find('input:checkbox');\r\n        $checkbox.prop('disabled',false);\r\n        $checkbox.prop('readonly',true);\r\n        $checkbox.data('current', $checkbox.is(':checked'));\r\n        $checkbox.prop( \"checked\", $input.data('default') );\r\n        $checkbox.closest('.col-fixed').css({pointerEvents: \"none\"});\r\n\r\n\r\n        const $select = $field.find('select');\r\n        $select.prop('disabled',false);\r\n        $select.prop('readonly',true);\r\n        $select.data('current', JSON.stringify( $select.val() ));\r\n        let defaultValue = $select.data('default');\r\n        if(defaultValue === '') {\r\n          defaultValue = null;\r\n        } else {\r\n          defaultValue = typeof defaultValue === 'string' ? JSON.parse(defaultValue) : defaultValue;\r\n        }\r\n        $select.val(defaultValue).trigger('change');\r\n        $select.closest('.col-simple').css({pointerEvents: \"none\"});\r\n        $select.closest('.col-simple').addClass('penoneSelect');\r\n      }\r\n\r\n      if('close' === lockStatus) {\r\n        const $input = $field.find('textarea:not(.select2-search__field), input:not(.js-twer-lock-status):not(:checkbox)');\r\n        $input.prop('readonly', false);\r\n        $input.val($input.data('current'));\r\n        $input.attr('value', $input.data('current'));\r\n        $lock.addClass('twer-lock--open');\r\n\r\n        $field.find('.js-twer-lock-status').val('open');\r\n        $field.find('.js-twer-lock-status').attr('value', 'open');\r\n\r\n\r\n        const $checkbox = $field.find('input:checkbox');\r\n        $checkbox.prop('disabled',false);\r\n        $checkbox.prop('readonly',false);\r\n        $checkbox.prop( \"checked\", $checkbox.data('current') );\r\n        $checkbox.closest('.col-fixed').css({pointerEvents: \"auto\"});\r\n\r\n\r\n        const $select = $field.find('select');\r\n        $select.prop('disabled',false);\r\n        $select.prop('readonly',false);\r\n\r\n        let currentValue = $select.data('current');\r\n        if(currentValue === '') {\r\n          currentValue = null;\r\n        } else {\r\n          currentValue = typeof currentValue === 'string' ? JSON.parse(currentValue) : currentValue;\r\n        }\r\n        $select.val(currentValue).trigger('change');\r\n        $select.closest('.col-simple').css({pointerEvents: \"auto\"});\r\n        $select.closest('.col-simple').removeClass('penoneSelect');\r\n      }\r\n\r\n    })\r\n\r\n  }\r\n\r\n  toggleNotEditableFieldsNotice() {\r\n    const $notEditableCustomFieldsNotice = $('#js-twer-not-fields-message');\r\n    if($notEditableCustomFieldsNotice.length > 0) {\r\n      const allTrLength = $notEditableCustomFieldsNotice.closest('.tab-pane').find('tr').length;\r\n      const allTrHiddenLength = $notEditableCustomFieldsNotice.closest('.tab-pane').find('tr.d-none').length;\r\n\r\n      const allTrHiddenHardLength = $notEditableCustomFieldsNotice.closest('.tab-pane').find('tr.d-none-hard:not(.d-none)').length;\r\n\r\n      const allTrHide = allTrHiddenLength + allTrHiddenHardLength;\r\n\r\n      if (allTrLength === allTrHide) {\r\n        $notEditableCustomFieldsNotice.removeClass('d-none');\r\n      } else {\r\n        $notEditableCustomFieldsNotice.addClass('d-none');\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default TWER_CUSTOM_FIELDS;\r\n","'use strict';\r\n\r\nconst {__} = wp.i18n;\r\n\r\nclass TWER_UPLOADS {\r\n\r\n  /**\r\n   * Uploads constructor\r\n   *\r\n   * @param props\r\n   */\r\n  constructor(props) {\r\n    // Init JQuery\r\n    this.$ = $ = props;\r\n\r\n    const $addAttach = document.querySelectorAll('.js-twer-attach-add');\r\n    const $removeAttach = document.querySelectorAll('.js-twer-attach-remove');\r\n\r\n\r\n    // Click on Upload attach button in metabox\r\n    $addAttach.forEach((element) => {\r\n      element.addEventListener('click', event => {\r\n        event.preventDefault();\r\n\r\n\r\n        const $btn = event.target;\r\n\r\n        const $attachWrap = $btn.closest('.js-twer-attach-wrap');\r\n\r\n        let xmlFrame;\r\n        if (xmlFrame) {\r\n          xmlFrame.open();\r\n          return;\r\n        }\r\n\r\n          xmlFrame = wp.media({\r\n          title: $attachWrap?.dataset?.title || __('Select image', 'treweler'),\r\n          button: {\r\n            text: $attachWrap?.dataset?.buttonText || __('Upload image', 'treweler')\r\n          },\r\n          library: {\r\n            type: $attachWrap?.dataset?.libraryType?.split(',') || ['image'],\r\n          },\r\n          multiple: false\r\n        });\r\n        xmlFrame.on('select', () => {\r\n          const xmlFrameFile = xmlFrame.state().get('selection').first().toJSON();\r\n          const xmlUrl = xmlFrameFile.url;\r\n          const xmlId = xmlFrameFile.id;\r\n\r\n          const $thumbWrap = $attachWrap.getElementsByClassName('js-twer-attach-thumb')[0];\r\n\r\n          if(xmlFrameFile.type === 'application') {\r\n            const $div = document.createElement('div');\r\n            $div.style.whiteSpace = 'nowrap';\r\n            $div.className = 'twer-app-file';\r\n            $div.innerText = xmlFrameFile.filename;\r\n\r\n            $attachWrap.getElementsByClassName('twer-app-file')[0]?.remove();\r\n            $thumbWrap.appendChild($div);\r\n          } else {\r\n\r\n            const $img = document.createElement('img');\r\n            $img.setAttribute('src', xmlUrl);\r\n            $img.setAttribute('alt', xmlFrameFile.title);\r\n\r\n            $attachWrap.getElementsByTagName('img')[0]?.remove();\r\n            $thumbWrap.appendChild($img);\r\n          }\r\n\r\n\r\n\r\n          if (!$btn.classList.contains('button')) {\r\n            $btn.style.display = 'none';\r\n          }\r\n          $thumbWrap.nextElementSibling.style.display = 'block';\r\n          $attachWrap.getElementsByTagName('input')[0].value = xmlId;\r\n\r\n          $(document).trigger('twer-attach-add', [xmlFrame]);\r\n        });\r\n        xmlFrame.open();\r\n      });\r\n\r\n    });\r\n\r\n    // Click on Remove attach button in metabox\r\n    $removeAttach.forEach((element) => {\r\n      element.addEventListener('click', event => {\r\n        event.preventDefault();\r\n        const $btn = event.target;\r\n        const $attachWrap = $btn.closest('.js-twer-attach-wrap');\r\n        const $thumbWrap = $attachWrap.getElementsByClassName('js-twer-attach-thumb')[0];\r\n\r\n        if($attachWrap.getElementsByClassName('twer-app-file')) {\r\n          $attachWrap.getElementsByClassName('twer-app-file')[0].remove();\r\n        } else {\r\n          $attachWrap.getElementsByTagName('img')[0]?.remove();\r\n        }\r\n\r\n\r\n        $attachWrap.getElementsByTagName('input')[0].value = '';\r\n        $btn.closest('.js-twer-attach-actions').style.display = 'none';\r\n        $thumbWrap.getElementsByClassName('js-twer-attach-add')[0].style.display = 'block';\r\n\r\n        $(document).trigger('twer-attach-remove');\r\n      });\r\n    });\r\n\r\n    const $addAttachGallery = document.querySelectorAll('.js-twer-attach-gallery-add');\r\n\r\n    $('.js-twer-attach-gallery-wrap').each((index, element) => {\r\n      const $sortableList = $(element);\r\n      $sortableList.sortable({\r\n        cursor: 'move',\r\n        placeholder: 'twer-attach-gallery__thumb',\r\n        forcePlaceholderSize: true,\r\n        forceHelperSize: true,\r\n        scroll: true,\r\n        revert: false,\r\n        tolerance: 'pointer',\r\n        items: '> div',\r\n        update: function(event, ui) {\r\n          const $input = $sortableList.find('input');\r\n          const ids = [];\r\n          $sortableList.children('div').each(function(divIndex, div) {\r\n            ids.push($(div).data('id'));\r\n          });\r\n          $input.val(ids.join(','));\r\n        }\r\n      }).disableSelection();\r\n    });\r\n\r\n    $(document).on('click', '.js-twer-attach-gallery-remove', function(e) {\r\n      e.preventDefault();\r\n      const $sortableList = $(this).closest('.js-twer-attach-gallery-wrap');\r\n      const $input = $sortableList.find('input');\r\n      const ids = [];\r\n      $(this).closest('.twer-attach-gallery__thumb').remove();\r\n      $sortableList.children('div').each(function(divIndex, div) {\r\n        ids.push($(div).data('id'));\r\n      });\r\n      $input.val(ids.join(','));\r\n    });\r\n\r\n    // Click on Upload attach gallery button in metabox\r\n    $addAttachGallery.forEach((element) => {\r\n      element.addEventListener('click', event => {\r\n        event.preventDefault();\r\n        const $btn = event.target;\r\n        let xmlFrame;\r\n        if (xmlFrame) {\r\n          xmlFrame.open();\r\n          return;\r\n        }\r\n        xmlFrame = wp.media({\r\n          title: __('Select images', 'treweler'),\r\n          button: {\r\n            text: __('Upload images', 'treweler')\r\n          },\r\n          library: {\r\n            type: ['image'],\r\n          },\r\n          multiple: 'add'\r\n        });\r\n\r\n        xmlFrame.on('open', () => {\r\n          const $attachWrap = $btn.closest('.js-twer-attach-gallery-wrap');\r\n          const attachIds = $attachWrap.getElementsByTagName('input')[0].value;\r\n          let selection = xmlFrame.state().get('selection');\r\n\r\n          if (attachIds.length > 0) {\r\n            let ids = attachIds.split(',');\r\n\r\n            ids.forEach(function(id) {\r\n              let attachment = wp.media.attachment(id);\r\n              attachment.fetch();\r\n              selection.add(attachment ? [attachment] : []);\r\n            });\r\n          }\r\n        });\r\n\r\n        xmlFrame.on('select', () => {\r\n\r\n          const selection = xmlFrame.state().get('selection');\r\n          const $attachWrap = $btn.closest('.js-twer-attach-gallery-wrap');\r\n          const attachIds = [];\r\n\r\n          const elements = $attachWrap.getElementsByClassName('twer-attach-gallery__thumb');\r\n          while (elements.length > 0) {\r\n            elements[0].parentNode.removeChild(elements[0]);\r\n          }\r\n\r\n          //let index = 0;\r\n          selection.map(function(attachment) {\r\n            attachment = attachment.toJSON();\r\n            let $divThumb = document.createElement('div');\r\n            $divThumb.setAttribute('class', 'twer-attach-gallery__thumb');\r\n            $divThumb.setAttribute('data-id', attachment.id);\r\n            //$divThumb.setAttribute('data-index', index++);\r\n\r\n            let $imgThumb = document.createElement('img');\r\n            $imgThumb.setAttribute('src', attachment.url);\r\n            $imgThumb.setAttribute('alt', attachment.title);\r\n\r\n            let $close = document.createElement('a');\r\n            $close.setAttribute('href', '#');\r\n            $close.setAttribute('title', __('Remove', 'treweler'));\r\n            $close.setAttribute('class', 'twer-attach-gallery__remove js-twer-attach-gallery-remove');\r\n            $divThumb.appendChild($imgThumb);\r\n            $divThumb.appendChild($close);\r\n\r\n            $attachWrap.insertBefore($divThumb, $btn);\r\n\r\n            //console.log($attachWrap, $divThumb, $btn);\r\n\r\n            attachIds.push(attachment.id);\r\n\r\n          });\r\n\r\n          $attachWrap.getElementsByTagName('input')[0].value = attachIds.join(',');\r\n\r\n        });\r\n        xmlFrame.open();\r\n      });\r\n\r\n    });\r\n  }\r\n\r\n}\r\n\r\nexport default TWER_UPLOADS;\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","'use strict';\r\n\r\nimport TWER_UPLOADS from './modules/uploads';\r\nimport TWER_CONTROLS from './modules/controls';\r\nimport TWER_CUSTOM_FIELDS from './modules/custom-fields';\r\n\r\n\r\n\r\njQuery(document).ready(function($) {\r\n  new TWER_UPLOADS($);\r\n  new TWER_CONTROLS($);\r\n  new TWER_CUSTOM_FIELDS($);\r\n});\r\n\r\nvar tp = '';\r\nvar map;\r\nvar geo;\r\nvar marker;\r\n\r\njQuery.noConflict();\r\n\r\nconst pickerMapApply = (toggleElementIds, pickerIds, colorsIds, sizeIds) => {\r\n  for (let i = 0; i < toggleElementIds.length; i++) {\r\n    const showIcon = document.getElementById(toggleElementIds[i]);\r\n    const style = document.getElementById('marker_style');\r\n    const markerBalloon = document.getElementsByClassName('marker-balloon__dot');\r\n    const markerDot = document.getElementsByClassName('marker--dot-solid');\r\n    let currentMarkerId = '';\r\n\r\n    if (markerBalloon.length > 0 && 'balloon-default' === style.value) {\r\n      currentMarkerId = 'treweler-picker';\r\n    }\r\n    if (markerDot.length > 0 && 'dot-default' === style.value) {\r\n      currentMarkerId = 'treweler-picker-dot';\r\n    }\r\n\r\n    //console.log(currentMarkerId, showIcon.id);\r\n    if (currentMarkerId !== showIcon.id) continue;\r\n\r\n    const icon = document.getElementById(pickerIds[i]).value;\r\n    const color = document.getElementById(colorsIds[i]).value;\r\n    const size = Number.isNaN(parseFloat(document.getElementById(sizeIds[i]).value)) ? 15 : parseFloat(document.getElementById(sizeIds[i]).value);\r\n\r\n    if (showIcon.checked) {\r\n      if (markerBalloon.length > 0) {\r\n        if (icon.length > 0) {\r\n          markerBalloon[0].innerHTML = `<span class=\"marker-balloon__icon material-icons\" style=\"color:${color};font-size:${size}px;\">${icon}</span>`;\r\n        } else {\r\n          markerBalloon[0].innerHTML = '';\r\n        }\r\n      }\r\n\r\n      if (markerDot.length > 0) {\r\n        if (icon.length > 0) {\r\n          markerDot[0].innerHTML = `<span class=\"marker-dot__icon material-icons\" style=\"color:${color};font-size:${size}px;\">${icon}</span>`;\r\n        } else {\r\n          markerDot[0].innerHTML = '';\r\n        }\r\n      }\r\n    } else {\r\n      if (markerBalloon.length > 0) {\r\n        markerBalloon[0].innerHTML = '';\r\n      }\r\n\r\n      if (markerDot.length > 0) {\r\n        markerDot[0].innerHTML = '';\r\n      }\r\n    }\r\n\r\n  }\r\n};\r\n\r\nfunction toggleNotEditableFieldsNotice() {\r\n  const $notEditableCustomFieldsNotice = $('#js-twer-not-fields-message');\r\n  if($notEditableCustomFieldsNotice.length > 0) {\r\n    const allTrLength = $notEditableCustomFieldsNotice.closest('.tab-pane').find('tr').length;\r\n    const allTrHiddenLength = $notEditableCustomFieldsNotice.closest('.tab-pane').find('tr.d-none').length;\r\n    const allTrHiddenHardLength = $notEditableCustomFieldsNotice.closest('.tab-pane').find('tr.d-none-hard:not(.d-none)').length;\r\n\r\n    const allTrHide = allTrHiddenLength + allTrHiddenHardLength;\r\n    if (allTrLength === allTrHide) {\r\n      $notEditableCustomFieldsNotice.removeClass('d-none');\r\n    } else {\r\n      $notEditableCustomFieldsNotice.addClass('d-none');\r\n    }\r\n  }\r\n\r\n}\r\n\r\n(function($) {\r\n  $(function() {\r\n\r\n    toggleNotEditableFieldsNotice();\r\n\r\n    const markerStyle = $('#marker_style');\r\n    const markerStyleVal = markerStyle.val();\r\n    const colorPicker = $('.color-picker');\r\n    const markerPosition = $('#marker_position').val();\r\n    const markerSize = $('#treweler-marker-img-size').val();\r\n\r\n    /**\r\n     * Get mapbox token\r\n     */\r\n    function getToken() {\r\n      if (tp.length === 0) {\r\n        jQuery.ajax({\r\n          url: twer_ajax.url,\r\n          type: 'GET',\r\n          data: {action: 'treweler_get_admin_token'},\r\n          success: function(response) {\r\n            try {\r\n              const res = atob(response).replace('###', '');\r\n              tp = res.replace('###', '');\r\n            } catch (e) {\r\n\r\n              tp = twer_ajax.api_key;\r\n            }\r\n            init_map();\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    function hex2rgba(hex, opacity) {\r\n      opacity = parseFloat(opacity);\r\n      hex = hex.replace('#', '');\r\n      const r = parseInt(hex.substring(0, 2), 16);\r\n      const g = parseInt(hex.substring(2, 4), 16);\r\n      const b = parseInt(hex.substring(4, 6), 16);\r\n\r\n      return `rgba(${r},${g},${b},${opacity})`;\r\n    }\r\n\r\n    /**\r\n     * Initialize map\r\n     * MarkerIcon 1\r\n     */\r\n    function init_map() {\r\n\r\n      $('.twer-root').each(function() {\r\n        $(this).find('[data-toggle=\"tooltip\"]').tooltip({\r\n          container: $(this).closest('.twer-root')\r\n        });\r\n      });\r\n\r\n      $('#marker_map').html('');\r\n      if (tp.length !== 0) {\r\n\r\n        let lat = (($('#latitude').val().trim() !== '' && $('#latitude').val() !== 0) ? $('#latitude').val().trim() : 0.1),\r\n          lng = (($('#longitude').val().trim() !== '' && $('#longitude').val() !== 0) ? $('#longitude').val().trim() : 0.1),\r\n          zoom = ($('#setZoom').val().trim() !== '' ? $('#setZoom').val() : 0.00),\r\n          map_style = $('#map_id option:selected').toArray().map(item => item.dataset.map_style),\r\n          mapProjection = $('#map_id option:selected').toArray().map(item => item.dataset.mapProjection),\r\n          mapLightPreset = $('#map_id option:selected').toArray().map(item => item.dataset.mapLightPreset),\r\n          color = $('#markerColor').val(),\r\n          halo_opacity = Number.isNaN(parseFloat($('#treweler-marker-halo-opacity').val())) ? 0.5 : parseFloat($('#treweler-marker-halo-opacity').val()),\r\n          halo_color = hex2rgba($('#marker_halo_color').val(), halo_opacity),\r\n          markerInnerSize = Number.isNaN(parseFloat($('#treweler-marker-size').val())) ? 12 : parseFloat($('#treweler-marker-size').val()),\r\n\r\n          marker_dotcenter_color = hex2rgba($('#marker_dotcenter_color').val(), 1),\r\n\r\n          borderColor = hex2rgba($('#marker_border_color').val(), 1),\r\n          borderWidth = Number.isNaN(parseFloat($('#treweler-marker-border-width').val())) ? 0 : parseFloat($('#treweler-marker-border-width').val()),\r\n          markerInnerSizeMargins = ((markerInnerSize + borderWidth + borderWidth) / 2) * -1,\r\n\r\n          cornerRadius = Number.isNaN(parseFloat($('#treweler-marker-corner-radius-group').val())) ? 50 : parseFloat($('#treweler-marker-corner-radius-group').val()),\r\n          cornerRadiusUnits = Number.isNaN($('#treweler-marker-corner-radius-group-select').val()) ? '%' : $('#treweler-marker-corner-radius-group-select').val(),\r\n\r\n          markerColorBalloon = hex2rgba($('#marker_color_balloon').val(), 1),\r\n          markerSizeBalloon = Number.isNaN(parseFloat($('#treweler-marker-size-balloon').val())) ? 18 : parseFloat($('#treweler-marker-size-balloon').val()),\r\n          borderColorBalloon = hex2rgba($('#marker_border_color_balloon').val(), 1),\r\n          borderWidthBalloon = Number.isNaN(parseFloat($('#treweler-marker-border-width-balloon').val())) ? 4 : parseFloat($('#treweler-marker-border-width-balloon').val()),\r\n          dotColor = hex2rgba($('#marker_dot_color').val(), 1),\r\n          dotSize = Number.isNaN(parseFloat($('#treweler-marker-dot-size').val())) ? 8 : parseFloat($('#treweler-marker-dot-size').val()),\r\n\r\n          markerColorTriangle = hex2rgba($('#marker_color_triangle').val(), 1),\r\n          markerWidthTriangle = Number.isNaN(parseFloat($('#treweler-marker-width-triangle').val())) ? 12 : parseFloat($('#treweler-marker-width-triangle').val()),\r\n          markerHeightTriangle = Number.isNaN(parseFloat($('#treweler-marker-height-triangle').val())) ? 10 : parseFloat($('#treweler-marker-height-triangle').val());\r\n\r\n        if (map_style.length <= 0) {\r\n          map_style = ['mapbox://styles/mapbox/standard-beta'];\r\n        }\r\n\r\n        if (mapProjection.length <= 0) {\r\n          mapProjection = ['mercator'];\r\n        }\r\n\r\n        if(lng === '0') {\r\n          lng = 0.1;\r\n        }\r\n        if(lat === '0') {\r\n          lat = 0.1;\r\n        }\r\n        mapboxgl.accessToken = tp;\r\n        map = new mapboxgl.Map({\r\n          container: 'marker_map',\r\n          style: map_style[0],\r\n          center: [lng, lat],\r\n          zoom: zoom,\r\n          minZoom: 0,\r\n          maxZoom: 24,\r\n          projection: {\r\n            name: mapProjection[0]\r\n          }\r\n        });\r\n\r\n        map.on('style.load', () => {\r\n          if (map_style[0] === 'mapbox://styles/mapbox/standard-beta') {\r\n            let mapLightPresetString = mapLightPreset[0] ? mapLightPreset[0] : 'day';\r\n            map.setConfigProperty('basemap', 'lightPreset', mapLightPresetString);\r\n          }\r\n        });\r\n\r\n        /**\r\n         * Mapbox Geocoder\r\n         */\r\n        let geocoder = new MapboxGeocoder({\r\n          accessToken: mapboxgl.accessToken,\r\n          mapboxgl: mapboxgl,\r\n          marker: false\r\n        });\r\n\r\n        geocoder.on('result', function(e) {\r\n\r\n          $('#latitude').val(e.result.center[1]);\r\n          $('#longitude').val(e.result.center[0]);\r\n\r\n          setTimeout(function() {\r\n            addHTMLMarker();\r\n          }, 200);\r\n\r\n        });\r\n\r\n        map.addControl(geocoder);\r\n\r\n        if ($('#marker_style').val() !== 'custom') {\r\n\r\n          var markerEle = document.createElement('div');\r\n          let defaultAnchor = markerPosition;\r\n\r\n          markerEle.className = 'treweler-marker';\r\n          if (markerStyleVal === 'default') {\r\n            markerEle.innerHTML = '<div class=\"marker\"><div class=\"marker-wrap\"><div class=\"marker__shadow\" style=\"background-color:' + halo_color + ';\"><div class=\"marker__border\" style=\"border-color:' + color + ';\"><div class=\"marker__center\"></div></div></div></div></div>';\r\n          } else if ('dot-default' === markerStyleVal) {\r\n            markerEle.innerHTML = `<div class=\"marker marker--dot-solid\" style=\"margin-left:${markerInnerSizeMargins}px;margin-top:${markerInnerSizeMargins}px;border:${borderWidth}px solid ${borderColor};border-radius: ${cornerRadius}${cornerRadiusUnits};width:${markerInnerSize}px;height:${markerInnerSize}px;background-color:${marker_dotcenter_color};\"></div>`;\r\n            defaultAnchor = 'center';\r\n          } else if ('balloon-default' === markerStyleVal) {\r\n            let styleBalloon = `\r\n                        background-color: ${markerColorBalloon};    \r\n                        border: ${borderWidthBalloon}px solid ${borderColorBalloon};\r\n                        width: ${markerSizeBalloon}px;\r\n                        height: ${markerSizeBalloon}px;`;\r\n\r\n            let styleBalloonDot = `\r\n                        width:${dotSize}px;\r\n                        height:${dotSize}px;\r\n                        margin-left:${(dotSize / 2) * -1}px;\r\n                        margin-top:${(dotSize / 2) * -1}px;\r\n                        background-color:${dotColor};\r\n                        `;\r\n            markerEle.innerHTML = `<div class=\"treweler-marker marker-balloon\" style=\"${styleBalloon}\"><div class=\"marker-balloon__dot\" style=\"${styleBalloonDot}\"></div></div>`;\r\n\r\n            defaultAnchor = 'bottom';\r\n\r\n          } else if ('triangle-default' === markerStyleVal) {\r\n            const styleTriangle = `\r\n                        \r\n                        border-right-width:${markerWidthTriangle / 2}px;\r\n                        border-left-width:${markerWidthTriangle / 2}px;\r\n                        border-bottom-width: ${markerHeightTriangle}px;\r\n                        border-bottom-color: ${markerColorTriangle};\r\n                        \r\n                        `;\r\n            markerEle.innerHTML = `<div class=\"treweler-marker marker-triangle\" style=\"${styleTriangle}\"></div>`;\r\n\r\n            defaultAnchor = 'center';\r\n          }\r\n\r\n          marker = new mapboxgl.Marker(markerEle, {\r\n            draggable: true,\r\n            anchor: defaultAnchor\r\n          }).setLngLat([lng, lat]).addTo(map);\r\n\r\n          if ('balloon-default' === markerStyleVal) {\r\n            const $marker = document.getElementsByClassName('marker-balloon')[0];\r\n            const rotateHeight = $marker.getBoundingClientRect().height;\r\n            const rotateMarkerSizeBalloon = Number.isNaN(parseFloat($('#treweler-marker-size-balloon').val())) ? 18 : parseFloat($('#treweler-marker-size-balloon').val());\r\n            const rotateBorderWidthBalloon = Number.isNaN(parseFloat($('#treweler-marker-border-width-balloon').val())) ? 4 : parseFloat($('#treweler-marker-border-width-balloon').val());\r\n            $('.marker-balloon').css('bottom', ((rotateHeight - (rotateMarkerSizeBalloon + rotateBorderWidthBalloon + rotateBorderWidthBalloon)) / 2));\r\n          }\r\n        } else {\r\n\r\n          let imgURL = $('.js-twer-attach-wrap-custom img').attr('src'),\r\n            anchorV = $('#marker_position').val(),\r\n            imgSize = $('#marker_icon_size').val() != '' ? $('#marker_icon_size').val().split(';') : '42;42'.split(';');\r\n\r\n          let iHeight = parseInt(imgSize[0]) <= 42 ? (parseInt(imgSize[0]) % 2 == 0 ? parseInt(imgSize[0]) : parseInt(imgSize[0]) + 1) : 42;\r\n          let iWidth = parseInt(imgSize[1]) <= 42 ? (parseInt(imgSize[1]) % 2 == 0 ? parseInt(imgSize[1]) : parseInt(imgSize[1]) + 1) : 42;\r\n\r\n          let markerSizeR = Number.isNaN(parseInt($('#treweler-marker-img-size').val())) ? 42 : parseInt($('#treweler-marker-img-size').val());\r\n\r\n          var markerEle = document.createElement('div');\r\n          markerEle.className = 'treweler-marker icon';\r\n          markerEle.style.backgroundImage = 'url(' + imgURL + ')';\r\n          markerEle.style.backgroundSize = 'contain';\r\n          markerEle.style.backgroundRepeat = 'no-repeat';\r\n          markerEle.style.backgroundPosition = 'center center';\r\n          markerEle.style.width = parseInt(markerSizeR) > 1 ? parseInt(markerSizeR) + 'px' : parseInt(iWidth) + 'px';\r\n          markerEle.style.height = parseInt(markerSizeR) > 1 ? parseInt(markerSizeR) + 'px' : parseInt(iHeight) + 'px';\r\n          marker = new mapboxgl.Marker(markerEle, {\r\n            draggable: true,\r\n            anchor: anchorV\r\n          }).setLngLat([lng, lat]).addTo(map);\r\n\r\n        }\r\n\r\n        /**\r\n         * Change marker position on drag\r\n         */\r\n        marker.on('dragend', function(e) {\r\n          let ll = marker.getLngLat();\r\n          $('#latitude').val(ll.lat);\r\n          $('#longitude').val(ll.lng);\r\n        });\r\n\r\n        /**\r\n         * Change marker position on click\r\n         */\r\n        map.on('click', function(e) {\r\n          marker.setLngLat([e.lngLat.lng, e.lngLat.lat]).addTo(map);\r\n          $('#latitude').val(e.lngLat.lat);\r\n          $('#longitude').val(e.lngLat.lng);\r\n        });\r\n\r\n        /**\r\n         * Change zoom value\r\n         */\r\n        map.on('zoom', function(e) {\r\n          let zoomV = map.getZoom().toFixed(2);\r\n          $('#setZoom').val(zoomV);\r\n        });\r\n\r\n      } else {\r\n        $('#marker_map').append('<p class=\"notice notice-error settings-error is-dismissible\">Mapbox access token is required.</p>');\r\n      }\r\n\r\n      pickerMapApply(['treweler-picker', 'treweler-picker-dot'], ['treweler-balloon-icon-picker', 'treweler-dot-icon-picker'], ['balloon_icon_color', 'dot_icon_color'], ['treweler-balloon-icon-size', 'treweler-dot-icon-size']);\r\n\r\n    }\r\n\r\n    /**\r\n     * Add HTML Marker\r\n     */\r\n    function addHTMLMarker() {\r\n      let lat = (($('#latitude').val().trim() != '' && $('#latitude').val() != 0) ? $('#latitude').val().trim() : 0.1),\r\n        lng = (($('#longitude').val().trim() != '' && $('#longitude').val() != 0) ? $('#longitude').val().trim() : 0.1),\r\n        color = $('#markerColor').val(),\r\n        markerStyleVal = $('#marker_style').val(),\r\n        halo_opacity = Number.isNaN(parseFloat($('#treweler-marker-halo-opacity').val())) ? 0.5 : parseFloat($('#treweler-marker-halo-opacity').val()),\r\n        halo_color = hex2rgba($('#marker_halo_color').val(), halo_opacity),\r\n        markerInnerSize = Number.isNaN(parseFloat($('#treweler-marker-size').val())) ? 12 : parseFloat($('#treweler-marker-size').val()),\r\n        borderColor = hex2rgba($('#marker_border_color').val(), 1),\r\n        borderWidth = Number.isNaN(parseFloat($('#treweler-marker-border-width').val())) ? 0 : parseFloat($('#treweler-marker-border-width').val()),\r\n        markerInnerSizeMargins = ((markerInnerSize + borderWidth + borderWidth) / 2) * -1,\r\n        cornerRadius = Number.isNaN(parseFloat($('#treweler-marker-corner-radius-group').val())) ? 50 : parseFloat($('#treweler-marker-corner-radius-group').val()),\r\n        marker_dotcenter_color = hex2rgba($('#marker_dotcenter_color').val(), 1),\r\n        cornerRadiusUnits = Number.isNaN($('#treweler-marker-corner-radius-group-select').val()) ? '%' : $('#treweler-marker-corner-radius-group-select').val(),\r\n        markerColorBalloon = hex2rgba($('#marker_color_balloon').val(), 1),\r\n        markerSizeBalloon = Number.isNaN(parseFloat($('#treweler-marker-size-balloon').val())) ? 18 : parseFloat($('#treweler-marker-size-balloon').val()),\r\n        borderColorBalloon = hex2rgba($('#marker_border_color_balloon').val(), 1),\r\n        borderWidthBalloon = Number.isNaN(parseFloat($('#treweler-marker-border-width-balloon').val())) ? 4 : parseFloat($('#treweler-marker-border-width-balloon').val()),\r\n        dotColor = hex2rgba($('#marker_dot_color').val(), 1),\r\n        dotSize = Number.isNaN(parseFloat($('#treweler-marker-dot-size').val())) ? 8 : parseFloat($('#treweler-marker-dot-size').val()),\r\n        markerColorTriangle = hex2rgba($('#marker_color_triangle').val(), 1),\r\n        markerWidthTriangle = Number.isNaN(parseFloat($('#treweler-marker-width-triangle').val())) ? 12 : parseFloat($('#treweler-marker-width-triangle').val()),\r\n        markerHeightTriangle = Number.isNaN(parseFloat($('#treweler-marker-height-triangle').val())) ? 10 : parseFloat($('#treweler-marker-height-triangle').val());\r\n\r\n      let defaultAnchor = markerPosition;\r\n\r\n      /* remove marker */\r\n      marker.remove();\r\n\r\n      /* Add Marker */\r\n      /* MarkerIcon 2 */\r\n      const markerEle = document.createElement('div');\r\n      markerEle.className = 'treweler-marker';\r\n      if ('default' === markerStyleVal) {\r\n        markerEle.innerHTML = '<div class=\"marker\"><div class=\"marker-wrap\"><div class=\"marker__shadow\" style=\"background-color:' + halo_color + ';\"><div class=\"marker__border\" style=\"border-color:' + color + ';\"><div class=\"marker__center\"></div></div></div></div></div>';\r\n      } else if ('dot-default' === markerStyleVal) {\r\n        markerEle.innerHTML = `<div class=\"marker marker--dot-solid\" style=\"margin-left:${markerInnerSizeMargins}px;margin-top:${markerInnerSizeMargins}px;border:${borderWidth}px solid ${borderColor};border-radius: ${cornerRadius}${cornerRadiusUnits};width:${markerInnerSize}px;height:${markerInnerSize}px;background-color:${marker_dotcenter_color};\"></div>`;\r\n        defaultAnchor = 'center';\r\n      } else if ('balloon-default' === markerStyleVal) {\r\n        let styleBalloon = `\r\n                        background-color: ${markerColorBalloon};    \r\n                        border: ${borderWidthBalloon}px solid ${borderColorBalloon};\r\n                        width: ${markerSizeBalloon}px;\r\n                        height: ${markerSizeBalloon}px;`;\r\n        let styleBalloonDot = `\r\n                        width:${dotSize}px;\r\n                        height:${dotSize}px;\r\n                        margin-left:${(dotSize / 2) * -1}px;\r\n                        margin-top:${(dotSize / 2) * -1}px;\r\n                        background-color:${dotColor};\r\n                        `;\r\n        markerEle.innerHTML = `<div class=\"treweler-marker marker-balloon\" style=\"${styleBalloon}\"><div class=\"marker-balloon__dot\" style=\"${styleBalloonDot}\"></div></div>`;\r\n        defaultAnchor = 'bottom';\r\n\r\n      } else if ('triangle-default' === markerStyleVal) {\r\n        const styleTriangle = `\r\n                        \r\n                        border-right-width:${markerWidthTriangle / 2}px;\r\n                        border-left-width:${markerWidthTriangle / 2}px;\r\n                        border-bottom-width: ${markerHeightTriangle}px;\r\n                        border-bottom-color: ${markerColorTriangle};\r\n                        \r\n                        `;\r\n        markerEle.innerHTML = `<div class=\"treweler-marker marker-triangle\" style=\"${styleTriangle}\"></div>`;\r\n\r\n        defaultAnchor = 'center';\r\n      }\r\n\r\n      marker = new mapboxgl.Marker(markerEle, {\r\n        draggable: true,\r\n        anchor: defaultAnchor\r\n      }).setLngLat([lng, lat]).addTo(map);\r\n\r\n      if ('balloon-default' === markerStyleVal) {\r\n        const $marker = document.getElementsByClassName('marker-balloon')[0];\r\n        const rotateHeight = $marker.getBoundingClientRect().height;\r\n        const rotateMarkerSizeBalloon = Number.isNaN(parseFloat($('#treweler-marker-size-balloon').val())) ? 18 : parseFloat($('#treweler-marker-size-balloon').val());\r\n        const rotateBorderWidthBalloon = Number.isNaN(parseFloat($('#treweler-marker-border-width-balloon').val())) ? 4 : parseFloat($('#treweler-marker-border-width-balloon').val());\r\n        $('.marker-balloon').css('bottom', ((rotateHeight - (rotateMarkerSizeBalloon + rotateBorderWidthBalloon + rotateBorderWidthBalloon)) / 2));\r\n      }\r\n\r\n      /**\r\n       * Change marker position on drag\r\n       */\r\n      marker.on('dragend', function(e) {\r\n        let ll = marker.getLngLat();\r\n        $('#latitude').val(ll.lat);\r\n        $('#longitude').val(ll.lng);\r\n      });\r\n    }\r\n\r\n    if ($('#marker_map').length) {\r\n\r\n      setTimeout(function() {\r\n        getToken();\r\n      }, 1000);\r\n\r\n      /**\r\n       * On change of latlng value\r\n       */\r\n      $('#latitude, #longitude').on('change input', function() {\r\n        if ($('#latitude').val().trim() != '' && $('#longitude').val().trim() != '') {\r\n          marker.setLngLat([$('#longitude').val(), $('#latitude').val()]).addTo(map);\r\n          map.setCenter([$('#longitude').val(), $('#latitude').val()]);\r\n        }\r\n      });\r\n\r\n      /**\r\n       * On change of `map`, set `map` style\r\n       */\r\n      let defaultMapStyle = '';\r\n      let defaultMapProjection = '';\r\n      let defaultMapLightPreset = '';\r\n      $('.js-twer-select-2').on('select2:select.bsnselect', function(evt) {\r\n        var element = evt.params.data.element;\r\n        var $element = $(element);\r\n        $element.detach();\r\n        $(this).append($element);\r\n        $(this).trigger('change');\r\n\r\n        let styleV = $('#map_id option:selected').toArray().map(item => item.dataset.map_style);\r\n        let mapProjection = $('#map_id option:selected').toArray().map(item => item.dataset.mapProjection);\r\n        let mapLightPreset = $('#map_id option:selected').toArray().map(item => item.dataset.mapLightPreset);\r\n\r\n        if (styleV.length <= 0) {\r\n          styleV = ['mapbox://styles/mapbox/standard-beta'];\r\n        }\r\n\r\n        if (mapProjection.length <= 0) {\r\n          mapProjection = ['mercator'];\r\n        }\r\n\r\n        defaultMapStyle = styleV[0];\r\n        map.setStyle(styleV[0]);\r\n\r\n        defaultMapProjection = mapProjection[0];\r\n        map.setProjection(mapProjection[0]);\r\n\r\n\r\n\r\n        if( styleV[0] === 'mapbox://styles/mapbox/standard-beta') {\r\n\r\n          map.on('style.load', () => {\r\n            let mapLightPresetString = mapLightPreset[0] ? mapLightPreset[0] : 'day'\r\n            map.setConfigProperty('basemap', 'lightPreset', mapLightPresetString);\r\n          });\r\n        }\r\n      });\r\n\r\n      $('.js-twer-select-2').on('change', function() {\r\n        let styleV = $('#map_id option:selected').toArray().map(item => item.dataset.map_style);\r\n        let mapProjection = $('#map_id option:selected').toArray().map(item => item.dataset.mapProjection);\r\n        let mapLightPreset = $('#map_id option:selected').toArray().map(item => item.dataset.mapLightPreset);\r\n        if (styleV.length <= 0) {\r\n          styleV = ['mapbox://styles/mapbox/standard-beta'];\r\n          map.setStyle(styleV[0]);\r\n        }\r\n\r\n        if (styleV.length > 0 && !styleV.includes(defaultMapStyle)) {\r\n          defaultMapStyle = styleV[0];\r\n          map.setStyle(defaultMapStyle);\r\n        }\r\n\r\n\r\n\r\n        if (mapProjection.length <= 0) {\r\n          mapProjection = ['mercator'];\r\n          map.setProjection(mapProjection[0]);\r\n        }\r\n\r\n        if (mapProjection.length > 0 && !mapProjection.includes(defaultMapProjection)) {\r\n          defaultMapProjection = mapProjection[0];\r\n          map.setProjection(defaultMapProjection);\r\n        }\r\n\r\n        if( styleV[0] === 'mapbox://styles/mapbox/standard-beta') {\r\n          map.on('style.load', () => {\r\n            let mapLightPresetString = mapLightPreset[0] ? mapLightPreset[0] : 'day'\r\n           map.setConfigProperty('basemap', 'lightPreset', mapLightPresetString);\r\n          });\r\n        }\r\n\r\n      });\r\n\r\n      /**\r\n       * Change marker on change of style\r\n       * MarkerIcon 3\r\n       */\r\n      markerStyle.on('change', function() {\r\n\r\n        if ($('.js-twer-attach-wrap-custom input[type=\"hidden\"]').val() >= 1) {\r\n          return;\r\n        }\r\n\r\n        let lat = (($('#latitude').val().trim() != '' && $('#latitude').val() != 0) ? $('#latitude').val().trim() : 0.1),\r\n          lng = (($('#longitude').val().trim() != '' && $('#longitude').val() != 0) ? $('#longitude').val().trim() : 0.1),\r\n          color = $('#markerColor').val(),\r\n          halo_opacity = Number.isNaN(parseFloat($('#treweler-marker-halo-opacity').val())) ? 0.5 : parseFloat($('#treweler-marker-halo-opacity').val()),\r\n          halo_color = hex2rgba($('#marker_halo_color').val(), halo_opacity),\r\n          markerInnerSize = Number.isNaN(parseFloat($('#treweler-marker-size').val())) ? 12 : parseFloat($('#treweler-marker-size').val()),\r\n          borderColor = hex2rgba($('#marker_border_color').val(), 1),\r\n          borderWidth = Number.isNaN(parseFloat($('#treweler-marker-border-width').val())) ? 0 : parseFloat($('#treweler-marker-border-width').val()),\r\n          markerInnerSizeMargins = ((markerInnerSize + borderWidth + borderWidth) / 2) * -1,\r\n          marker_dotcenter_color = hex2rgba($('#marker_dotcenter_color').val(), 1),\r\n          cornerRadius = Number.isNaN(parseFloat($('#treweler-marker-corner-radius-group').val())) ? 50 : parseFloat($('#treweler-marker-corner-radius-group').val()),\r\n          cornerRadiusUnits = Number.isNaN($('#treweler-marker-corner-radius-group-select').val()) ? '%' : $('#treweler-marker-corner-radius-group-select').val(),\r\n          markerColorBalloon = hex2rgba($('#marker_color_balloon').val(), 1),\r\n          markerSizeBalloon = Number.isNaN(parseFloat($('#treweler-marker-size-balloon').val())) ? 18 : parseFloat($('#treweler-marker-size-balloon').val()),\r\n          borderColorBalloon = hex2rgba($('#marker_border_color_balloon').val(), 1),\r\n          borderWidthBalloon = Number.isNaN(parseFloat($('#treweler-marker-border-width-balloon').val())) ? 4 : parseFloat($('#treweler-marker-border-width-balloon').val()),\r\n          dotColor = hex2rgba($('#marker_dot_color').val(), 1),\r\n          dotSize = Number.isNaN(parseFloat($('#treweler-marker-dot-size').val())) ? 8 : parseFloat($('#treweler-marker-dot-size').val()),\r\n          markerColorTriangle = hex2rgba($('#marker_color_triangle').val(), 1),\r\n          markerWidthTriangle = Number.isNaN(parseFloat($('#treweler-marker-width-triangle').val())) ? 12 : parseFloat($('#treweler-marker-width-triangle').val()),\r\n          markerHeightTriangle = Number.isNaN(parseFloat($('#treweler-marker-height-triangle').val())) ? 10 : parseFloat($('#treweler-marker-height-triangle').val());\r\n\r\n        let defaultAnchor = markerPosition;\r\n\r\n        marker.remove();\r\n        var markerEle = document.createElement('div');\r\n        let markerSelector = $(this).val();\r\n        markerEle.className = 'treweler-marker';\r\n        if (markerSelector === 'default') {\r\n          markerEle.innerHTML = '<div class=\"marker\"><div class=\"marker-wrap\"><div class=\"marker__shadow\" style=\"background-color:' + halo_color + ';\"><div class=\"marker__border\" style=\"border-color:' + color + ';\"><div class=\"marker__center\"></div></div></div></div></div>';\r\n        } else if ('dot-default' === markerSelector) {\r\n          markerEle.innerHTML = `<div class=\"marker marker--dot-solid\" style=\"margin-left:${markerInnerSizeMargins}px;margin-top:${markerInnerSizeMargins}px;border:${borderWidth}px solid ${borderColor};border-radius: ${cornerRadius}${cornerRadiusUnits};width:${markerInnerSize}px;height:${markerInnerSize}px;background-color:${marker_dotcenter_color};\"></div>`;\r\n          defaultAnchor = 'center';\r\n        } else if ('balloon-default' === markerSelector) {\r\n          let styleBalloon = `\r\n                        background-color: ${markerColorBalloon};    \r\n                        border: ${borderWidthBalloon}px solid ${borderColorBalloon};\r\n                        width: ${markerSizeBalloon}px;\r\n                        height: ${markerSizeBalloon}px;`;\r\n\r\n          let styleBalloonDot = `\r\n                        width:${dotSize}px;\r\n                        height:${dotSize}px;\r\n                        margin-left:${(dotSize / 2) * -1}px;\r\n                        margin-top:${(dotSize / 2) * -1}px;\r\n                        background-color:${dotColor};\r\n                        `;\r\n          markerEle.innerHTML = `<div class=\"treweler-marker marker-balloon\" style=\"${styleBalloon}\"><div class=\"marker-balloon__dot\" style=\"${styleBalloonDot}\"></div></div>`;\r\n          defaultAnchor = 'bottom';\r\n\r\n        } else if ('triangle-default' === markerSelector) {\r\n          const styleTriangle = `\r\n                        \r\n                        border-right-width:${markerWidthTriangle / 2}px;\r\n                        border-left-width:${markerWidthTriangle / 2}px;\r\n                        border-bottom-width: ${markerHeightTriangle}px;\r\n                        border-bottom-color: ${markerColorTriangle};\r\n                        \r\n                        `;\r\n          markerEle.innerHTML = `<div class=\"treweler-marker marker-triangle\" style=\"${styleTriangle}\"></div>`;\r\n\r\n          defaultAnchor = 'center';\r\n        }\r\n\r\n        marker = new mapboxgl.Marker(markerEle, {\r\n          draggable: true,\r\n          anchor: defaultAnchor\r\n        }).setLngLat([lng, lat]).addTo(map);\r\n\r\n        if ('balloon-default' === markerSelector) {\r\n          const $marker = document.getElementsByClassName('marker-balloon')[0];\r\n          const rotateHeight = $marker.getBoundingClientRect().height;\r\n          const rotateMarkerSizeBalloon = Number.isNaN(parseFloat($('#treweler-marker-size-balloon').val())) ? 18 : parseFloat($('#treweler-marker-size-balloon').val());\r\n          const rotateBorderWidthBalloon = Number.isNaN(parseFloat($('#treweler-marker-border-width-balloon').val())) ? 4 : parseFloat($('#treweler-marker-border-width-balloon').val());\r\n          $('.marker-balloon').css('bottom', ((rotateHeight - (rotateMarkerSizeBalloon + rotateBorderWidthBalloon + rotateBorderWidthBalloon)) / 2));\r\n        }\r\n\r\n        marker.on('dragend', function(e) {\r\n          let ll = marker.getLngLat();\r\n          $('#latitude').val(ll.lat);\r\n          $('#longitude').val(ll.lng);\r\n        });\r\n\r\n        /*----------------*/\r\n        if (markerSelector === 'custom') {\r\n\r\n          let selectedImg = {\r\n            url: $('.js-twer-attach-thumb-custom input[type=\"hidden\"]').val()\r\n          };\r\n\r\n          if (selectedImg.url.length > 0) {\r\n            let lat = (($('#latitude').val().trim() != '' && $('#latitude').val() != 0) ? $('#latitude').val().trim() : 0.1),\r\n              lng = (($('#longitude').val().trim() != '' && $('#longitude').val() != 0) ? $('#longitude').val().trim() : 0.1),\r\n              anchorV = $('#marker_position').val();\r\n\r\n            let iHeight = 42,\r\n              iWidth = 42;\r\n\r\n            let markerSizeR = Number.isNaN(parseInt($('#treweler-marker-img-size').val())) ? 42 : parseInt($('#treweler-marker-img-size').val());\r\n\r\n            /* remove marker */\r\n            marker.remove();\r\n            /* add icon */\r\n            var markerEle = document.createElement('div');\r\n            markerEle.className = 'treweler-marker icon';\r\n            markerEle.style.backgroundImage = 'url(' + selectedImg.url + ')';\r\n            markerEle.style.backgroundSize = 'contain';\r\n            markerEle.style.backgroundRepeat = 'no-repeat';\r\n            markerEle.style.backgroundPosition = 'center center';\r\n            markerEle.style.width = parseInt(markerSizeR) > 1 ? parseInt(markerSizeR) + 'px' : iWidth + 'px';\r\n            markerEle.style.height = parseInt(markerSizeR) > 1 ? parseInt(markerSizeR) + 'px' : iHeight + 'px';\r\n\r\n            marker = new mapboxgl.Marker(markerEle, {\r\n              draggable: true,\r\n              anchor: anchorV\r\n            }).setLngLat([lng, lat]).addTo(map);\r\n            /**\r\n             * Change marker position on drag\r\n             */\r\n            marker.on('dragend', function(e) {\r\n              let ll = marker.getLngLat();\r\n              $('#latitude').val(ll.lat);\r\n              $('#longitude').val(ll.lng);\r\n            });\r\n\r\n            //$('#marker_icon_size').val(iHeight + ';' + iWidth);\r\n\r\n          }\r\n\r\n        }\r\n        /*----------------*/\r\n\r\n        pickerMapApply(['treweler-picker', 'treweler-picker-dot'], ['treweler-balloon-icon-picker', 'treweler-dot-icon-picker'], ['balloon_icon_color', 'dot_icon_color'], ['treweler-balloon-icon-size', 'treweler-dot-icon-size']);\r\n      });\r\n\r\n      const $addAttach = document.querySelectorAll('.js-twer-attach-add-custom');\r\n      const $removeAttach = document.querySelectorAll('.js-twer-attach-remove-custom');\r\n      let xmlFrame;\r\n\r\n      // Click on Upload attach button in metabox\r\n      $addAttach.forEach((element) => {\r\n        element.addEventListener('click', event => {\r\n          event.preventDefault();\r\n          const $btn = event.target;\r\n          if (xmlFrame) {\r\n            xmlFrame.open();\r\n            return;\r\n          }\r\n          xmlFrame = wp.media({\r\n            title: 'Select file',\r\n            button: {\r\n              text: 'Upload file'\r\n            },\r\n            library: {\r\n              type: ['image'],\r\n            },\r\n            multiple: false\r\n          });\r\n          xmlFrame.on('select', () => {\r\n            const xmlFrameFile = xmlFrame.state().get('selection').first();\r\n            const xmlUrl = xmlFrameFile.toJSON().url;\r\n            const xmlName = xmlFrameFile.attributes.filename;\r\n            const $attachWrap = $btn.closest('.js-twer-attach-wrap-custom');\r\n            const $thumbWrap = $attachWrap.getElementsByClassName('js-twer-attach-thumb-custom')[0];\r\n\r\n            const $img = document.createElement('IMG');\r\n            $img.setAttribute('src', xmlUrl);\r\n            $img.setAttribute('alt', xmlFrameFile.changed.title);\r\n\r\n            $attachWrap.getElementsByTagName('img')[0]?.remove();\r\n            $thumbWrap.appendChild($img);\r\n            if (!$btn.classList.contains('button')) {\r\n              $btn.style.display = 'none';\r\n            }\r\n            $thumbWrap.nextElementSibling.style.display = 'block';\r\n            $attachWrap.getElementsByTagName('input')[0].value = xmlUrl;\r\n\r\n            let selectedImg = xmlFrame.state().get('selection').first().toJSON(); /* selectedImg.url */\r\n            let lat = (($('#latitude').val().trim() != '' && $('#latitude').val() != 0) ? $('#latitude').val().trim() : 0.1),\r\n              lng = (($('#longitude').val().trim() != '' && $('#longitude').val() != 0) ? $('#longitude').val().trim() : 0.1),\r\n              anchorV = $('#marker_position').val();\r\n            if (selectedImg.subtype === 'svg+xml') {\r\n\r\n              jQuery.ajax({\r\n                type: 'GET',\r\n                url: selectedImg.url,\r\n                success: function(data) {\r\n                  let svgEle = document.createElement('div');\r\n                  svgEle.innerHTML = new XMLSerializer().serializeToString(data.documentElement);\r\n                  let svgH = parseInt($(svgEle).find('svg').attr('height')),\r\n                    svgW = parseInt($(svgEle).find('svg').attr('width'));\r\n\r\n                  let iHeight = svgH <= 42 ? (svgH % 2 === 0 ? svgH : svgH + 1) : 42,\r\n                    iWidth = svgW <= 42 ? (svgW % 2 === 0 ? svgW : svgW + 1) : 42;\r\n\r\n                  let markerSizeR = Number.isNaN(parseInt($('#treweler-marker-img-size').val())) ? 42 : parseInt($('#treweler-marker-img-size').val());\r\n\r\n                  /* remove marker */\r\n                  marker.remove();\r\n                  /* add icon */\r\n                  var markerEle = document.createElement('div');\r\n                  markerEle.className = 'treweler-marker icon';\r\n                  markerEle.style.backgroundImage = 'url(' + selectedImg.url + ')';\r\n                  markerEle.style.backgroundSize = 'contain';\r\n                  markerEle.style.backgroundRepeat = 'no-repeat';\r\n                  markerEle.style.backgroundPosition = 'center center';\r\n                  markerEle.style.width = parseInt(markerSizeR) > 1 ? parseInt(markerSizeR) + 'px' : iWidth + 'px';\r\n                  markerEle.style.height = parseInt(markerSizeR) > 1 ? parseInt(markerSizeR) + 'px' : iHeight + 'px';\r\n\r\n                  marker = new mapboxgl.Marker(markerEle, {\r\n                    draggable: true,\r\n                    anchor: anchorV\r\n                  }).setLngLat([lng, lat]).addTo(map);\r\n                  /**\r\n                   * Change marker position on drag\r\n                   */\r\n                  marker.on('dragend', function(e) {\r\n                    let ll = marker.getLngLat();\r\n                    $('#latitude').val(ll.lat);\r\n                    $('#longitude').val(ll.lng);\r\n                  });\r\n\r\n                  $('#marker_icon_size').val(iHeight + ';' + iWidth);\r\n\r\n                }\r\n              });\r\n\r\n            } else {\r\n\r\n              let iHeight = selectedImg.height <= 42 ? (selectedImg.height % 2 === 0 ? selectedImg.height : selectedImg.height + 1) : 42,\r\n                iWidth = selectedImg.width <= 42 ? (selectedImg.width % 2 === 0 ? selectedImg.width : selectedImg.width + 1) : 42;\r\n\r\n              let markerSizeR = Number.isNaN(parseInt($('#treweler-marker-img-size').val())) ? 42 : parseInt($('#treweler-marker-img-size').val());\r\n\r\n              /* remove marker */\r\n              marker.remove();\r\n              /* add icon */\r\n              var markerEle = document.createElement('div');\r\n              markerEle.className = 'treweler-marker icon';\r\n              markerEle.style.backgroundImage = 'url(' + selectedImg.url + ')';\r\n              markerEle.style.backgroundSize = 'contain';\r\n              markerEle.style.backgroundRepeat = 'no-repeat';\r\n              markerEle.style.backgroundPosition = 'center center';\r\n              markerEle.style.width = parseInt(markerSizeR) > 1 ? parseInt(markerSizeR) + 'px' : iWidth + 'px';\r\n              markerEle.style.height = parseInt(markerSizeR) > 1 ? parseInt(markerSizeR) + 'px' : iHeight + 'px';\r\n\r\n              marker = new mapboxgl.Marker(markerEle, {\r\n                draggable: true,\r\n                anchor: anchorV\r\n              }).setLngLat([lng, lat]).addTo(map);\r\n              /**\r\n               * Change marker position on drag\r\n               */\r\n              marker.on('dragend', function(e) {\r\n                let ll = marker.getLngLat();\r\n                $('#latitude').val(ll.lat);\r\n                $('#longitude').val(ll.lng);\r\n              });\r\n\r\n              $('#marker_icon_size').val(iHeight + ';' + iWidth);\r\n            }\r\n\r\n          });\r\n          xmlFrame.open();\r\n        });\r\n\r\n      });\r\n\r\n      // Click on Remove attach button in metabox\r\n      $removeAttach.forEach((element) => {\r\n        element.addEventListener('click', event => {\r\n          event.preventDefault();\r\n          const $btn = event.target;\r\n          const $attachWrap = $btn.closest('.js-twer-attach-wrap-custom');\r\n          const $thumbWrap = $attachWrap.getElementsByClassName('js-twer-attach-thumb-custom')[0];\r\n          $attachWrap.getElementsByTagName('img')[0]?.remove();\r\n          $attachWrap.getElementsByTagName('input')[0].value = '';\r\n          $btn.closest('.js-twer-attach-actions-custom').style.display = 'none';\r\n          $thumbWrap.getElementsByClassName('js-twer-attach-add-custom')[0].style.display = 'block';\r\n          addHTMLMarker();\r\n          $('#marker_icon_size').val('');\r\n        });\r\n\r\n      });\r\n\r\n    }\r\n\r\n    $('#color-picker-btn, .clr-picker span').on('click', function() {\r\n      let mrkrStyle = $('#marker_style').val();\r\n      if (colorPicker.find('.a-color-picker').length === 0) {\r\n        TWER_HELPERS.AColorPicker.from('.color-picker').on('change', (picker, color) => {\r\n\r\n          // Handling Onchange color in editor\r\n          if (['default'].includes(mrkrStyle)) {\r\n            $('.treweler-marker .marker .marker__border').css('border-color', picker.color);\r\n          } else if (['dot-default'].includes(mrkrStyle)) {\r\n            $('.treweler-marker .marker').css('background-color', picker.color);\r\n          }\r\n\r\n          $('.clr-picker span').css('background-color', picker.color);\r\n          $('#markerColor').val(picker.color);\r\n          colorPicker.attr('acp-color', picker.color);\r\n        }).on('coloradd', (picker, color) => {\r\n          let cca = $('#addCustomColor');\r\n          if (cca.val().indexOf('|' + color) === -1) {\r\n            cca.val(cca.val() + '|' + color);\r\n            jQuery.ajax({\r\n              url: twer_ajax.url,\r\n              type: 'POST',\r\n              data: {action: 'treweler_add_colorpicker_custom_color', cust_color: cca.val()},\r\n              success: function(response) {\r\n                let eleCP = colorPicker, defaultCP = eleCP.attr('default-palette');\r\n                eleCP.attr('acp-palette', defaultCP + '' + response);\r\n              }\r\n            });\r\n          }\r\n        }).on('colorremove', (picker, color) => {\r\n          let ccr = $('#addCustomColor');\r\n          if (ccr.val().indexOf('|' + color) !== -1) {\r\n            let sc = ccr.val().replace('|' + color, '');\r\n            ccr.val(sc);\r\n            jQuery.ajax({\r\n              url: twer_ajax.url,\r\n              type: 'POST',\r\n              data: {action: 'treweler_add_colorpicker_custom_color', cust_color: ccr.val()},\r\n              success: function(response) {\r\n                let eleCP = colorPicker, defaultCP = eleCP.attr('default-palette');\r\n                eleCP.attr('acp-palette', defaultCP + '' + response);\r\n              }\r\n            });\r\n          }\r\n        });\r\n\r\n      } else {\r\n        colorPicker.find('.a-color-picker').remove();\r\n      }\r\n    });\r\n\r\n    // Universal init color pickers\r\n    $('.js-twer-color-picker').on('click', function(event) {\r\n      event.stopPropagation();\r\n      var $colorPicker = $(this);\r\n      var $colorPickerCell = $colorPicker.children('span');\r\n      var $colorPickerWrap = $colorPicker.closest('.js-twer-color-picker-wrap');\r\n      var $palette = $colorPickerWrap.find('.js-twer-color-picker-palette');\r\n      var $colorInput = $colorPickerWrap.find('input[type=\"hidden\"]');\r\n\r\n      if ($palette.find('.a-color-picker').length === 0) {\r\n        TWER_HELPERS.AColorPicker.from($palette[0]).on('change', (picker, color) => {\r\n          $colorPickerCell.css('background-color', picker.color);\r\n          $colorInput.val(picker.color);\r\n          $palette.attr('acp-color', picker.color);\r\n\r\n          switch ($colorInput.attr('id')) {\r\n            case 'marker_dotcenter_color' :\r\n              $('.marker.marker--dot-solid').css('background-color', hex2rgba(picker.color, 1));\r\n              break;\r\n            case 'marker_halo_color' :\r\n              let opacityHalo = $('#treweler-marker-halo-opacity').val();\r\n              opacityHalo = Number.isNaN(parseFloat(opacityHalo)) ? 0.5 : parseFloat(opacityHalo);\r\n              $('.treweler-marker .marker .marker__shadow').css('background-color', hex2rgba(picker.color, opacityHalo));\r\n              break;\r\n            case 'marker_border_color' :\r\n              $('.treweler-marker .marker').css('border-color', hex2rgba(picker.color, 1));\r\n              break;\r\n            case 'marker_dot_color' :\r\n              $('.treweler-marker.marker-balloon .marker-balloon__dot').css('background-color', hex2rgba(picker.color, 1));\r\n              break;\r\n            case 'marker_color_balloon' :\r\n              $('.treweler-marker.marker-balloon').css('background-color', hex2rgba(picker.color, 1));\r\n              break;\r\n            case 'marker_border_color_balloon' :\r\n              $('.treweler-marker.marker-balloon').css('border-color', hex2rgba(picker.color, 1));\r\n              break;\r\n            case 'marker_color_triangle' :\r\n              $('.treweler-marker.marker-triangle').css('border-bottom-color', hex2rgba(picker.color, 1));\r\n              break;\r\n            case 'balloon_icon_color' :\r\n              pickerMapApply(['treweler-picker', 'treweler-picker-dot'], ['treweler-balloon-icon-picker', 'treweler-dot-icon-picker'], ['balloon_icon_color', 'dot_icon_color'], ['treweler-balloon-icon-size', 'treweler-dot-icon-size']);\r\n              break;\r\n            case 'dot_icon_color' :\r\n              pickerMapApply(['treweler-picker', 'treweler-picker-dot'], ['treweler-balloon-icon-picker', 'treweler-dot-icon-picker'], ['balloon_icon_color', 'dot_icon_color'], ['treweler-balloon-icon-size', 'treweler-dot-icon-size']);\r\n              break;\r\n          }\r\n        }).on('coloradd', (picker, color) => {\r\n          let cca = $('#addCustomColor');\r\n          if (cca.val().indexOf('|' + color) === -1) {\r\n            cca.val(cca.val() + '|' + color);\r\n            jQuery.ajax({\r\n              url: twer_ajax.url,\r\n              type: 'POST',\r\n              data: {action: 'treweler_add_colorpicker_custom_color', cust_color: cca.val()},\r\n              success: function(response) {\r\n                let defaultCP = $palette.attr('default-palette');\r\n                $palette.attr('acp-palette', defaultCP + '' + response);\r\n                $palette.attr('acp-palette', defaultCP + '' + response);\r\n                colorPicker.attr('acp-palette', defaultCP + '' + response);\r\n              }\r\n            });\r\n          }\r\n        }).on('colorremove', (picker, color) => {\r\n          let ccr = $('#addCustomColor');\r\n          if (ccr.val().indexOf('|' + color) !== -1) {\r\n            let sc = ccr.val().replace('|' + color, '');\r\n            ccr.val(sc);\r\n            jQuery.ajax({\r\n              url: twer_ajax.url,\r\n              type: 'POST',\r\n              data: {action: 'treweler_add_colorpicker_custom_color', cust_color: ccr.val()},\r\n              success: function(response) {\r\n                let defaultCP = $palette.attr('default-palette');\r\n                $palette.attr('acp-palette', defaultCP + '' + response);\r\n              }\r\n            });\r\n          }\r\n        });\r\n      } else {\r\n        $palette.find('.a-color-picker').remove();\r\n      }\r\n\r\n    });\r\n    $('.js-twer-color-picker-palette').on('click', function(event) {\r\n      event.stopPropagation();\r\n    });\r\n\r\n    $('#treweler-marker-corner-radius-group-select').on('change', function() {\r\n      let cornerRadiusUnitsSe1 = Number.isNaN(parseFloat($('#treweler-marker-corner-radius-group').val())) ? 50 : parseFloat($('#treweler-marker-corner-radius-group').val());\r\n      const value = Number.isNaN(this.value) ? '%' : this.value;\r\n      $('.treweler-marker .marker').css('borderRadius', `${cornerRadiusUnitsSe1}${value}`);\r\n    });\r\n\r\n    $([\r\n      '#treweler-marker-halo-opacity',\r\n      '#treweler-marker-size',\r\n      '#treweler-marker-border-width',\r\n      '#treweler-marker-corner-radius-group',\r\n      '#treweler-marker-size-balloon',\r\n      '#treweler-marker-border-width-balloon',\r\n      '#treweler-marker-dot-size',\r\n      '#treweler-marker-width-triangle',\r\n      '#treweler-marker-height-triangle',\r\n      '#treweler-balloon-icon-size',\r\n      '#treweler-dot-icon-size'\r\n    ].join()).on('keyup change', function() {\r\n      let value = $(this).val();\r\n      const $marker = $('.treweler-marker .marker');\r\n      switch (this.id) {\r\n        case 'treweler-balloon-icon-size' :\r\n          pickerMapApply(['treweler-picker', 'treweler-picker-dot'], ['treweler-balloon-icon-picker', 'treweler-dot-icon-picker'], ['balloon_icon_color', 'dot_icon_color'], ['treweler-balloon-icon-size', 'treweler-dot-icon-size']);\r\n          break;\r\n        case 'treweler-dot-icon-size' :\r\n          pickerMapApply(['treweler-picker', 'treweler-picker-dot'], ['treweler-balloon-icon-picker', 'treweler-dot-icon-picker'], ['balloon_icon_color', 'dot_icon_color'], ['treweler-balloon-icon-size', 'treweler-dot-icon-size']);\r\n          break;\r\n        case 'treweler-marker-width-triangle' :\r\n          if ($('.treweler-marker.marker-triangle').length > 0) {\r\n            value = Number.isNaN(parseFloat(value)) ? 12 : parseFloat(value);\r\n            $('.treweler-marker.marker-triangle').css({\r\n              borderRightWidth: `${value / 2}px`,\r\n              borderLeftWidth: `${value / 2}px`,\r\n            });\r\n          }\r\n          break;\r\n        case 'treweler-marker-height-triangle' :\r\n          if ($('.treweler-marker.marker-triangle').length) {\r\n            value = Number.isNaN(parseFloat(value)) ? 10 : parseFloat(value);\r\n            $('.treweler-marker.marker-triangle').css({\r\n              borderBottomWidth: `${value}px`,\r\n            });\r\n          }\r\n          break;\r\n        case 'treweler-marker-size-balloon' :\r\n\r\n          if ($('.treweler-marker.marker-balloon').length > 0) {\r\n            value = Number.isNaN(parseFloat(value)) ? 18 : parseFloat(value);\r\n            $('.treweler-marker.marker-balloon').css({\r\n              width: `${value}px`,\r\n              height: `${value}px`,\r\n            });\r\n            const $marker1 = document.getElementsByClassName('marker-balloon');\r\n\r\n            if ($marker1.length > 0) {\r\n              const rotateHeight = $marker1[0].getBoundingClientRect().height;\r\n              const rotateBorderWidthBalloon = Number.isNaN(parseFloat($('#treweler-marker-border-width-balloon').val())) ? 4 : parseFloat($('#treweler-marker-border-width-balloon').val());\r\n\r\n              $('.treweler-marker.marker-balloon').css({\r\n                bottom: ((rotateHeight - (value + rotateBorderWidthBalloon + rotateBorderWidthBalloon)) / 2)\r\n              });\r\n            }\r\n          }\r\n          break;\r\n        case 'treweler-marker-border-width-balloon' :\r\n\r\n          if ($('.treweler-marker.marker-balloon').length > 0) {\r\n            value = Number.isNaN(parseFloat(value)) ? 4 : parseFloat(value);\r\n            $('.treweler-marker.marker-balloon').css({\r\n              borderWidth: `${value}px`,\r\n\r\n            });\r\n\r\n            const $marker2 = document.getElementsByClassName('marker-balloon');\r\n\r\n            if ($marker2.length > 0) {\r\n              const rotateHeight2 = $marker2[0].getBoundingClientRect().height;\r\n              const rotateBorderWidthBalloon2 = Number.isNaN(parseFloat($('#treweler-marker-size-balloon').val())) ? 18 : parseFloat($('#treweler-marker-size-balloon').val());\r\n\r\n              $('.treweler-marker.marker-balloon').css({\r\n                bottom: ((rotateHeight2 - (rotateBorderWidthBalloon2 + value + value)) / 2)\r\n              });\r\n            }\r\n          }\r\n          break;\r\n        case 'treweler-marker-dot-size' :\r\n          if ($('.treweler-marker.marker-balloon .marker-balloon__dot').length > 0) {\r\n            value = Number.isNaN(parseFloat(value)) ? 8 : parseFloat(value);\r\n\r\n            $('.treweler-marker.marker-balloon .marker-balloon__dot').css({\r\n              width: `${value}px`,\r\n              height: `${value}px`,\r\n              marginLeft: `${(value / 2) * -1}px`,\r\n              marginTop: `${(value / 2) * -1}px`\r\n            });\r\n          }\r\n          break;\r\n        case 'treweler-marker-halo-opacity' :\r\n          if ($('.treweler-marker .marker .marker__shadow').length > 0) {\r\n            value = Number.isNaN(parseFloat(value)) ? 0.5 : parseFloat(value);\r\n            $('.treweler-marker .marker .marker__shadow').css('background-color', hex2rgba($('#marker_halo_color').val(), value));\r\n          }\r\n          break;\r\n        case 'treweler-marker-size' :\r\n          if ($marker.length > 0) {\r\n            value = Number.isNaN(parseFloat(value)) ? 12 : parseFloat(value);\r\n            const realBrd = Number.isNaN(parseFloat($('#treweler-marker-border-width').val())) ? 0 : parseFloat($('#treweler-marker-border-width').val());\r\n\r\n            $('.treweler-marker .marker.marker--dot-solid').css({\r\n              width: `${value}px`,\r\n              height: `${value}px`,\r\n              marginLeft: `${((value + realBrd + realBrd) / 2) * -1}px`,\r\n              marginTop: `${((value + realBrd + realBrd) / 2) * -1}px`\r\n            });\r\n          }\r\n          break;\r\n        case 'treweler-marker-border-width' :\r\n          if ($marker.length > 0) {\r\n            value = Number.isNaN(parseFloat(value)) ? 0 : parseFloat(value);\r\n            const realSize = Number.isNaN(parseFloat($('#treweler-marker-size').val())) ? 12 : parseFloat($('#treweler-marker-size').val());\r\n\r\n            $('.treweler-marker .marker.marker--dot-solid').css({\r\n              width: `${realSize}px`,\r\n              height: `${realSize}px`,\r\n              borderWidth: `${value}px`,\r\n              marginLeft: `${((realSize + value + value) / 2) * -1}px`,\r\n              marginTop: `${((realSize + value + value) / 2) * -1}px`\r\n            });\r\n          }\r\n          break;\r\n        case 'treweler-marker-corner-radius-group' :\r\n          if ($marker.length > 0) {\r\n            value = Number.isNaN(parseFloat(value)) ? 50 : parseFloat(value);\r\n            let cornerRadiusUnitsSe = Number.isNaN($('#treweler-marker-corner-radius-group-select').val()) ? '%' : $('#treweler-marker-corner-radius-group-select').val();\r\n            $('.treweler-marker .marker.marker--dot-solid').css('borderRadius', `${value}${cornerRadiusUnitsSe}`);\r\n          }\r\n          break;\r\n      }\r\n\r\n    });\r\n\r\n    $(window).on('click', function() {\r\n      $('.js-twer-color-picker-palette').find('.a-color-picker').remove();\r\n    });\r\n\r\n    $(window).on('click', function(event) {\r\n      if (!$(event.target).hasClass('a-color-picker') && $(event.target).parents('.a-color-picker').length === 0 && $(event.target).attr('id') !== 'color-picker-btn' && !$(event.target).hasClass('color-holder') && !$(event.target).hasClass('a-color-picker-palette-color')) {\r\n        colorPicker.find('.a-color-picker').remove();\r\n      }\r\n    });\r\n\r\n    $(document).on('change', '#marker_position,#treweler-marker-img-size', function() {\r\n      let imgObj = $('.js-twer-attach-wrap-custom img');\r\n      if (imgObj.length !== undefined && imgObj.length > 0) {\r\n\r\n        let lat = (($('#latitude').val().trim() !== '' && $('#latitude').val() !== 0) ? $('#latitude').val().trim() : 0.1),\r\n          lng = (($('#longitude').val().trim() !== '' && $('#longitude').val() !== 0) ? $('#longitude').val().trim() : 0.1),\r\n          imgURL = $('.js-twer-attach-wrap-custom img').attr('src'),\r\n          anchorV = $('#marker_position').val(),\r\n          markerImgSize = Number.isNaN(parseInt($('#treweler-marker-img-size').val())) ? 42 : parseInt($('#treweler-marker-img-size').val()),\r\n          imgSize = $('#marker_icon_size').val() !== '' ? $('#marker_icon_size').val().split(';') : '42;42'.split(';');\r\n\r\n        let iHeight = parseInt(imgSize[0]) <= 42 ? (parseInt(imgSize[0]) % 2 === 0 ? parseInt(imgSize[0]) : parseInt(imgSize[0]) + 1) : 42;\r\n        let iWidth = parseInt(imgSize[1]) <= 42 ? (parseInt(imgSize[1]) % 2 === 0 ? parseInt(imgSize[1]) : parseInt(imgSize[1]) + 1) : 42;\r\n\r\n        /* remove marker */\r\n        marker.remove();\r\n\r\n        /* Add Marker */\r\n        var markerEle = document.createElement('div');\r\n        markerEle.className = 'treweler-marker icon';\r\n        markerEle.style.backgroundImage = 'url(' + imgURL + ')';\r\n        markerEle.style.backgroundSize = 'contain';\r\n        markerEle.style.backgroundRepeat = 'no-repeat';\r\n        markerEle.style.backgroundPosition = 'center center';\r\n        markerEle.style.width = parseInt(markerImgSize) > 1 ? parseInt(markerImgSize) + 'px' : parseInt(iWidth) + 'px';\r\n        markerEle.style.height = parseInt(markerImgSize) > 1 ? parseInt(markerImgSize) + 'px' : parseInt(iHeight) + 'px';\r\n        /*\tmarkerEle.style.imageRendering = '-webkit-optimize-contrast'; */\r\n        marker = new mapboxgl.Marker(markerEle, {\r\n          draggable: true,\r\n          anchor: anchorV\r\n        }).setLngLat([lng, lat]).addTo(map);\r\n\r\n        /**\r\n         * Change marker position on drag\r\n         */\r\n        marker.on('dragend', function(e) {\r\n          let ll = marker.getLngLat();\r\n          $('#latitude').val(ll.lat);\r\n          $('#longitude').val(ll.lng);\r\n        });\r\n\r\n      }\r\n    });\r\n\r\n    const $picker = jQuery('#treweler-balloon-icon-picker').fontIconPicker({\r\n      iconGenerator: function(icon) {\r\n        return '<i class=\"material-icons\">' + icon + '</i>';\r\n      }\r\n    });\r\n\r\n    $picker.on('change', function() {\r\n      pickerMapApply(['treweler-picker'], ['treweler-balloon-icon-picker'], ['balloon_icon_color'], ['treweler-balloon-icon-size']);\r\n    });\r\n    const xhr = new XMLHttpRequest();\r\n\r\n    xhr.open('GET', twer_ajax.fonts_url + 'material-icons.json');\r\n    xhr.send();\r\n\r\n    xhr.onload = () => {\r\n      if (xhr.status >= 200 && xhr.status < 300) {\r\n        const icons = xhr.response;\r\n\r\n        if (icons) {\r\n          $picker.setIcons(JSON.parse(icons));\r\n\r\n        }\r\n      } else {\r\n        console.log(`Error: ${xhr.status}: ${xhr.statusText}`);\r\n      }\r\n    };\r\n\r\n    xhr.onerror = () => console.log(xhr.statusText);\r\n    window.TWER_FONTPICKERS = $picker;\r\n\r\n    const $picker1 = jQuery('#treweler-dot-icon-picker').fontIconPicker({\r\n      iconGenerator: function(icon) {\r\n        return '<i class=\"material-icons\">' + icon + '</i>';\r\n      }\r\n    });\r\n\r\n    $picker1.on('change', function() {\r\n      pickerMapApply(['treweler-picker-dot'], ['treweler-dot-icon-picker'], ['dot_icon_color'], ['treweler-dot-icon-size']);\r\n    });\r\n    const xhr1 = new XMLHttpRequest();\r\n\r\n    xhr1.open('GET', twer_ajax.fonts_url + 'material-icons.json');\r\n    xhr1.send();\r\n\r\n    xhr1.onload = () => {\r\n      if (xhr1.status >= 200 && xhr1.status < 300) {\r\n        const icons = xhr1.response;\r\n\r\n        if (icons) {\r\n          $picker1.setIcons(JSON.parse(icons));\r\n\r\n        }\r\n      } else {\r\n        console.log(`Error: ${xhr1.status}: ${xhr1.statusText}`);\r\n      }\r\n    };\r\n\r\n    xhr1.onerror = () => console.log(xhr1.statusText);\r\n    window.TWER_FONTPICKERS1 = $picker1;\r\n\r\n    let attachPromise;\r\n\r\n    function hasAttr($element, attr = 'data-current') {\r\n\r\n      return $element?.get(0)?.hasAttribute(attr);\r\n    }\r\n\r\n    function template_apply(selector, elementType, value, event) {\r\n      const $element = $(selector);\r\n      if ('checkbox' === elementType) {\r\n        if ('reset' === event) {\r\n          value = $element.attr('data-current');\r\n        }\r\n        if ('set' === event) {\r\n          const checkboxVal = $element.is(':checked');\r\n          $element.closest('.twer-switcher').attr('data-default', value);\r\n          $element.closest('.twer-switcher').attr('data-readonly', 'true');\r\n          if (!hasAttr($element.closest('.twer-switcher'))) {\r\n            $element.closest('.twer-switcher').attr('data-current', checkboxVal ? '1' : '0');\r\n          }\r\n          $element.prop('checked', parseInt(value));\r\n        }\r\n      } else if ('colorpicker' === elementType) {\r\n        if ('reset' === event) {\r\n          value = $element.closest('.twer-color-picker-wrap').attr('data-current');\r\n        }\r\n\r\n        if ('set' === event) {\r\n          const colorpickerVal = $element.val();\r\n          if (!hasAttr($element.closest('.twer-color-picker-wrap'))) {\r\n            $element.closest('.twer-color-picker-wrap').attr('data-current', colorpickerVal);\r\n          }\r\n          $element.val(value);\r\n          $element.attr('value', value);\r\n          $element.closest('.twer-color-picker-wrap').attr('data-default', value);\r\n          $element.closest('.twer-color-picker-wrap').attr('data-readonly', 'true');\r\n          $element.closest('.twer-color-picker-wrap').find('.color-holder').css('background-color', value);\r\n          $element.closest('.twer-color-picker-wrap').find('.twer-color-picker-palette').attr('acp-color', value);\r\n        }\r\n\r\n      } else if ('text' === elementType || 'number' === elementType || 'url' === elementType) {\r\n        if ('reset' === event) {\r\n          value = $element.attr('data-current');\r\n        }\r\n\r\n        if ('set' === event) {\r\n          const inputVal = $element.val();\r\n          if (!hasAttr($element)) {\r\n            $element.attr('data-current', inputVal);\r\n          }\r\n          $element.attr('data-default', value);\r\n          $element.val(value);\r\n          $element.attr('value', value);\r\n          $element.attr('data-readonly', 'true');\r\n        }\r\n\r\n      } else if ('select' === elementType) {\r\n        if ('reset' === event) {\r\n          value = $element.attr('data-current');\r\n        }\r\n\r\n        if ('set' === event) {\r\n          const selectVal = $element.val();\r\n          if (!hasAttr($element)) {\r\n            $element.attr('data-current', selectVal);\r\n          }\r\n          $element.attr('data-default', value);\r\n          $element.val(value);\r\n          $element.attr('data-readonly', 'true');\r\n        }\r\n      } else if ('iconpicker' === elementType) {\r\n        if ('reset' === event) {\r\n          value = $element.attr('data-current');\r\n        }\r\n\r\n        if ('set' === event) {\r\n          const iconVal = $element.val();\r\n          $element.prev('.icons-selector').attr('data-readonly', 'true');\r\n          if (!hasAttr($element)) {\r\n            $element.attr('data-current', iconVal);\r\n          }\r\n          $element.attr('data-default', value);\r\n          $element.val(value);\r\n          $element.attr('value', value);\r\n\r\n          if ($element.attr('id') === 'treweler-balloon-icon-picker') {\r\n            window.TWER_FONTPICKERS.setIcon(value);\r\n          }\r\n\r\n          if ($element.attr('id') === 'treweler-dot-icon-picker') {\r\n            window.TWER_FONTPICKERS1.setIcon(value);\r\n          }\r\n        }\r\n\r\n      } else if ('image' === elementType) {\r\n        if ('reset' === event) {\r\n          value = $element.attr('data-current');\r\n        }\r\n\r\n        if ('set' === event) {\r\n          const attachVal = $element.val();\r\n          $('.js-twer-attach-remove-custom').trigger('click');\r\n          $element.closest('.js-twer-attach-wrap-custom').attr('data-readonly', 'true');\r\n          if (!hasAttr($element.closest('.js-twer-attach-wrap-custom'))) {\r\n            $element.closest('.js-twer-attach-wrap-custom').attr('data-current', attachVal);\r\n          }\r\n\r\n          attachPromise = wp.media.attachment(value).fetch().then(function(data) {\r\n            let url = wp.media.attachment(value).get('url');\r\n            $(selector).val(url);\r\n            $(selector).attr('value', url);\r\n            $element.closest('.js-twer-attach-wrap-custom').attr('data-default', url);\r\n            let $attachWrap = $('.js-twer-attach-wrap-custom')[0];\r\n            const $thumbWrap = $attachWrap.getElementsByClassName('js-twer-attach-thumb-custom')[0];\r\n            const $btn = $('.js-twer-attach-add-custom')[0];\r\n            const $img = document.createElement('IMG');\r\n            $img.setAttribute('src', url);\r\n\r\n            $attachWrap.getElementsByTagName('img')[0]?.remove();\r\n            $thumbWrap.appendChild($img);\r\n            if (!$btn.classList.contains('button')) {\r\n              $btn.style.display = 'none';\r\n            }\r\n            $thumbWrap.nextElementSibling.style.display = 'block';\r\n            $attachWrap.getElementsByTagName('input')[0].value = url;\r\n          });\r\n        }\r\n      } else if ('gallery' === elementType) {\r\n        if ('reset' === event) {\r\n          value = $element.attr('data-current');\r\n        }\r\n\r\n        if ('set' === event) {\r\n          const galleryVal = $element.val();\r\n          if (!hasAttr($element.closest('.twer-attach-gallery'))) {\r\n            $element.closest('.twer-attach-gallery').attr('data-current', galleryVal);\r\n          }\r\n          $element.closest('.twer-attach-gallery').attr('data-default', value);\r\n          $element.val(value);\r\n          $element.attr('value', value);\r\n          $element.closest('.twer-attach-gallery').attr('data-readonly', 'true');\r\n          $('.twer-attach-gallery__thumb').remove();\r\n\r\n          if ($element.val()) {\r\n            let ids = $element.val().split(',');\r\n            for (let i = 0; i < ids.length; i++) {\r\n              wp.media.attachment(ids[i]).fetch().then(function(data) {\r\n                let url = wp.media.attachment(ids[i]).get('url');\r\n\r\n                let $divThumb = document.createElement('div');\r\n                $divThumb.setAttribute('class', 'twer-attach-gallery__thumb');\r\n                $divThumb.setAttribute('data-id', ids[i]);\r\n\r\n                let $imgThumb = document.createElement('img');\r\n                $imgThumb.setAttribute('src', url);\r\n\r\n                let $close = document.createElement('a');\r\n                $close.setAttribute('href', '#');\r\n                $close.setAttribute('class', 'twer-attach-gallery__remove js-twer-attach-gallery-remove');\r\n                $divThumb.appendChild($imgThumb);\r\n                $divThumb.appendChild($close);\r\n\r\n                $('.js-twer-attach-gallery-wrap')[0].insertBefore($divThumb, $('.js-twer-attach-gallery-add')[0]);\r\n\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    $('.icons-selector').each(function() {\r\n      let readOnly = $(this).next().attr('data-readonly');\r\n      if (typeof readOnly !== 'undefined' && readOnly !== false) {\r\n        $(this).attr('data-readonly', 'true');\r\n      }\r\n    });\r\n\r\n    $(document).on('click', '.js-twer-lock-default', function(e) {\r\n      e.preventDefault();\r\n      const $lock = $(this);\r\n      const $lockInput = $(this).find('input');\r\n      const index = $lock.index();\r\n      const lockStatus = $lock.hasClass('twer-lock--open') ? 'open' : 'close';\r\n      let $field = $lock.closest('.twer-wrap-fields').find('.twer-group-elements .row');\r\n\r\n      if ($field.length > 0) {\r\n        $field = $field.children().eq(index);\r\n      } else {\r\n        $field = $lock.closest('.twer-wrap-fields');\r\n      }\r\n\r\n      if ('open' === lockStatus) {\r\n        $lockInput.attr('value', 'close');\r\n        $lockInput.val('close');\r\n        $lock.removeClass('twer-lock--open');\r\n\r\n        const $select = $field.find('select');\r\n        const selectVal = $select.val();\r\n        $select.attr('data-readonly', 'true');\r\n        $select.attr('data-current', selectVal);\r\n        $select.val($select.attr('data-default'));\r\n        $select.trigger('change');\r\n\r\n        // Checkbox logic\r\n        const $checkboxWrap = $field.find('.twer-switcher');\r\n        const $checkbox = $checkboxWrap.find('input:checkbox');\r\n        const checkboxVal = $checkbox.is(':checked');\r\n        $checkboxWrap.attr('data-readonly', 'true');\r\n        $checkboxWrap.attr('data-current', checkboxVal ? '1' : '0');\r\n        $checkbox.prop('checked', parseInt($checkboxWrap.attr('data-default')));\r\n        $checkbox.trigger('change');\r\n\r\n        // Icon picker logic\r\n        const $iconsWrap = $field.find('.icons-selector');\r\n        const $iconInput = $iconsWrap.next('input');\r\n        const iconValue = $iconInput.val();\r\n        const iconDefault = $iconInput.attr('data-default');\r\n        if ($iconInput.attr('id') === 'treweler-balloon-icon-picker') {\r\n          window.TWER_FONTPICKERS.setIcon(iconDefault);\r\n        }\r\n\r\n        if ($iconInput.attr('id') === 'treweler-dot-icon-picker') {\r\n          window.TWER_FONTPICKERS1.setIcon(iconDefault);\r\n        }\r\n        $iconsWrap.attr('data-readonly', 'true');\r\n        $iconInput.attr('data-readonly', 'true');\r\n        $iconInput.attr('data-current', iconValue);\r\n\r\n        // ColorPicker logic\r\n        const $colorPickerWrap = $field.find('.twer-color-picker-wrap');\r\n        const $colorPickerInput = $colorPickerWrap.find('.input-color-field');\r\n        const colorValue = $colorPickerInput.val();\r\n        const $holder = $colorPickerWrap.find('.color-holder');\r\n        const $palette = $colorPickerWrap.find('.twer-color-picker-palette');\r\n        const colorDefault = $colorPickerWrap.attr('data-default');\r\n\r\n        $colorPickerInput.val(colorDefault);\r\n        $colorPickerInput.attr('value', colorDefault);\r\n        $holder.css('background-color', colorDefault);\r\n        $palette.attr('acp-color', colorDefault);\r\n\r\n        $colorPickerWrap.attr('data-readonly', 'true');\r\n        $colorPickerWrap.attr('data-current', colorValue);\r\n\r\n        // Text fields logic\r\n        const $input = $field.find('.large-text');\r\n        const inputValue = $input.val();\r\n        const inputDefault = $input.attr('data-default');\r\n        $input.val(inputDefault);\r\n        $input.attr('value', inputDefault);\r\n        $input.attr('data-readonly', 'true');\r\n        $input.attr('data-current', inputValue);\r\n\r\n        // Attach field\r\n        const $attachWrap = $field.find('.twer-attach');\r\n        const $attachInput = $attachWrap.find('input[type=\"hidden\"]');\r\n        const attachValue = $attachInput.val();\r\n        const attachDefault = $attachWrap.attr('data-default');\r\n        $attachInput.val(attachDefault);\r\n        $attachInput.attr('value', attachDefault);\r\n        $attachWrap.attr('data-readonly', 'true');\r\n        $attachWrap.attr('data-current', attachValue);\r\n\r\n        if (attachDefault !== attachValue) {\r\n          $('.js-twer-attach-remove-custom').trigger('click');\r\n\r\n          let url = attachDefault;\r\n\r\n          let $attachWrap1 = $attachWrap[0];\r\n          const $thumbWrap = $attachWrap1.getElementsByClassName('js-twer-attach-thumb-custom')[0];\r\n          const $btn = $('.js-twer-attach-add-custom')[0];\r\n          const $img = document.createElement('IMG');\r\n          $img.setAttribute('src', url);\r\n\r\n          $attachWrap1.getElementsByTagName('img')[0]?.remove();\r\n          $thumbWrap.appendChild($img);\r\n          if (!$btn.classList.contains('button')) {\r\n            $btn.style.display = 'none';\r\n          }\r\n          $thumbWrap.nextElementSibling.style.display = 'block';\r\n          $attachWrap1.getElementsByTagName('input')[0].value = url;\r\n\r\n        }\r\n\r\n        // Gallery fields\r\n        const $galleryWrap = $field.find('.js-twer-attach-gallery-wrap');\r\n        const $galleryInput = $galleryWrap.find('input[type=\"hidden\"]');\r\n        const galleryValue = $galleryInput.val();\r\n        const galleryDefault = $galleryWrap.attr('data-default');\r\n        $galleryInput.val(galleryDefault);\r\n        $galleryInput.attr('value', galleryDefault);\r\n        $galleryWrap.attr('data-readonly', 'true');\r\n        $galleryWrap.attr('data-current', attachValue);\r\n        if (galleryDefault !== galleryValue) {\r\n          $('.twer-attach-gallery__thumb').remove();\r\n          if ($galleryInput.val()) {\r\n            let ids = $galleryInput.val().split(',');\r\n            for (let i = 0; i < ids.length; i++) {\r\n              wp.media.attachment(ids[i]).fetch().then(function(data) {\r\n                let url = wp.media.attachment(ids[i]).get('url');\r\n\r\n                let $divThumb = document.createElement('div');\r\n                $divThumb.setAttribute('class', 'twer-attach-gallery__thumb');\r\n                $divThumb.setAttribute('data-id', ids[i]);\r\n\r\n                let $imgThumb = document.createElement('img');\r\n                $imgThumb.setAttribute('src', url);\r\n\r\n                let $close = document.createElement('a');\r\n                $close.setAttribute('href', '#');\r\n                $close.setAttribute('class', 'twer-attach-gallery__remove js-twer-attach-gallery-remove');\r\n                $divThumb.appendChild($imgThumb);\r\n                $divThumb.appendChild($close);\r\n\r\n                $('.js-twer-attach-gallery-wrap')[0].insertBefore($divThumb, $('.js-twer-attach-gallery-add')[0]);\r\n\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if ('close' === lockStatus) {\r\n        $lockInput.attr('value', 'open');\r\n        $lockInput.val('open');\r\n        $lock.addClass('twer-lock--open');\r\n\r\n        // Select logic\r\n        const $select = $field.find('select');\r\n        const selectVal = $select.val();\r\n        const selectCurrent = $select.attr('data-current');\r\n        if (hasAttr($select)) {\r\n          $select.val(selectCurrent);\r\n        }\r\n        $select.removeAttr('data-readonly');\r\n        $select.attr('data-current', selectVal);\r\n        $select.trigger('change');\r\n\r\n        // Checkbox logic\r\n        const $checkboxWrap = $field.find('.twer-switcher');\r\n        const $checkbox = $checkboxWrap.find('input:checkbox');\r\n        const checkboxVal = $checkbox.is(':checked');\r\n        const checkboxCurrent = $checkboxWrap.attr('data-current');\r\n\r\n        if (hasAttr($checkboxWrap)) {\r\n          $checkbox.prop('checked', parseInt(checkboxCurrent));\r\n        }\r\n        $checkboxWrap.removeAttr('data-readonly');\r\n        $checkboxWrap.attr('data-current', checkboxVal ? '1' : '0');\r\n        $checkbox.trigger('change');\r\n\r\n        // Icon picker logic\r\n        const $iconsWrap = $field.find('.icons-selector');\r\n        const $iconInput = $iconsWrap.next('input');\r\n        const iconValue = $iconInput.val();\r\n        const iconCurrent = $iconInput.attr('data-current');\r\n        if (hasAttr($iconInput)) {\r\n          $iconInput.val(iconCurrent);\r\n          $iconInput.attr('value', iconCurrent);\r\n\r\n          if ($iconInput.attr('id') === 'treweler-balloon-icon-picker') {\r\n            window.TWER_FONTPICKERS.setIcon(iconCurrent);\r\n          }\r\n\r\n          if ($iconInput.attr('id') === 'treweler-dot-icon-picker') {\r\n            window.TWER_FONTPICKERS1.setIcon(iconCurrent);\r\n          }\r\n        }\r\n        $iconsWrap.removeAttr('data-readonly');\r\n        $iconInput.removeAttr('data-readonly');\r\n        $iconInput.attr('data-current', iconValue);\r\n\r\n        // ColorPicker logic\r\n        const $colorPickerWrap = $field.find('.twer-color-picker-wrap');\r\n        const $colorPickerInput = $colorPickerWrap.find('.input-color-field');\r\n        const colorValue = $colorPickerInput.val();\r\n        const $holder = $colorPickerWrap.find('.color-holder');\r\n        const $palette = $colorPickerWrap.find('.twer-color-picker-palette');\r\n        const colorCurrent = $colorPickerWrap.attr('data-current');\r\n        if (hasAttr($colorPickerWrap)) {\r\n          $colorPickerInput.val(colorCurrent);\r\n          $colorPickerInput.attr('value', colorCurrent);\r\n          $holder.css('background-color', colorCurrent);\r\n          $palette.attr('acp-color', colorCurrent);\r\n\r\n        }\r\n        $colorPickerWrap.removeAttr('data-readonly');\r\n        $colorPickerWrap.attr('data-current', colorValue);\r\n\r\n        // Text fields logic\r\n        const $input = $field.find('.large-text');\r\n        const inputValue = $input.val();\r\n        const inputCurrent = $input.attr('data-current');\r\n        if (hasAttr($input)) {\r\n          $input.val(inputCurrent);\r\n          $input.attr('value', inputCurrent);\r\n        }\r\n        $input.removeAttr('data-readonly');\r\n        $input.attr('data-current', inputValue);\r\n\r\n        // Attach field\r\n        const $attachWrap = $field.find('.twer-attach');\r\n        const $attachInput = $attachWrap.find('input[type=\"hidden\"]');\r\n        const attachValue = $attachInput.val();\r\n        const attachCurrent = $attachWrap.attr('data-current');\r\n\r\n        if (hasAttr($attachWrap)) {\r\n          $attachInput.val(attachCurrent);\r\n          $attachInput.attr('value', attachCurrent);\r\n          $attachWrap.find('img').attr('src', attachCurrent);\r\n        }\r\n        $attachWrap.removeAttr('data-readonly');\r\n        $attachWrap.attr('data-current', attachValue);\r\n\r\n        // Gallery fields\r\n        const $galleryWrap = $field.find('.js-twer-attach-gallery-wrap');\r\n        const $galleryInput = $galleryWrap.find('input[type=\"hidden\"]');\r\n        const galleryValue = $galleryInput.val();\r\n        const galleryCurrent = $galleryWrap.attr('data-current');\r\n        if (hasAttr($galleryWrap)) {\r\n          $galleryInput.val(galleryCurrent);\r\n          $galleryInput.attr('value', galleryCurrent);\r\n        }\r\n        $galleryWrap.removeAttr('data-readonly');\r\n        $galleryWrap.attr('data-current', galleryValue);\r\n      }\r\n\r\n      $('#marker_style').trigger('change');\r\n    });\r\n\r\n    $(document).on('change', '#treweler-templates', function(e) {\r\n      const $thisSelect = $(this);\r\n      const id = $thisSelect.val();\r\n      const templates = twer_ajax.templates;\r\n      let event = 'none' === id ? 'reset' : 'set';\r\n      const $defaultLocks = $('.js-twer-defaults');\r\n      const $cf_wrap = $('.js-ui-slider-wrap');\r\n\r\n      const $customFieldsTabs = $('.js-custom-fields-tabs')\r\n\r\n      // marker has template\r\n      if ('none' !== id) {\r\n\r\n        $customFieldsTabs.addClass('d-none');\r\n        $('#twer-nav-custom-fields-wo-template-tab').tab('show');\r\n\r\n        document.getElementById('twer-nav-template-tab').classList.add('nav-link--has-icon');\r\n        const templateData = templates[id];\r\n\r\n        $defaultLocks.removeClass('d-none');\r\n        $defaultLocks.find('input').val('close');\r\n        $defaultLocks.find('input').attr('value', 'close');\r\n        $defaultLocks.find('a').removeClass('twer-lock--open');\r\n\r\n        $cf_wrap.find('.js-custom-fields-list').closest('tr').addClass('d-none');\r\n        $cf_wrap.find('.js-twer-ui-del-tr, .js-twer-ui-sort-tr, .js-twer-ui-disable-tr').addClass('d-none');\r\n        $cf_wrap.find('.twer-defaults').css('right', 0);\r\n\r\n\r\n\r\n        for (const property in templateData) {\r\n          const name = property;\r\n          const value = templateData[property];\r\n\r\n\r\n          switch (name) {\r\n            case 'balloon_icon_show':\r\n              template_apply('#treweler-picker', 'checkbox', value, event);\r\n              break;\r\n            case 'custom_field_show_locator':\r\n              template_apply('#treweler-custom-field-show-locator', 'checkbox', value, event);\r\n              break;\r\n            case 'custom_field_show_locator_preview':\r\n              template_apply('#treweler-custom-field-show-locator-preview', 'checkbox', value, event);\r\n              break;\r\n            case 'custom_field_show':\r\n              template_apply('#treweler-custom-field-show', 'checkbox', value, event);\r\n              break;\r\n            case 'uniqueTemplateCustomFieldsIds' :\r\n              const $wrapper1 = $('#treweler-custom-fields-list-unique').closest('.js-ui-slider-wrap')\r\n                const inputVal = $('#treweler-custom-fields-list-unique').val();\r\n                if (!hasAttr($('#treweler-custom-fields-list-unique'))) {\r\n                  $('#treweler-custom-fields-list-unique').attr('data-current', inputVal);\r\n                }\r\n                $('#treweler-custom-fields-list-unique').attr('data-readonly', 'true');\r\n                $wrapper1.find('.js-twer-ui-del-tr').trigger('click');\r\n\r\n                if (value.length > 0) {\r\n                  let listFields = typeof value === 'string' ? value.split(',') : value;\r\n\r\n                  for (let i = 0; i < listFields.length; i++) {\r\n                    $wrapper1.find('.js-custom-fields-list').val(listFields[i]);\r\n                    $wrapper1.find('.js-add-custom-field').trigger('click');\r\n                  }\r\n                }\r\n                $wrapper1.find('.js-ui-slider-item').each(function() {\r\n                  const $lockIU = $(this).find('.js-twer-lock');\r\n\r\n                  if ($lockIU.hasClass('twer-lock--open')) {\r\n                    $lockIU.trigger('click');\r\n                  }\r\n                });\r\n              break;\r\n            case 'custom_marker_cursor':\r\n              template_apply('#marker_cursor', 'select', value, event);\r\n              break;\r\n            case 'custom_marker_position':\r\n              template_apply('#marker_position', 'select', value, event);\r\n              break;\r\n            case 'custom_marker_size':\r\n              template_apply('#treweler-marker-img-size', 'number', value, event);\r\n              break;\r\n            case 'dot_corner_radius' :\r\n              template_apply('#treweler-marker-corner-radius-group', 'number', value.size, event);\r\n              template_apply('#treweler-marker-corner-radius-group-select', 'select', value.units, event);\r\n              break;\r\n            case 'dot_icon_show':\r\n              template_apply('#treweler-picker-dot', 'checkbox', value, event);\r\n              break;\r\n            case 'label_description':\r\n              template_apply('#treweler-label-description', 'text', value, event);\r\n              break;\r\n            case 'label_enable':\r\n              template_apply('#treweler-marker-enable-labels', 'checkbox', value, event);\r\n              break;\r\n            case 'label_has_bg':\r\n              template_apply('#treweler-label-has-bg', 'checkbox', value, event);\r\n              break;\r\n            case 'label_border_radius':\r\n              template_apply('#treweler-label-border-radius', 'number', value, event);\r\n              break;\r\n            case 'label_letter_spacing':\r\n              template_apply('#treweler-label-letter-spacing', 'number', value, event);\r\n              break;\r\n            case 'label_line_height':\r\n              template_apply('#treweler-label-line-height', 'number', value, event);\r\n              break;\r\n            case 'label_margin':\r\n              template_apply('#treweler-label-margin', 'number', value, event);\r\n              break;\r\n            case 'label_marker_hide':\r\n              template_apply('#treweler-marker-hide', 'checkbox', value, event);\r\n              break;\r\n            case 'label_position':\r\n              template_apply('#treweler-label-position', 'select', value, event);\r\n              break;\r\n            case 'label_size':\r\n              template_apply('#treweler-label-font-size', 'number', value, event);\r\n              break;\r\n            case 'label_weight':\r\n              template_apply('#treweler-label-font-weight', 'select', value, event);\r\n              break;\r\n            case 'marker_enable_clustering':\r\n              template_apply('#treweler-marker-enable-clustering', 'checkbox', value, event);\r\n              break;\r\n            case 'marker_enable_center_on_click':\r\n              template_apply('#treweler-marker-enable-center-on-click', 'checkbox', value, event);\r\n              break;\r\n            case 'marker_hide_in_locator':\r\n              template_apply('#treweler-marker-hide-in-locator', 'checkbox', value, event);\r\n              break;\r\n            case 'marker_ignore_filters':\r\n              template_apply('#treweler-marker-ignore-filters', 'checkbox', value, event);\r\n              break;\r\n            case 'marker_ignore_radius_filter':\r\n              template_apply('#treweler-marker-ignore-radius-filter', 'checkbox', value, event);\r\n              break;\r\n            case 'marker_open_link_by_click' :\r\n              template_apply('#treweler-marker-open-link-by-click', 'checkbox', value, event);\r\n              break;\r\n            case 'marker_click_offset' :\r\n              template_apply('#treweler-marker-click-offset-top', 'number', value.top, event);\r\n              template_apply('#treweler-marker-click-offset-bottom', 'number', value.bottom, event);\r\n              template_apply('#treweler-marker-click-offset-left', 'number', value.left, event);\r\n              template_apply('#treweler-marker-click-offset-right', 'number', value.right, event);\r\n              break;\r\n            case 'marker_icon_size':\r\n              template_apply('#marker_icon_size', 'text', value, event);\r\n              break;\r\n            case 'popup_gallery':\r\n              template_apply('#treweler-popup-gallery', 'gallery', value, event);\r\n              break;\r\n            case 'popup_gallery_position':\r\n              template_apply('#treweler-popup-image-position', 'select', value, event);\r\n              break;\r\n            case 'popup_gallery_show':\r\n              template_apply('#treweler-popup-gallery-show', 'checkbox', value, event);\r\n              break;\r\n            case 'popup_gallery_width':\r\n              template_apply('#treweler-popup-image-width', 'number', value, event);\r\n              break;\r\n            case 'popup_heading':\r\n              template_apply('[name=\"_treweler_popup_heading\"]', 'text', value.text, event);\r\n              template_apply('[name=\"_treweler_popup_heading_size\"]', 'number', value.size, event);\r\n              template_apply('[name=\"_treweler_popup_heading_font_weight\"]', 'select', value.weight, event);\r\n              break;\r\n            case 'popup_description':\r\n              template_apply('[name=\"_treweler_popup_description\"]', 'text', value.text, event);\r\n              template_apply('[name=\"_treweler_popup_description_size\"]', 'number', value.size, event);\r\n              template_apply('[name=\"_treweler_popup_description_font_weight\"]', 'select', value.weight, event);\r\n              break;\r\n            case 'popup_subheading':\r\n              template_apply('[name=\"_treweler_popup_subheading\"]', 'text', value.text, event);\r\n              template_apply('[name=\"_treweler_popup_subheading_size\"]', 'number', value.size, event);\r\n              template_apply('[name=\"_treweler_popup_subheading_font_weight\"]', 'select', value.weight, event);\r\n              break;\r\n            case 'popup_button':\r\n              template_apply('#treweler-popup-button-text', 'text', value.text, event);\r\n              template_apply('#treweler-popup-button-url', 'url', value.url, event);\r\n              template_apply('[name=\"_treweler_popup_button[color]\"]', 'colorpicker', value.color, event);\r\n              template_apply('#treweler-popup-button-target', 'checkbox', value.target, event);\r\n              break;\r\n            case 'popup_content_align':\r\n              template_apply('#treweler-popup-content-align', 'select', value, event);\r\n              break;\r\n            case 'popup_open_on' :\r\n              template_apply('#treweler-popup-open-group-open-on', 'select', value.action, event);\r\n              template_apply('#treweler-popup-open-group-open-default', 'checkbox', value.default, event);\r\n              break;\r\n            case 'popup_close_button' :\r\n              template_apply('#treweler-popup-close-button-style', 'select', value.style, event);\r\n              template_apply('#treweler-popup-close-button-show', 'checkbox', value.show, event);\r\n              break;\r\n            case 'marker_link' :\r\n              template_apply('#treweler-marker-link-url', 'text', value.url, event);\r\n              template_apply('#treweler-marker-link-target', 'checkbox', value.target, event);\r\n              break;\r\n            case 'popup_show':\r\n              template_apply('#treweler-popup-show', 'checkbox', value, event);\r\n              break;\r\n            case 'point_halo_opacity':\r\n              template_apply('#treweler-marker-halo-opacity', 'number', value, event);\r\n              break;\r\n            case 'popup_border_radius':\r\n              template_apply('#treweler-popup-border-radius', 'number', value, event);\r\n              break;\r\n            case 'popup_size' :\r\n              template_apply('#treweler-popup-size-width', 'number', value.width, event);\r\n              template_apply('#treweler-popup-size-height', 'number', value.height, event);\r\n              break;\r\n            case 'triangle_height':\r\n              template_apply('#treweler-marker-height-triangle', 'number', value, event);\r\n              break;\r\n            case 'triangle_width':\r\n            case 'triangle_size':\r\n              template_apply('#treweler-marker-width-triangle', 'number', value, event);\r\n              break;\r\n            case 'popup_style':\r\n              template_apply('#treweler-popup-style', 'select', value, event);\r\n              break;\r\n            case 'balloon':\r\n              template_apply('#marker_color_balloon', 'colorpicker', value.color, event);\r\n              template_apply('#treweler-marker-size-balloon', 'number', value.size, event);\r\n              break;\r\n            case 'balloon_border':\r\n              template_apply('#marker_border_color_balloon', 'colorpicker', value.color, event);\r\n              template_apply('#treweler-marker-border-width-balloon', 'number', value.size, event);\r\n              break;\r\n            case 'balloon_dot':\r\n              template_apply('#marker_dot_color', 'colorpicker', value.color, event);\r\n              template_apply('#treweler-marker-dot-size', 'number', value.size, event);\r\n              break;\r\n            case 'dot' :\r\n              template_apply('#marker_dotcenter_color', 'colorpicker', value.color, event);\r\n              template_apply('#treweler-marker-size', 'number', value.size, event);\r\n              break;\r\n            case 'dot_border' :\r\n              template_apply('#marker_border_color', 'colorpicker', value.color, event);\r\n              template_apply('#treweler-marker-border-width', 'number', value.size, event);\r\n              break;\r\n            case 'dot_icon' :\r\n              template_apply('#dot_icon_color', 'colorpicker', value.color, event);\r\n              template_apply('#treweler-dot-icon-size', 'number', value.size, event);\r\n              break;\r\n            case 'label_color':\r\n              template_apply('#twer-map-label-font-color', 'colorpicker', value, event);\r\n              break;\r\n            case 'point_color':\r\n              template_apply('#markerColor', 'colorpicker', value, event);\r\n              break;\r\n            case 'point_halo_color':\r\n              template_apply('#marker_halo_color', 'colorpicker', value, event);\r\n              break;\r\n            case 'label_padding' :\r\n              template_apply('#treweler-label-padding-top', 'number', value.top, event);\r\n              template_apply('#treweler-label-padding-bottom', 'number', value.bottom, event);\r\n              template_apply('#treweler-label-padding-left', 'number', value.left, event);\r\n              template_apply('#treweler-label-padding-right', 'number', value.right, event);\r\n              break;\r\n            case 'triangle_color':\r\n              template_apply('#marker_color_triangle', 'colorpicker', value, event);\r\n              break;\r\n            case 'balloon_icon':\r\n              template_apply('#balloon_icon_color', 'colorpicker', value.color, event);\r\n              template_apply('#treweler-balloon-icon-size', 'number', value.size, event);\r\n              break;\r\n            case 'balloon_icon_picker':\r\n              template_apply('#treweler-balloon-icon-picker', 'iconpicker', value, event);\r\n              break;\r\n            case 'dot_icon_picker':\r\n              template_apply('#treweler-dot-icon-picker', 'iconpicker', value, event);\r\n              break;\r\n            case 'custom_marker_img':\r\n              template_apply('#thumbnail_id', 'image', value, event);\r\n              break;\r\n            case 'marker_style' :\r\n              template_apply('#marker_style', 'select', value, event);\r\n              break;\r\n          }\r\n        }\r\n\r\n        if ($('#marker_style').val() === 'custom') {\r\n          attachPromise.then(function() {\r\n            $('#treweler-picker-dot, #treweler-picker, #marker_style, #treweler-popup-image-position, #treweler-popup-open-group-open-on, #treweler-marker-img-size').trigger('change');\r\n          }, function(e) {\r\n            $('#treweler-picker-dot, #treweler-picker, #marker_style, #treweler-popup-image-position, #treweler-popup-open-group-open-on').trigger('change');\r\n          });\r\n        } else {\r\n          $('#treweler-picker-dot, #treweler-picker, #marker_style, #treweler-popup-image-position, #treweler-popup-open-group-open-on').trigger('change');\r\n        }\r\n\r\n      } else {\r\n\r\n        $customFieldsTabs.removeClass('d-none');\r\n        $('#twer-nav-custom-fields-wo-template-tab').tab('show');\r\n\r\n        document.getElementById('twer-nav-template-tab').classList.remove('nav-link--has-icon');\r\n        $defaultLocks.addClass('d-none');\r\n        $defaultLocks.find('input').val('open');\r\n        $defaultLocks.find('input').attr('value', 'open');\r\n        $defaultLocks.find('a').removeClass('twer-lock--close');\r\n\r\n        $cf_wrap.find('.js-custom-fields-list').closest('tr').removeClass('d-none');\r\n        $cf_wrap.find('.js-twer-ui-del-tr, .js-twer-ui-sort-tr, .js-twer-ui-disable-tr').removeClass('d-none');\r\n        $cf_wrap.find('.twer-defaults').css('right', '80px');\r\n\r\n        $('.js-twer-ui-del-tr').trigger('click');\r\n\r\n        $('[data-readonly]').each(function() {\r\n          const $element = $(this);\r\n\r\n          $element.removeAttr('data-readonly');\r\n\r\n          let current = $element.attr('data-current');\r\n          if (hasAttr($element)) {\r\n            if ($element.hasClass('large-select')) {\r\n              $element.val(current);\r\n            }\r\n            if ($element.hasClass('large-text')) {\r\n              $element.val(current);\r\n              $element.attr('value', current);\r\n            }\r\n            if ($element.hasClass('twer-switcher')) {\r\n              $element.find('input[type=\"checkbox\"]').prop('checked', parseInt(current));\r\n            }\r\n\r\n            if ($element.hasClass('twer-color-picker-wrap')) {\r\n              $element.find('.input-color-field').val(current);\r\n              $element.find('.input-color-field').attr('value', current);\r\n              $element.find('.color-holder').css('background-color', current);\r\n              $element.find('.twer-color-picker-palette').attr('acp-color', current);\r\n            }\r\n\r\n\r\n            if ($element.hasClass('js-twer-custom-fields-list')) {\r\n              if ($element.val()) {\r\n                let listFields = $element.val().split(',');\r\n                for (let i = 0; i < listFields.length; i++) {\r\n                  $element.closest('.js-ui-slider-wrap').find('.js-custom-fields-list').val(listFields[i]);\r\n                  $element.closest('.js-ui-slider-wrap').find('.js-add-custom-field').trigger('click');\r\n                }\r\n              }\r\n            }\r\n\r\n            if ($element.hasClass('twer-attach-gallery')) {\r\n\r\n              $element.find('input[type=\"hidden\"]').val(current);\r\n              $element.find('input[type=\"hidden\"]').attr('value', current);\r\n              $('.twer-attach-gallery__thumb').remove();\r\n\r\n              if (current) {\r\n                let ids = current.split(',');\r\n                for (let i = 0; i < ids.length; i++) {\r\n                  wp.media.attachment(ids[i]).fetch().then(function(data) {\r\n                    let url = wp.media.attachment(ids[i]).get('url');\r\n\r\n                    let $divThumb = document.createElement('div');\r\n                    $divThumb.setAttribute('class', 'twer-attach-gallery__thumb');\r\n                    $divThumb.setAttribute('data-id', ids[i]);\r\n\r\n                    let $imgThumb = document.createElement('img');\r\n                    $imgThumb.setAttribute('src', url);\r\n\r\n                    let $close = document.createElement('a');\r\n                    $close.setAttribute('href', '#');\r\n                    $close.setAttribute('class', 'twer-attach-gallery__remove js-twer-attach-gallery-remove');\r\n                    $divThumb.appendChild($imgThumb);\r\n                    $divThumb.appendChild($close);\r\n\r\n                    $('.js-twer-attach-gallery-wrap')[0].insertBefore($divThumb, $('.js-twer-attach-gallery-add')[0]);\r\n\r\n                  });\r\n                }\r\n              }\r\n\r\n            }\r\n\r\n            if ($element.hasClass('js-twer-attach-wrap-custom')) {\r\n\r\n              $('.js-twer-attach-remove-custom').trigger('click');\r\n\r\n              let url = current;\r\n              $element.find('input[type=\"hidden\"]').val(current);\r\n              $element.find('input[type=\"hidden\"]').attr('value', current);\r\n\r\n              let $attachWrap = $element[0];\r\n              const $thumbWrap = $attachWrap.getElementsByClassName('js-twer-attach-thumb-custom')[0];\r\n              const $btn = $('.js-twer-attach-add-custom')[0];\r\n              const $img = document.createElement('IMG');\r\n              $img.setAttribute('src', url);\r\n\r\n              $attachWrap.getElementsByTagName('img')[0]?.remove();\r\n              $thumbWrap.appendChild($img);\r\n              if (!$btn.classList.contains('button')) {\r\n                $btn.style.display = 'none';\r\n              }\r\n              $thumbWrap.nextElementSibling.style.display = 'block';\r\n              $attachWrap.getElementsByTagName('input')[0].value = url;\r\n\r\n            }\r\n          }\r\n\r\n          $element.removeAttr('data-current');\r\n          $element.removeAttr('data-default');\r\n        });\r\n\r\n        $('#treweler-picker-dot, #treweler-picker, #marker_style, #treweler-popup-image-position, #treweler-popup-open-group-open-on, #treweler-marker-img-size').trigger('change');\r\n\r\n        setTimeout(function() {\r\n          $('#marker_style').trigger('change');\r\n        }, 500);\r\n\r\n      }\r\n\r\n\r\n\r\n      setTimeout(() => {\r\n        toggleNotEditableFieldsNotice();\r\n      }, 600);\r\n    });\r\n  });\r\n})(jQuery);\r\n\r\n(function() {\r\n\r\n  window.addEventListener('DOMContentLoaded', () => {\r\n\r\n    const toggleElements = () => {\r\n      const $toggleElements = document.getElementsByClassName('js-toggle-row');\r\n\r\n      if ($toggleElements.length > 0) {\r\n        for (let i = 0; i < $toggleElements.length; i++) {\r\n          const $element = $toggleElements[i];\r\n\r\n          let relatedVal = $element.dataset.relatedVal;\r\n          const relatedId = $element.dataset.relatedId;\r\n\r\n          let relatedType = undefined;\r\n          if (relatedVal === '1' || relatedVal === '0') {\r\n            relatedType = 'checkbox';\r\n            relatedVal = '1' === relatedVal;\r\n          } else {\r\n            relatedType = 'select';\r\n            relatedVal = relatedVal.split(',');\r\n          }\r\n\r\n          const $elementRelated = document.getElementById(relatedId);\r\n          const elementRelatedVal = $elementRelated.value;\r\n\r\n          if ($elementRelated.closest('.twer-tr-toggle').classList.contains('d-none')) {\r\n            $element.classList.add('d-none');\r\n          } else {\r\n            if (relatedType === 'select') {\r\n              if (relatedVal.includes(elementRelatedVal)) {\r\n                $element.classList.remove('d-none');\r\n              } else {\r\n                $element.classList.add('d-none');\r\n              }\r\n            } else if (relatedType === 'checkbox') {\r\n              if (relatedVal === $elementRelated.checked) {\r\n                $element.classList.remove('d-none');\r\n              } else {\r\n                $element.classList.add('d-none');\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    toggleElements();\r\n\r\n    document.getElementById('treweler-marker-open-link-by-click').onchange = function() {\r\n      toggleElements();\r\n    };\r\n\r\n    document.getElementById('marker_style').onchange = function() {\r\n      toggleElements();\r\n    };\r\n    document.getElementById('treweler-picker').onchange = function() {\r\n      toggleElements();\r\n      pickerMapApply(['treweler-picker', 'treweler-picker-dot'], ['treweler-balloon-icon-picker', 'treweler-dot-icon-picker'], ['balloon_icon_color', 'dot_icon_color'], ['treweler-balloon-icon-size', 'treweler-dot-icon-size']);\r\n    };\r\n    document.getElementById('treweler-picker-dot').onchange = function() {\r\n      toggleElements();\r\n      pickerMapApply(['treweler-picker', 'treweler-picker-dot'], ['treweler-balloon-icon-picker', 'treweler-dot-icon-picker'], ['balloon_icon_color', 'dot_icon_color'], ['treweler-balloon-icon-size', 'treweler-dot-icon-size']);\r\n    };\r\n\r\n    const elementExists = document.getElementById('treweler-label-has-bg') !== null;\r\n    if (elementExists) {\r\n      document.getElementById('treweler-label-has-bg').onchange = function() {\r\n        toggleElements();\r\n      };\r\n    }\r\n\r\n\r\n\r\n  });\r\n\r\n  window.addEventListener('load', () => {\r\n\r\n  });\r\n\r\n})();\r\n\r\n"],"names":["__","wp","i18n","TWER_CONTROLS","constructor","props","$","toggleElements","document","querySelectorAll","toggleControls","forEach","element","$toggleControl","getElementById","getAttribute","replace","push","toggleControlValue","options","selectedIndex","value","triggerValue","dataset","trigger","classList","add","remove","addEventListener","event","$toggleElement","target","TWER_CUSTOM_FIELDS","elementCount","arr","filter","currentElement","length","scope","each","index","$sortableList","sortable","cursor","placeholder","forcePlaceholderSize","forceHelperSize","scroll","revert","tolerance","handle","items","create","$input","find","ids","children","divIndex","div","data","val","join","update","ui","disableSelection","readOnly","attr","closest","css","pointerEvents","addClass","on","e","preventDefault","$removeButton","$select","id","parseInt","label","text","isNaN","append","popupIds","trim","split","map","locatorPreviewIds","locatorIds","allCustomFieldsIds","setTimeout","$uniqueInput","$uniqueInputWrapper","$uniqueRow","toggleNotEditableFieldsNotice","$addButton","$sortableWrap","selectedId","$row","clone","select2","width","minimumResultsForSearch","toggleClass","removeClass","prop","defaultValue","JSON","parse","insertBefore","console","log","$lock","lockStatus","hasClass","$field","eq","$checkbox","is","stringify","currentValue","$notEditableCustomFieldsNotice","allTrLength","allTrHiddenLength","allTrHiddenHardLength","allTrHide","TWER_UPLOADS","$addAttach","$removeAttach","$btn","$attachWrap","xmlFrame","open","media","title","button","buttonText","library","type","libraryType","multiple","xmlFrameFile","state","get","first","toJSON","xmlUrl","url","xmlId","$thumbWrap","getElementsByClassName","$div","createElement","style","whiteSpace","className","innerText","filename","appendChild","$img","setAttribute","getElementsByTagName","contains","display","nextElementSibling","$addAttachGallery","attachIds","selection","attachment","fetch","elements","parentNode","removeChild","$divThumb","$imgThumb","$close","jQuery","ready","tp","geo","marker","noConflict","pickerMapApply","toggleElementIds","pickerIds","colorsIds","sizeIds","i","showIcon","markerBalloon","markerDot","currentMarkerId","icon","color","size","Number","parseFloat","checked","innerHTML","markerStyle","markerStyleVal","colorPicker","markerPosition","markerSize","getToken","ajax","twer_ajax","action","success","response","res","atob","api_key","init_map","hex2rgba","hex","opacity","r","substring","g","b","tooltip","container","html","lat","lng","zoom","map_style","toArray","item","mapProjection","mapLightPreset","halo_opacity","halo_color","markerInnerSize","marker_dotcenter_color","borderColor","borderWidth","markerInnerSizeMargins","cornerRadius","cornerRadiusUnits","markerColorBalloon","markerSizeBalloon","borderColorBalloon","borderWidthBalloon","dotColor","dotSize","markerColorTriangle","markerWidthTriangle","markerHeightTriangle","mapboxgl","accessToken","Map","center","minZoom","maxZoom","projection","name","mapLightPresetString","setConfigProperty","geocoder","MapboxGeocoder","result","addHTMLMarker","addControl","markerEle","defaultAnchor","styleBalloon","styleBalloonDot","styleTriangle","Marker","draggable","anchor","setLngLat","addTo","$marker","rotateHeight","getBoundingClientRect","height","rotateMarkerSizeBalloon","rotateBorderWidthBalloon","imgURL","anchorV","imgSize","iHeight","iWidth","markerSizeR","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","ll","getLngLat","lngLat","zoomV","getZoom","toFixed","setCenter","defaultMapStyle","defaultMapProjection","defaultMapLightPreset","evt","params","$element","detach","styleV","setStyle","setProjection","includes","markerSelector","selectedImg","xmlName","attributes","changed","subtype","svgEle","XMLSerializer","serializeToString","documentElement","svgH","svgW","mrkrStyle","TWER_HELPERS","AColorPicker","from","picker","cca","indexOf","cust_color","eleCP","defaultCP","ccr","sc","stopPropagation","$colorPicker","$colorPickerCell","$colorPickerWrap","$palette","$colorInput","opacityHalo","cornerRadiusUnitsSe1","borderRightWidth","borderLeftWidth","borderBottomWidth","$marker1","bottom","$marker2","rotateHeight2","rotateBorderWidthBalloon2","marginLeft","marginTop","realBrd","realSize","cornerRadiusUnitsSe","window","parents","imgObj","undefined","markerImgSize","$picker","fontIconPicker","iconGenerator","xhr","XMLHttpRequest","fonts_url","send","onload","status","icons","setIcons","statusText","onerror","TWER_FONTPICKERS","$picker1","xhr1","TWER_FONTPICKERS1","attachPromise","hasAttr","hasAttribute","template_apply","selector","elementType","checkboxVal","colorpickerVal","inputVal","selectVal","iconVal","prev","setIcon","attachVal","then","galleryVal","next","$lockInput","$checkboxWrap","$iconsWrap","$iconInput","iconValue","iconDefault","$colorPickerInput","colorValue","$holder","colorDefault","inputValue","inputDefault","$attachInput","attachValue","attachDefault","$attachWrap1","$galleryWrap","$galleryInput","galleryValue","galleryDefault","selectCurrent","removeAttr","checkboxCurrent","iconCurrent","colorCurrent","inputCurrent","attachCurrent","galleryCurrent","$thisSelect","templates","$defaultLocks","$cf_wrap","$customFieldsTabs","tab","templateData","property","$wrapper1","listFields","$lockIU","units","top","left","right","weight","default","show","current","$toggleElements","relatedVal","relatedId","relatedType","$elementRelated","elementRelatedVal","onchange","elementExists"],"sourceRoot":""}