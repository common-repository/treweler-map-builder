{"version":3,"file":"treweler.js","mappings":"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","sources":["webpack://treweler/./src/js/front/modules/addons.js","webpack://treweler/./src/js/front/modules/category-switcher.js","webpack://treweler/./src/js/front/modules/gallery.js","webpack://treweler/./src/js/front/modules/layers.js","webpack://treweler/./src/js/front/modules/preloader.js","webpack://treweler/./src/js/front/modules/tour.js","webpack://treweler/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://treweler/webpack/bootstrap","webpack://treweler/webpack/runtime/define property getters","webpack://treweler/webpack/runtime/hasOwnProperty shorthand","webpack://treweler/webpack/runtime/make namespace object","webpack://treweler/./src/js/front/treweler.js"],"sourcesContent":["'use strict';\r\n\r\n/**\r\n * Init Addons Logic\r\n */\r\nclass TWER_ADDONS {\r\n\r\n  /**\r\n   * Сonstructor\r\n   *\r\n   * @param props\r\n   */\r\n  constructor(props) {\r\n\r\n      let $btnCatMobile = jQuery('.twer-mobile-menu');\r\n      let $mobileCatMenu = jQuery('.twer-mobile-cat');\r\n      let $select2Container = jQuery('.map-category-container');\r\n      const $selectMapCat = jQuery('#mapCatField');\r\n\r\n      var width = jQuery(window).width();\r\n      jQuery(window).on('resize', function () {\r\n        if (jQuery(this).width() !== width) {\r\n          width = jQuery(this).width();\r\n\r\n          if (width > 650) {\r\n            $select2Container.show();\r\n            $btnCatMobile.hide();\r\n          }else{\r\n            $select2Container.hide();\r\n            $btnCatMobile.show();\r\n          }\r\n\r\n        }\r\n      });\r\n\r\n      $btnCatMobile.on('click', function () {\r\n        if( jQuery(window).width() > 650 ) return false;\r\n\r\n        $select2Container.show();\r\n        $selectMapCat.select2('open');\r\n      });\r\n\r\n      $selectMapCat.on('select2:open', function (e) {\r\n        if( jQuery(window).width() > 650 ) return false;\r\n\r\n        $mobileCatMenu.hide();\r\n      });\r\n\r\n      $selectMapCat.on('select2:close', function (e) {\r\n        if( jQuery(window).width() > 650 ) return false;\r\n\r\n        $select2Container.hide();\r\n        $mobileCatMenu.show();\r\n      });\r\n\r\n\r\n\r\n      /**\r\n       * Fix Height Issue on mobile\r\n       */\r\n\r\n      function setDocHeight() {\r\n        document.documentElement.style.setProperty('--vh', `${window.visualViewport.height / 100}px`);\r\n      }\r\n\r\n  }\r\n\r\n}\r\n\r\nexport default TWER_ADDONS;\r\n\r\n","'use strict';\r\n\r\n/**\r\n * Init Category Switcher Logic\r\n */\r\nclass TWER_CATEGORY_SWITCHER {\r\n\r\n  /**\r\n   * Сonstructor\r\n   *\r\n   * @param props\r\n   */\r\n  constructor(props) {\r\n\r\n    const i18n_categories = treweler_params.i18n_categories;\r\n\r\n    const select2Options = {\r\n      selectionCssClass: 'select2-map-filter-select',\r\n      dropdownCssClass: \"select2-map-filter-ddl\",\r\n      minimumResultsForSearch: Infinity,\r\n      closeOnSelect: false,\r\n      dropdownParent : jQuery('.select2-map-filter'),\r\n      placeholder: i18n_categories.all,\r\n      language: {\r\n        'noResults': function () {\r\n          return i18n_categories.not_found;\r\n        }\r\n      },\r\n    };\r\n    const $selectMapCat = jQuery('#mapCatField');\r\n\r\n    const $parentWidget = $selectMapCat.closest('.twer-widget');\r\n    let ddlShowAbove = false;\r\n    if($parentWidget.hasClass('twer-bottom-right') || $parentWidget.hasClass('twer-bottom-left')) {\r\n      ddlShowAbove = true;\r\n    }\r\n\r\n    if(ddlShowAbove) {\r\n      select2Options.dropdownPosition = 'above';\r\n    }\r\n\r\n    $selectMapCat.select2(select2Options);\r\n\r\n    jQuery('.select2-search.select2-search--inline').html('<span class=\"category-label\">'+i18n_categories.all+'</span>');\r\n\r\n\r\n    $selectMapCat.on('change', function (e) {\r\n      let inLabel = jQuery('.select2-search .category-label');\r\n      let count = $selectMapCat.select2('data').length;\r\n      let countOptions = jQuery('.select2-results__options .select2-results__option').length;\r\n\r\n      if (count === 0) {\r\n        inLabel.html('<span class=\"category-label\">'+i18n_categories.no_selected+'</span>');\r\n      } else if (count === 1) {\r\n        inLabel.html('<span class=\"category-label\">1 '+i18n_categories.one_selected+'</span>');\r\n      } else if (count > 1 && countOptions !== count) {\r\n        inLabel.html('<span class=\"category-label\">' + count + ' '+i18n_categories.selected+'</span>');\r\n      } else {\r\n        inLabel.html('<span class=\"category-label\">'+i18n_categories.all+'</span>');\r\n      }\r\n\r\n    });\r\n\r\n    let select2Main = jQuery('.select2.select2-container');\r\n\r\n    select2Main.has('.select2-dropdown--below').addClass('select2-is-dropdown-below');\r\n    select2Main.has('.select2-dropdown--above').addClass('select2-is-dropdown-above');\r\n\r\n\r\n    /**\r\n     * Map Category Filter\r\n     */\r\n    $selectMapCat.on('select2:unselect', (event) => {\r\n      let categoryId = parseInt(event.params.data.id) || 0;\r\n\r\n      const options = document.getElementById('mapCatField').options;\r\n      const optionsData = {};\r\n      for (let i = 0; i < options.length; i++) {\r\n        if(categoryId === parseInt(options[i].value)) {\r\n          optionsData[options[i].value] = false;\r\n        } else {\r\n          optionsData[options[i].value] = options[i].selected;\r\n        }\r\n      }\r\n\r\n\r\n\r\n\r\n      if (TWER.fitBounds) {\r\n        TWER.map.fitBounds(TWER.boundsData, {\r\n          linear: true\r\n        });\r\n      }\r\n\r\n\r\n      if(!window.TWER.data.allowStoreLocator) {\r\n\r\n        // Run code if clusters disabled\r\n        if (!TWER.allowCluster) {\r\n          for (let i = 0; i < TWER.markers.length; i++) {\r\n            const $markerElement = TWER.markers[i].element._element;\r\n            if ($markerElement.classList.contains(`category-${categoryId}`)) {\r\n              TWER.markers[i].show = false;\r\n              TWER.markers[i].element._element.style.display = 'none';\r\n            }\r\n          }\r\n        } else {\r\n          TWER.globalClusterStatus = false;\r\n\r\n          const removedIndexesFeatures = [];\r\n          const removedIndexesMarkers = [];\r\n          const removedCats = [];\r\n\r\n\r\n          if (!TWER.isEmpty(TWER.clusterData)) {\r\n            if (TWER.clusterData.features.length > 0) {\r\n              for (let i = 0; i < TWER.clusterData.features.length; i++) {\r\n                const props = TWER.clusterData.features[i].properties;\r\n                const categories = JSON.parse(props.cat_ids);\r\n\r\n                if (categories.length <= 1) {\r\n                  if (categories.includes(categoryId)) {\r\n                    removedCats.push(categoryId);\r\n                    removedIndexesFeatures.push(i);\r\n                    TWER.clusterDataDump.push(TWER.clusterData.features[i]);\r\n                  }\r\n                } else {\r\n                  let globalApprove = 0;\r\n                  for (let j = 0; j < categories.length; j++) {\r\n                    if (!optionsData[categories[j]]) {\r\n                      globalApprove++;\r\n                    }\r\n                  }\r\n\r\n                  if (globalApprove === categories.length) {\r\n                    if (categories.includes(categoryId)) {\r\n                      removedCats.push(categoryId);\r\n                      removedIndexesFeatures.push(i);\r\n                      TWER.clusterDataDump.push(TWER.clusterData.features[i]);\r\n                    }\r\n                  }\r\n                }\r\n\r\n              }\r\n\r\n              if (removedIndexesFeatures.length > 0) {\r\n                const indexSet = new Set(removedIndexesFeatures);\r\n                TWER.clusterData.features = TWER.clusterData.features.filter((value, i) => !indexSet.has(i));\r\n              }\r\n\r\n              for (let i = 0; i < TWER.markers.length; i++) {\r\n                const props = TWER.markers[i].feature.properties;\r\n                const markerCategories = JSON.parse(props.cat_ids);\r\n\r\n                if (markerCategories.length <= 1) {\r\n                  if (markerCategories.some(item => removedCats.includes(item))) {\r\n                    removedIndexesMarkers.push(i);\r\n                    TWER.markersDataDump.push(TWER.markers[i]);\r\n                  }\r\n                } else {\r\n                  let globalApprove1 = 0;\r\n                  for (let j = 0; j < markerCategories.length; j++) {\r\n                    if (!optionsData[markerCategories[j]]) {\r\n                      globalApprove1++;\r\n                    }\r\n                  }\r\n\r\n                  if (globalApprove1 === markerCategories.length) {\r\n                    if (markerCategories.some(item => removedCats.includes(item))) {\r\n                      removedIndexesMarkers.push(i);\r\n                      TWER.markersDataDump.push(TWER.markers[i]);\r\n                    }\r\n                  }\r\n\r\n                }\r\n              }\r\n\r\n              if (removedIndexesMarkers.length > 0) {\r\n\r\n                for (let i = 0; i < removedIndexesMarkers.length; i++) {\r\n                  TWER.markers[removedIndexesMarkers[i]].element.remove();\r\n                }\r\n\r\n                const indexSet1 = new Set(removedIndexesMarkers);\r\n\r\n                TWER.markers = TWER.markers.filter((value, i) => !indexSet1.has(i));\r\n\r\n                TWER.map.getSource('locations').setData(TWER.clusterData);\r\n              }\r\n\r\n            }\r\n          }\r\n\r\n\r\n          if (TWER.markersIgnoredClusters.length > 0) {\r\n            for (let i = 0; i < TWER.markersIgnoredClusters.length; i++) {\r\n              const $markerElement = TWER.markersIgnoredClusters[i].element._element;\r\n              if ($markerElement.classList.contains(`category-${categoryId}`)) {\r\n                TWER.markersIgnoredClusters[i].show = false;\r\n                TWER.markersIgnoredClusters[i].element._element.style.display = 'none';\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      let lRoutesRaw = event.params.data.element.dataset.routes.split(' ');\r\n\r\n      let routeAnyChecked = false;\r\n      let ids = [];\r\n\r\n      for (let i = 0; i < lRoutesRaw.length; i++) {\r\n        if (jQuery(\"#mapCatField option[value!='\" + categoryId + \"'][data-routes*='\" + lRoutesRaw[i] + \"']\").is(':checked')) {\r\n          routeAnyChecked = true;\r\n          continue;\r\n        }\r\n        ids.push(lRoutesRaw[i]);\r\n      }\r\n\r\n\r\n\r\n      for (let iw = 0; iw < ids.length; iw++) {\r\n        if (ids[iw] && ids[iw] !== 'route-0') {\r\n          TWER.map.setLayoutProperty(\r\n            ids[iw],\r\n            'visibility',\r\n            'none'\r\n          );\r\n        }\r\n      }\r\n    });\r\n\r\n\r\n    $selectMapCat.on('select2:select', (event) => {\r\n      if(!window.TWER.data.allowStoreLocator) {\r\n        let categoryId = parseInt(event.params.data.id) || 0;\r\n\r\n        if (TWER.fitBounds) {\r\n          TWER.map.fitBounds(TWER.boundsData, {\r\n            linear: true\r\n          });\r\n        }\r\n\r\n        // Run code if clusters disabled\r\n        if (!TWER.allowCluster) {\r\n          for (let i = 0; i < TWER.markers.length; i++) {\r\n            const $markerElement = TWER.markers[i].element._element;\r\n            if ($markerElement.classList.contains(`category-${categoryId}`)) {\r\n              TWER.markers[i].show = true;\r\n              TWER.markers[i].element._element.style.display = 'block';\r\n            }\r\n          }\r\n        } else {\r\n\r\n          TWER.globalClusterStatus = false;\r\n\r\n          const removedIndexesFeatures = [];\r\n          const removedIndexesMarkers = [];\r\n          const removedCats = [];\r\n\r\n          if (!TWER.isEmpty(TWER.clusterDataDump)) {\r\n            if (TWER.clusterDataDump.length > 0) {\r\n\r\n              for (let i = 0; i < TWER.clusterDataDump.length; i++) {\r\n                const props = TWER.clusterDataDump[i].properties;\r\n                const categories = JSON.parse(props.cat_ids);\r\n                if (categories.includes(categoryId)) {\r\n                  removedCats.push(categoryId);\r\n                  removedIndexesFeatures.push(i);\r\n                  TWER.clusterData.features.push(TWER.clusterDataDump[i]);\r\n                }\r\n              }\r\n\r\n              const indexSet = new Set(removedIndexesFeatures);\r\n\r\n              TWER.clusterDataDump = TWER.clusterDataDump.filter((value, i) => !indexSet.has(i));\r\n\r\n              for (let i = 0; i < TWER.markersDataDump.length; i++) {\r\n                const props = TWER.markersDataDump[i].feature.properties;\r\n                const markerCategories = JSON.parse(props.cat_ids);\r\n                if (markerCategories.some(item => removedCats.includes(item))) {\r\n                  removedIndexesMarkers.push(i);\r\n                  TWER.markers.push(TWER.markersDataDump[i]);\r\n                }\r\n              }\r\n              for (let i = 0; i < removedIndexesMarkers.length; i++) {\r\n                const coords = TWER.markersDataDump[removedIndexesMarkers[i]].feature.geometry.coordinates;\r\n                const props = TWER.markersDataDump[removedIndexesMarkers[i]].feature.properties;\r\n                const desc = props?.description;\r\n                props.showPopup = false;\r\n                const markerElement = TWER.createNewMarker(props, coords, desc);\r\n\r\n                TWER.markersDataDump[removedIndexesMarkers[i]].element = new mapboxgl.Marker(markerElement).setLngLat(coords).addTo(TWER.map);\r\n                TWER.__afterCreateNewMarker(markerElement, props);\r\n              }\r\n\r\n              const indexSet1 = new Set(removedIndexesMarkers);\r\n\r\n              TWER.markersDataDump = TWER.markersDataDump.filter((value, i) => !indexSet1.has(i));\r\n\r\n              TWER.map.getSource('locations').setData(TWER.clusterData);\r\n            }\r\n          }\r\n\r\n          if (TWER.markersIgnoredClusters.length > 0) {\r\n            for (let i = 0; i < TWER.markersIgnoredClusters.length; i++) {\r\n              const $markerElement = TWER.markersIgnoredClusters[i].element._element;\r\n              if ($markerElement.classList.contains(`category-${categoryId}`)) {\r\n                TWER.markersIgnoredClusters[i].show = true;\r\n                TWER.markersIgnoredClusters[i].element._element.style.display = 'block';\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n\r\n\r\n      }\r\n\r\n\r\n      let lRoutesRaw = event.params.data.element.dataset.routes.split(' ');\r\n\r\n      for (let i = 0; i < lRoutesRaw.length; i++) {\r\n\r\n        if (lRoutesRaw[i] && lRoutesRaw[i] !== 'route-0') {\r\n          TWER.map.setLayoutProperty(\r\n            lRoutesRaw[i],\r\n            'visibility',\r\n            'visible'\r\n          );\r\n        }\r\n\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n}\r\n\r\nexport default TWER_CATEGORY_SWITCHER;\r\n\r\n","'use strict';\r\n\r\nFancybox.defaults.Hash = false;\r\n/**\r\n * Init Gallery Logic\r\n */\r\nclass TWER_GALLERY {\r\n\r\n  /**\r\n   * Сonstructor\r\n   *\r\n   * @param props\r\n   */\r\n  constructor(props) {\r\n    Fancybox.bind('[data-fancybox]', {\r\n      closeButton : 'outside',\r\n      template : {\r\n        closeButton : '<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M1 1.00146L22.9988 23.0008\" stroke=\"white\" stroke-linecap=\"round\"/><path d=\"M23 1L1.00094 22.9991\" stroke=\"white\" stroke-linecap=\"round\"/></svg>',\r\n      },\r\n      dragToClose : false,\r\n      Image: {\r\n        zoom: false,\r\n        click: null,\r\n        wheel : null\r\n      },\r\n      Toolbar: {\r\n        items : {\r\n          place : {\r\n            type: 'div',\r\n            class: \"fancybox__place js-fancybox-twer-place\",\r\n            label: \"Place\",\r\n            tabindex: -1,\r\n            html: '',\r\n            position: 'left'\r\n          },\r\n          prev: {\r\n            type: \"button\",\r\n            class: \"fancybox__button--prev\",\r\n            label: \"PREV\",\r\n            html: '<svg width=\"8\" height=\"14\" viewBox=\"0 0 8 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M6.82572 12.6514L1.00003 6.82569L6.82572 1\" stroke=\"white\"/></svg>',\r\n            click: function (event) {\r\n              event.preventDefault();\r\n\r\n              this.fancybox.prev();\r\n            },\r\n            position: 'right'\r\n          },\r\n          next: {\r\n            type: \"button\",\r\n            class: \"fancybox__button--next\",\r\n            label: \"NEXT\",\r\n            html: '<svg width=\"8\" height=\"14\" viewBox=\"0 0 8 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M1.17428 12.6514L6.99997 6.82569L1.17428 1\" stroke=\"white\"/></svg>',\r\n            click: function (event) {\r\n              event.preventDefault();\r\n\r\n              this.fancybox.next();\r\n            },\r\n            position: 'right'\r\n          },\r\n        },\r\n        display: ['place', 'prev', 'next']\r\n      },\r\n      Carousel: {\r\n        Navigation: false,\r\n      },\r\n      keyboard : {\r\n        Escape: \"close\",\r\n        Delete: \"close\",\r\n        Backspace: \"close\",\r\n        PageUp: false,\r\n        PageDown: false,\r\n        ArrowUp: false,\r\n        ArrowDown: false,\r\n        ArrowRight: false,\r\n        ArrowLeft: false,\r\n      },\r\n      on: {\r\n        'Carousel.change': (fancybox) => {\r\n          const $toolbar = fancybox.plugins.Toolbar.$container;\r\n\r\n          const placeValue = fancybox.items[0].$trigger.dataset.place.trim();\r\n          const $placeElement = $toolbar.getElementsByClassName('js-fancybox-twer-place')[0];\r\n\r\n          const infoValue = fancybox.getSlide().caption;\r\n\r\n\r\n          let separator = '';\r\n          if(infoValue.length > 0) {\r\n            separator = '<div class=\"place-separator\"></div>'\r\n          }\r\n\r\n          $placeElement.innerHTML = `${placeValue}${separator}${infoValue}`;\r\n\r\n        },\r\n        'ready': (fancybox) => {\r\n          const $toolbar = fancybox.plugins.Toolbar.$container;\r\n\r\n          const placeValue = fancybox.items[0].$trigger.dataset.place.trim();\r\n          const $placeElement = $toolbar.getElementsByClassName('js-fancybox-twer-place')[0];\r\n\r\n          const infoValue = fancybox.items[0].$trigger.getElementsByTagName('img')[0].alt.trim();\r\n\r\n          let separator = '';\r\n          if(infoValue.length > 0) {\r\n            separator = '<div class=\"place-separator\"></div>'\r\n          }\r\n          $placeElement.innerHTML = `${placeValue}${separator}${infoValue}`;\r\n        }\r\n      },\r\n      Thumbs: false,\r\n      hash : false\r\n    });\r\n  }\r\n}\r\n\r\nexport default TWER_GALLERY;\r\n","'use strict';\r\n\r\nclass TwerLayers {\r\n\r\n  layerMappings = {\r\n    place_labels: 'showPlaceLabels',\r\n    road_labels: 'showRoadLabels',\r\n    points_of_interest: 'showPointOfInterestLabels',\r\n    transit_labels: 'showTransitLabels',\r\n  };\r\n\r\n  constructor(data) {\r\n    this.mapStyle = data.style;\r\n    this.activeLayers = data.layers;\r\n\r\n    this.layersTypes = ['showPlaceLabels', 'showRoadLabels', 'showPointOfInterestLabels', 'showTransitLabels'];\r\n\r\n\r\n    TWER.map.on('style.load', () => {\r\n      if(data.customStyle === '') {\r\n        this.handleStyleLoad();\r\n      }\r\n    });\r\n  }\r\n\r\n  handleStyleLoad() {\r\n    if (this.mapStyle === 'mapbox://styles/mapbox/standard-beta') {\r\n      this.layersTypes.forEach(item => {\r\n        TWER.map.setConfigProperty('basemap', item, this.activeLayers.includes(item));\r\n      });\r\n    } else {\r\n      this.updateMapLayers();\r\n    }\r\n  }\r\n\r\n\r\n  setLayerVisibility(layerId, visibility) {\r\n    TWER.map.setLayoutProperty(layerId, 'visibility', visibility ? 'visible' : 'none');\r\n  }\r\n\r\n  updateLayerVisibility(layers, activeLayers, layerType) {\r\n    layers.forEach(layerId => {\r\n      this.setLayerVisibility(layerId, activeLayers.includes(layerType));\r\n    });\r\n  }\r\n\r\n\r\n  updateMapLayers() {\r\n    const layerGroups = {\r\n      showPlaceLabels: [\r\n        'continent-label',\r\n        'country-label',\r\n        'state-label',\r\n        'settlement-major-label',\r\n        'settlement-minor-label',\r\n        'settlement-subdivision-label',\r\n      ],\r\n      showRoadLabels: [\r\n        'road-exit-shield',\r\n        'road-label-simple',\r\n        'road-exit-shield-navigation',\r\n        'road-number-shield',\r\n        'road-number-shield-navigation',\r\n        'road-label-navigation',\r\n        'road-label',\r\n        'road-intersection'\r\n      ],\r\n      showPointOfInterestLabels: ['poi-label'],\r\n      showTransitLabels: [\r\n        'airport-label',\r\n        'transit-label',\r\n        'ferry-aerialway-label',\r\n      ],\r\n      boundaries: [\r\n        'admin-0-boundary-disputed',\r\n        'admin-0-boundary',\r\n        'admin-1-boundary',\r\n        'admin-0-boundary-bg',\r\n        'admin-1-boundary-bg',\r\n      ],\r\n      building_labels: [\r\n        'block-number-label',\r\n        'building-number-label',\r\n        'building-entrance',\r\n      ],\r\n      buildings: [\r\n        'building',\r\n        'building-underground',\r\n        'building-outline',\r\n      ],\r\n      natural_features: [\r\n        'water-point-label',\r\n        'water-line-label',\r\n        'natural-point-label',\r\n        'natural-line-label',\r\n        'waterway-label',\r\n      ],\r\n      pedestrian_labels: [\r\n        'golf-hole-label',\r\n        'path-pedestrian-label',\r\n      ],\r\n      pedestrian_roads: [\r\n        'bridge-pedestrian',\r\n        'bridge-steps',\r\n        'bridge-path',\r\n        'bridge-pedestrian-case',\r\n        'bridge-steps-bg',\r\n        'bridge-path-bg',\r\n        'golf-hole-line',\r\n        'road-pedestrian',\r\n        'road-steps',\r\n        'road-path',\r\n        'road-pedestrian-case',\r\n        'road-steps-bg',\r\n        'road-path-bg',\r\n        'road-pedestrian-polygon-pattern',\r\n        'road-pedestrian-polygon-fill',\r\n        'tunnel-pedestrian',\r\n        'tunnel-steps',\r\n        'tunnel-path',\r\n        'gate-label',\r\n        'bridge-path-cycleway-piste',\r\n        'bridge-path-trail',\r\n        'road-path-cycleway-piste',\r\n        'road-path-trail',\r\n        'tunnel-path-cycleway-piste',\r\n        'tunnel-path-trail',\r\n      ],\r\n      transit : [\r\n        'aerialway',\r\n        'bridge-rail-tracks',\r\n        'bridge-rail',\r\n        'road-rail-tracks',\r\n        'road-rail',\r\n        'ferry-auto',\r\n        'ferry',\r\n        'aeroway-line',\r\n        'aeroway-polygon',\r\n      ],\r\n      roads : [\r\n        \"bridge-oneway-arrow-white\",\r\n        \"bridge-oneway-arrow-blue\",\r\n        \"bridge-motorway-trunk-2\",\r\n        \"bridge-major-link-2\",\r\n        \"bridge-motorway-trunk-2-case\",\r\n        \"bridge-major-link-2-case\",\r\n        \"bridge-motorway-trunk\",\r\n        \"bridge-primary\",\r\n        \"bridge-secondary-tertiary\",\r\n        \"bridge-street-low\",\r\n        \"bridge-street\",\r\n        \"bridge-major-link\",\r\n        \"bridge-minor-link\",\r\n        \"bridge-minor\",\r\n        \"bridge-construction\",\r\n        \"bridge-motorway-trunk-case\",\r\n        \"bridge-major-link-case\",\r\n        \"bridge-primary-case\",\r\n        \"bridge-secondary-tertiary-case\",\r\n        \"bridge-minor-link-case\",\r\n        \"bridge-street-case\",\r\n        \"bridge-minor-case\",\r\n        \"crosswalks\",\r\n        \"road-oneway-arrow-white\",\r\n        \"road-oneway-arrow-blue\",\r\n        \"level-crossing\",\r\n        \"road-motorway-trunk\",\r\n        \"road-primary\",\r\n        \"road-secondary-tertiary\",\r\n        \"road-street-low\",\r\n        \"road-street\",\r\n        \"road-major-link\",\r\n        \"road-minor-link\",\r\n        \"road-minor\",\r\n        \"road-construction\",\r\n        \"turning-feature\",\r\n        \"road-motorway-trunk-case\",\r\n        \"road-major-link-case\",\r\n        \"road-primary-case\",\r\n        \"road-secondary-tertiary-case\",\r\n        \"road-minor-link-case\",\r\n        \"road-street-case\",\r\n        \"road-minor-case\",\r\n        \"turning-feature-outline\",\r\n        \"road-polygon\",\r\n        \"tunnel-oneway-arrow-white\",\r\n        \"tunnel-oneway-arrow-blue\",\r\n        \"tunnel-motorway-trunk\",\r\n        \"tunnel-primary\",\r\n        \"tunnel-secondary-tertiary\",\r\n        \"tunnel-street-low\",\r\n        \"tunnel-street\",\r\n        \"tunnel-major-link\",\r\n        \"tunnel-minor-link\",\r\n        \"tunnel-minor\",\r\n        \"tunnel-construction\",\r\n        \"tunnel-motorway-trunk-case\",\r\n        \"tunnel-major-link-case\",\r\n        \"tunnel-primary-case\",\r\n        \"tunnel-secondary-tertiary-case\",\r\n        \"tunnel-minor-link-case\",\r\n        \"tunnel-street-case\",\r\n        \"tunnel-minor-case\",\r\n        \"bridge-simple\",\r\n        \"bridge-case-simple\",\r\n        \"road-simple\",\r\n        \"tunnel-simple\",\r\n        \"incident-startpoints-navigation\",\r\n        \"incident-endpoints-navigation\",\r\n        \"incident-closure-line-highlights-navigation\",\r\n        \"incident-closure-lines-navigation\",\r\n        \"traffic-bridge-oneway-arrow-white-navigation\",\r\n        \"traffic-bridge-oneway-arrow-blue-navigation\",\r\n        \"traffic-road-oneway-arrow-white-navigation\",\r\n        \"traffic-road-oneway-arrow-blue-navigation\",\r\n        \"traffic-tunnel-oneway-arrow-white-navigation\",\r\n        \"traffic-tunnel-oneway-arrow-blue-navigation\",\r\n        \"traffic-level-crossing-navigation\",\r\n        \"traffic-bridge-road-motorway-trunk-navigation\",\r\n        \"traffic-bridge-road-motorway-trunk-case-navigation\",\r\n        \"traffic-bridge-road-major-link-navigation\",\r\n        \"traffic-bridge-road-primary-navigation\",\r\n        \"traffic-bridge-road-secondary-tertiary-navigation\",\r\n        \"traffic-bridge-road-street-navigation\",\r\n        \"traffic-bridge-road-minor-navigation\",\r\n        \"traffic-bridge-road-link-navigation\",\r\n        \"bridge-motorway-trunk-2-navigation\",\r\n        \"bridge-major-link-2-navigation\",\r\n        \"bridge-motorway-trunk-2-case-navigation\",\r\n        \"bridge-major-link-2-case-navigation\",\r\n        \"bridge-motorway-trunk-navigation\",\r\n        \"bridge-primary-navigation\",\r\n        \"bridge-secondary-tertiary-navigation\",\r\n        \"bridge-street-navigation\",\r\n        \"bridge-minor-navigation\",\r\n        \"bridge-major-link-navigation\",\r\n        \"bridge-construction-navigation\",\r\n        \"bridge-motorway-trunk-case-navigation\",\r\n        \"bridge-major-link-case-navigation\",\r\n        \"bridge-primary-case-navigation\",\r\n        \"bridge-secondary-tertiary-case-navigation\",\r\n        \"bridge-street-case-navigation\",\r\n        \"bridge-street-low-navigation\",\r\n        \"bridge-minor-case-navigation\",\r\n        \"turning-feature-navigation\",\r\n        \"level-crossing-navigation\",\r\n        \"traffic-tunnel-motorway-trunk-navigation\",\r\n        \"road-motorway-trunk-navigation\",\r\n        \"traffic-tunnel-major-link-navigation\",\r\n        \"road-motorway-trunk-case-low-navigation\",\r\n        \"traffic-tunnel-primary-navigation\",\r\n        \"road-primary-navigation\",\r\n        \"traffic-tunnel-secondary-tertiary-navigation\",\r\n        \"road-secondary-tertiary-navigation\",\r\n        \"traffic-tunnel-street-navigation\",\r\n        \"road-street-navigation\",\r\n        \"traffic-tunnel-minor-navigation\",\r\n        \"traffic-tunnel-link-navigation\",\r\n        \"road-minor-navigation\",\r\n        \"road-major-link-navigation\",\r\n        \"road-construction-navigation\",\r\n        \"road-motorway-trunk-case-navigation\",\r\n        \"road-major-link-case-navigation\",\r\n        \"road-primary-case-navigation\",\r\n        \"road-secondary-tertiary-case-navigation\",\r\n        \"road-street-case-navigation\",\r\n        \"road-street-low-navigation\",\r\n        \"road-minor-case-navigation\",\r\n        \"turning-feature-outline-navigation\",\r\n        \"tunnel-motorway-trunk-navigation\",\r\n        \"tunnel-primary-navigation\",\r\n        \"tunnel-secondary-tertiary-navigation\",\r\n        \"tunnel-street-navigation\",\r\n        \"tunnel-minor-navigation\",\r\n        \"tunnel-major-link-navigation\",\r\n        \"tunnel-construction-navigation\",\r\n        \"tunnel-motorway-trunk-case-navigation\",\r\n        \"tunnel-major-link-case-navigation\",\r\n        \"tunnel-primary-case-navigation\",\r\n        \"tunnel-secondary-tertiary-case-navigation\",\r\n        \"tunnel-street-case-navigation\",\r\n        \"tunnel-street-low-navigation\",\r\n        \"tunnel-minor-case-navigation\"\r\n      ],\r\n      land_structure : [\r\n        \"land-structure-line\",\r\n        \"land-structure-polygon\",\r\n        \"pitch-outline\",\r\n        \"landuse\",\r\n        \"national-park\",\r\n        \"landcover\",\r\n        \"national-park_tint-band\",\r\n        \"cliff\",\r\n        \"wetland-pattern\",\r\n        \"wetland\"\r\n      ],\r\n      hillshade : [\r\n        'hillshade'\r\n      ],\r\n      water_depth : [\r\n        'water-depth'\r\n      ],\r\n      contour_lines : [\r\n        'contour-label',\r\n        'contour-line',\r\n      ]\r\n    };\r\n\r\n    TWER.map.getStyle().layers.map((layer) => {\r\n      for (const [layerType, layerIds] of Object.entries(layerGroups)) {\r\n        if (layerIds.includes(layer.id)) {\r\n          this.setLayerVisibility(layer.id, this.activeLayers.includes(layerType));\r\n          break;\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport default TwerLayers;\r\n","'use strict';\r\n\r\n/**\r\n * Init Preload Logic\r\n */\r\nclass TWER_PRELOADER {\r\n\r\n\r\n  $preloader = null;\r\n  $counter = null;\r\n\r\n  constructor() {\r\n\r\n    this.$preloader = document.getElementsByClassName('twer-preloader');\r\n    this.$counter = document.querySelectorAll('.twer-preloader .loading-progress');\r\n\r\n    if(!TWER.data.boundaries) {\r\n\r\n      this.initPreloader();\r\n    }\r\n      TWER.map.on('idle', (e) => {\r\n        if(!TWER.data.boundaries) {\r\n          // HIDE Preloader when map idle\r\n          this.hide();\r\n        }\r\n      });\r\n\r\n\r\n\r\n\r\n  }\r\n\r\n  initPreloader() {\r\n\r\n    if (this.$preloader.length > 0) {\r\n\r\n      let plr = 0;\r\n\r\n\r\n      if (plr === 0) {\r\n        plr = 1;\r\n        let percent = 1;\r\n        const id = setInterval(() => {\r\n          let maxPercent = Math.floor(Math.random() * (99 - 95 + 1) + 95);\r\n          if (percent >= maxPercent) {\r\n            clearInterval(id);\r\n            plr = 0;\r\n          } else {\r\n            percent++;\r\n            if(this.$counter.length > 0) {\r\n              this.$counter[0].innerHTML = `${percent}%`;\r\n            }\r\n          }\r\n        }, 10);\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  hide() {\r\n    if (this.$preloader.length > 0) {\r\n      setTimeout(()=>{\r\n        this.$preloader[0].classList.add('twer-preloader--hide');\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default TWER_PRELOADER;\r\n","'use strict';\r\n\r\n/**\r\n * Init Tour Logic\r\n */\r\nclass TWER_TOUR {\r\n\r\n  /**\r\n   * Сonstructor\r\n   *\r\n   * @param data\r\n   */\r\n  constructor(data) {\r\n\r\n    TWER.tour = data.allowTour;\r\n    TWER.tourAutoRun = data.allowTour;\r\n\r\n    if (data.allowTour) {\r\n      localStorage.setItem('toggleTourTag', 1);\r\n      localStorage.setItem('toggleTourEnd', 1);\r\n      localStorage.setItem('toggleTourNeverRunning', 1);\r\n\r\n      let mainTourData = {\r\n        'tourData': data.tourData,\r\n        'tourPopUp': data.tourPopUp,\r\n        'tourType': data.tourType,\r\n        'tourFlySpeed': data.tourFlySpeed,\r\n        'tourFlyCurve': data.tourFlyCurve,\r\n        'tourLabelMarker': data.tourLabelMarker,\r\n      };\r\n\r\n      this.tourHandler(mainTourData);\r\n\r\n\r\n      if (data.tourAutoRun) {\r\n        TWER.map.once('idle', () => {\r\n          setTimeout(() => {\r\n            document.getElementById('btn-tour-right').click();\r\n          }, 200);\r\n        });\r\n      }\r\n\r\n    } else {\r\n      localStorage.setItem('toggleTourTag', 0);\r\n      localStorage.setItem('toggleTourEnd', 1);\r\n      localStorage.setItem('toggleTourNeverRunning', 1);\r\n    }\r\n\r\n  }\r\n  tourHandler (mainTourData) {\r\n\r\n    let arr = JSON.parse(mainTourData.tourData);\r\n    let tourPopUpGlobal = mainTourData.tourPopUp;\r\n    let i = -1;\r\n    let tourNumberContainer = document.getElementsByClassName('twer-tour-number-container-js');\r\n    let tourNumber = document.getElementsByClassName('twer-tour-number');\r\n    let tourNumberLabel = document.getElementsByClassName('twer-tour-number-label');\r\n    const tourTextLabel = document.getElementsByClassName('text-label');\r\n    let countedTour = arr.length;\r\n\r\n    if (countedTour === 0) {\r\n      return;\r\n    }\r\n\r\n\r\n    function twerStrInt(numInt) {\r\n      return numInt.toLocaleString('en-US', {\r\n        minimumIntegerDigits: 2,\r\n        useGrouping: false\r\n      });\r\n    }\r\n\r\n    function nextItem() {\r\n      i = i + 1;\r\n      i = i % arr.length;\r\n      return {\r\n        ix: i,\r\n        data: arr[i]\r\n      }\r\n    }\r\n\r\n    function prevItem() {\r\n      if (i <= 0) { // i would become 0\r\n        i = arr.length; // so put it at the other end of the array\r\n      }\r\n      i = i - 1; // decrease by one\r\n      return {\r\n        ix: i,\r\n        data: arr[i]\r\n      }\r\n    }\r\n\r\n    document.getElementById('btn-tour-left').addEventListener('click', (e) => {\r\n      let prev = prevItem();\r\n      if(typeof prev.data === 'undefined') return;\r\n\r\n      TWER.tourInProgress = true;\r\n      let prevData = prev.data;\r\n      let idx = prev.ix + 1;\r\n      let tourPopUpMarker = prevData.showPopUp;\r\n      let advancedSettingsMarker = prevData.advanced_settings;\r\n\r\n      console.log(tourTextLabel.length);\r\n      if(!mainTourData.tourLabelMarker && tourTextLabel.length > 0){\r\n        tourTextLabel[0].style.display = 'none';\r\n      }\r\n\r\n      if (typeof tourNumberContainer[0] !== 'undefined') {\r\n        tourNumberContainer[0].classList.add('with-number');\r\n        tourNumber[0].innerHTML = twerStrInt(idx) + '/' + twerStrInt(countedTour);\r\n\r\n        if (mainTourData.tourLabelMarker) {\r\n          tourNumberLabel[0].innerHTML = prevData.title;\r\n        }\r\n      }\r\n\r\n      if (mainTourData.tourType === 'jump') {\r\n        TWER.map.jumpTo({\r\n          center: [prevData.geo.lang, prevData.geo.lat],\r\n          zoom: prevData.zoom,\r\n          pitch: prevData.pitch,\r\n          bearing: prevData.bearing,\r\n          padding: {\r\n            top: prevData.tourOffsets.top,\r\n            bottom: prevData.tourOffsets.bottom,\r\n            left: prevData.tourOffsets.left,\r\n            right: prevData.tourOffsets.right\r\n          },\r\n        });\r\n\r\n      } else if (mainTourData.tourType === 'fly') {\r\n        TWER.map.flyTo({\r\n          center: [prevData.geo.lang, prevData.geo.lat],\r\n          zoom: prevData.zoom,\r\n          speed: parseFloat(prevData.flySpeed),\r\n          curve: parseFloat(prevData.flyCurve),\r\n          pitch: prevData.pitch,\r\n          bearing: prevData.bearing,\r\n          padding: {\r\n            top: prevData.tourOffsets.top,\r\n            bottom: prevData.tourOffsets.bottom,\r\n            left: prevData.tourOffsets.left,\r\n            right: prevData.tourOffsets.right\r\n          },\r\n        });\r\n      }\r\n\r\n\r\n      // If enable tourPopUpGlobal popups\r\n      if(tourPopUpGlobal) {\r\n\r\n\r\n        if(!advancedSettingsMarker || tourPopUpMarker) {\r\n          // Close all popups except current popup\r\n          TWER.closePopups([], {\r\n            except: [prevData.id]\r\n          });\r\n        } else {\r\n          // Close all popups\r\n          TWER.closePopups();\r\n        }\r\n\r\n\r\n        if( !advancedSettingsMarker || (advancedSettingsMarker && tourPopUpMarker)) {\r\n          // Open current popup with disable toggle\r\n          let event = {};\r\n          let coords = JSON.parse(prevData.geo.str);\r\n          event.target = document.getElementById(`twer-popup-id-${prevData.id}`);\r\n\r\n\r\n\r\n          TWER.openPopup(event, coords, {\r\n            toggle: false\r\n          });\r\n        }\r\n      } else {\r\n\r\n        if(advancedSettingsMarker && tourPopUpMarker) {\r\n          // Close all popups except current popup\r\n          TWER.closePopups([], {\r\n            except: [prevData.id]\r\n          });\r\n\r\n          // Open current popup with disable toggle\r\n          let event = {};\r\n          let coords = JSON.parse(prevData.geo.str);\r\n          event.target = document.getElementById(`twer-popup-id-${prevData.id}`);\r\n\r\n          TWER.openPopup(event, coords, {\r\n            toggle: false\r\n          });\r\n        } else {\r\n          // Close all popups if global tour popup disabled\r\n          TWER.closePopups();\r\n        }\r\n      }\r\n\r\n\r\n    });\r\n\r\n    document.getElementById('btn-tour-right').addEventListener('click', (e) => {\r\n      let next = nextItem();\r\n      if(typeof next.data === 'undefined') return;\r\n      TWER.tourInProgress = true;\r\n      // the e here is the event itself\r\n      let nextData = next.data;\r\n      let idx = next.ix + 1;\r\n      let tourPopUpMarker = nextData.showPopUp;\r\n      let advancedSettingsMarker = nextData.advanced_settings;\r\n\r\n\r\n      if(!mainTourData.tourLabelMarker && tourTextLabel.length > 0){\r\n        tourTextLabel[0].style.display = 'none';\r\n      }\r\n\r\n\r\n      if (typeof tourNumberContainer[0] !== 'undefined') {\r\n        tourNumberContainer[0].classList.add('with-number');\r\n        tourNumber[0].innerHTML = twerStrInt(idx) + '/' + twerStrInt(countedTour);\r\n        if (mainTourData.tourLabelMarker) {\r\n          tourNumberLabel[0].innerHTML = nextData.title;\r\n        }\r\n      }\r\n\r\n      if (mainTourData.tourType === 'jump') {\r\n        TWER.map.jumpTo({\r\n          center: [nextData.geo.lang, nextData.geo.lat],\r\n          zoom: nextData.zoom,\r\n          pitch: nextData.pitch,\r\n          bearing: nextData.bearing,\r\n          padding: {\r\n            top: nextData.tourOffsets.top,\r\n            bottom: nextData.tourOffsets.bottom,\r\n            left: nextData.tourOffsets.left,\r\n            right: nextData.tourOffsets.right\r\n          },\r\n        });\r\n\r\n      } else if (mainTourData.tourType === 'fly') {\r\n        TWER.map.flyTo({\r\n          center: [\r\n            nextData.geo.lang,\r\n            nextData.geo.lat\r\n          ],\r\n          padding: {\r\n            top: nextData.tourOffsets.top,\r\n            bottom: nextData.tourOffsets.bottom,\r\n            left: nextData.tourOffsets.left,\r\n            right: nextData.tourOffsets.right\r\n          },\r\n          zoom: nextData.zoom,\r\n          speed: parseFloat(nextData.flySpeed),\r\n          curve: parseFloat(nextData.flyCurve),\r\n          pitch: nextData.pitch,\r\n          bearing: nextData.bearing\r\n        });\r\n      }\r\n\r\n      // If enable tourPopUpGlobal popups\r\n      if(tourPopUpGlobal) {\r\n\r\n        if(!advancedSettingsMarker || tourPopUpMarker) {\r\n          // Close all popups except current popup\r\n          TWER.closePopups([], {\r\n            except: [nextData.id]\r\n          });\r\n        } else {\r\n          // Close all popups\r\n          TWER.closePopups();\r\n        }\r\n\r\n\r\n        if( !advancedSettingsMarker || (advancedSettingsMarker && tourPopUpMarker)) {\r\n          // Open current popup with disable toggle popups\r\n          let event = {};\r\n          let coords = JSON.parse(nextData.geo.str);\r\n          event.target = document.getElementById(`twer-popup-id-${nextData.id}`);\r\n\r\n\r\n          TWER.openPopup(event, coords, {\r\n            toggle: false\r\n          });\r\n        }\r\n      } else {\r\n        if(advancedSettingsMarker && tourPopUpMarker) {\r\n          // Close all popups except current popup\r\n          TWER.closePopups([], {\r\n            except: [nextData.id]\r\n          });\r\n\r\n\r\n          // Open current popup with disable toggle popups\r\n          let event = {};\r\n          let coords = JSON.parse(nextData.geo.str);\r\n          event.target = document.getElementById(`twer-popup-id-${nextData.id}`);\r\n\r\n\r\n          TWER.openPopup(event, coords, {\r\n            toggle: false\r\n          });\r\n        } else {\r\n          // Close all popups if global tour popup disabled\r\n          TWER.closePopups();\r\n        }\r\n      }\r\n\r\n\r\n\r\n    });\r\n\r\n  }\r\n}\r\n\r\nexport default TWER_TOUR;\r\n\r\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","'use strict';\r\n\r\nimport TWER_PRELOADER from './modules/preloader';\r\nimport TWER_GALLERY from './modules/gallery';\r\nimport TWER_CATEGORY_SWITCHER from './modules/category-switcher';\r\nimport TWER_ADDONS from './modules/addons';\r\nimport TWER_TOUR from './modules/tour';\r\nimport TwerLayers from './modules/layers';\r\nimport TrewelerGallery from './modules/gallery';\r\n\r\nwindow.TWER = {\r\n  clusterDataDump: [],\r\n  storeLocatorDataDump: [],\r\n  clusterData: {},\r\n  clusterDataSources: {},\r\n  routeData: {},\r\n  map: {},\r\n  popups: [],\r\n  globalClusterStatus: true,\r\n  data: {},\r\n  clusterColor: '#4b7715',\r\n  markersDataDump: [],\r\n  markers: [],\r\n  markersIgnoredClusters: [],\r\n  boundsData: [],\r\n  fitBounds: true,\r\n  animationDelayClose: 400,\r\n  animationDelayOpen: 250,\r\n  tour: false,\r\n  tourAutoRun: false,\r\n  tourInProgress: false,\r\n  geolocateControl: false,\r\n  ajaxLoading: false,\r\n  currentMapPageId: 0,\r\n  allMapMarkers: [],\r\n\r\n  markerLocation : false,\r\n\r\n  markerLocationProps : {\r\n    id: 0,\r\n    marker_style: 'default',\r\n    point_halo_color: '#fff',\r\n    point_halo_opacity: 0.5,\r\n    point_color: '#4b7715',\r\n    custom_marker_img: '',\r\n    cursor: 'pointer',\r\n    anchor: 'center'\r\n  },\r\n\r\n  initAllMapMarkers: function() {\r\n    const data = new FormData();\r\n\r\n    data.append( 'action', 'twer_loadMapMarkers' );\r\n    data.append( 'mapId', this.currentMapPageId);\r\n\r\n    fetch(treweler_params.ajax_url, {\r\n      method: \"POST\",\r\n      credentials: 'same-origin',\r\n      body: data\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      if (data) {\r\n        this.allMapMarkers = data;\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.error(error);\r\n    });\r\n\r\n  },\r\n\r\n  initMap: function(data) {\r\n\r\n    // Set data global\r\n    TWER.data = data;\r\n\r\n    TWER.clusterDataSources = TWER.clusterData.features;\r\n\r\n    this.currentMapPageId = data.mapPageId;\r\n\r\n    //this.initAllMapMarkers();\r\n\r\n    // Parse access token from php\r\n    mapboxgl.accessToken = data.accessToken;\r\n\r\n    // Set global cluster variable\r\n    TWER.clusterColor = data.clusterColor;\r\n    TWER.allowCluster = data.allowCluster;\r\n\r\n    const params = {\r\n      container: 'twer-map',\r\n      style: data.style,\r\n      center: data.center,\r\n      minZoom: data.minZoom,\r\n      maxZoom: data.maxZoom,\r\n      zoom: data.zoom,\r\n      bearing: data.iniBearing,\r\n      pitch: data.iniPitch,\r\n      maxPitch: data.maxPitch,\r\n      minPitch: data.minPitch,\r\n      attributionControl: false,\r\n      logoPosition: data.wordmarkPosition,\r\n      projection: {\r\n        name: data.projection\r\n      },\r\n      fadeDuration: 0 // Disable fade animation for clusters\r\n    };\r\n\r\n    // Add Restrict map panning to an area\r\n    if (data.restrictPanning) {\r\n      params.maxBounds = data.restrictPanningData;\r\n    }\r\n\r\n    // Init map by values from php\r\n    TWER.map = new mapboxgl.Map(params);\r\n\r\n\r\n    new TwerLayers(data);\r\n    TWER.map.on('style.load', () => {\r\n      TWER.map.setFog({});\r\n      if(data.style === 'mapbox://styles/mapbox/standard-beta') {\r\n        if (data.mapLightPreset) {\r\n          TWER.map.setConfigProperty('basemap', 'lightPreset', data.mapLightPreset);\r\n        }\r\n      }\r\n\r\n    });\r\n\r\n    // Disables the \"drag to pan\" interaction.\r\n    if (data.disableDragPan) {\r\n      TWER.map.dragPan.disable();\r\n    }\r\n\r\n    // Add Attribution Compact Control param\r\n    TWER.map.addControl(new mapboxgl.AttributionControl({\r\n      compact: data.compactAttribution\r\n    }), data.attributionPosition);\r\n\r\n    // Languanges Config\r\n    if (data.mapLanguange !== 'browser') {\r\n      mapboxgl.setRTLTextPlugin('https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js');\r\n      TWER.map.addControl(new MapboxLanguage({\r\n        defaultLanguage: data.mapLanguange\r\n      }));\r\n\r\n      setTimeout(function() {\r\n        TWER.map.setLayoutProperty('country-label', 'text-field', [\r\n          'get',\r\n          'name_' + data.mapLanguange\r\n        ]);\r\n      }, 200);\r\n    }\r\n\r\n    if (!data.allowBearing) {\r\n      TWER.map.dragRotate.disable();\r\n      TWER.map.touchZoomRotate.disableRotation();\r\n    }\r\n\r\n    // Add additional controls (parse data from php)\r\n    if (data.scaleControl) {\r\n      TWER.map.addControl(new mapboxgl.ScaleControl({\r\n        maxWidth: 100,\r\n        unit: data.scaleControlUnit ? data.scaleControlUnit : 'imperial'\r\n      }), data.scaleControlPosition);\r\n    }\r\n\r\n    // Add fullscreen control button\r\n    if (data.fullscreenControl) {\r\n      TWER.map.addControl(new mapboxgl.FullscreenControl(), data.fullscreenControlPosition);\r\n    }\r\n\r\n    // Add search control field\r\n    if (data.searchControl) {\r\n      TWER.MapboxGeocoder = new MapboxGeocoder({\r\n        accessToken: mapboxgl.accessToken,\r\n        zoom: 14,\r\n        placeholder: data.searchControlPlaceholder,\r\n        mapboxgl: mapboxgl,\r\n        marker: false\r\n      });\r\n      TWER.map.addControl(TWER.MapboxGeocoder, data.searchControlPosition);\r\n    }\r\n\r\n    // Add zoom controls for map\r\n    if (data.zoomControl) {\r\n      TWER.map.addControl(new mapboxgl.NavigationControl(), data.zoomControlPosition);\r\n    }\r\n\r\n\r\n\r\n    // Enable/disable shortcode scrollzoom\r\n    if (!data.scrollZoom) {\r\n      TWER.map.scrollZoom.disable();\r\n    }\r\n\r\n    //if (!data.allowStoreLocator) {\r\n    // Call another handlers after main init method\r\n    TWER.onLoadMap();\r\n    if (data.allowCluster) {\r\n      TWER.clustersHandlers();\r\n    }\r\n    TWER.onClickMap();\r\n    //}\r\n\r\n    // Init fitbounds settings\r\n    TWER.boundsData = TWER.map.getBounds().toArray();\r\n    TWER.fitBounds = data.fitBounds;\r\n\r\n    TWER.map.setRenderWorldCopies(data.worldCopy);\r\n\r\n    // Tour logic\r\n    new TWER_TOUR(data);\r\n\r\n    // Call categories switcher handlers\r\n    new TWER_CATEGORY_SWITCHER();\r\n\r\n    // Addons code\r\n    new TWER_ADDONS();\r\n\r\n    // Gallery\r\n    new TrewelerGallery();\r\n\r\n    // Call preloader handlers\r\n    new TWER_PRELOADER();\r\n\r\n\r\n    jQuery(document).on('click', '.js-twer-close-popup-btn', e => {\r\n      e.preventDefault();\r\n\r\n      const match = e.target.closest('.js-twer-popup').classList.value.match(/twer-popup-id-\\d+/gm);\r\n      const matchedId = match[0] !== undefined ? parseInt(match[0].replace(/^\\D+/g, '')) : '';\r\n\r\n      if(matchedId !== '') {\r\n        TWER.closePopups([matchedId]);\r\n      }\r\n    });\r\n  },\r\n\r\n\r\n\r\n  onLoadMap: function() {\r\n    TWER.map.on('load', async () => {\r\n\r\n\r\n      // Add overlay for map\r\n      const alpha = TWER.data.bgOverlay.replace(/^.*,(.+)\\)/, '$1');\r\n      const isAlpha = isNaN(parseFloat(alpha)) ? 1 : parseFloat(alpha);\r\n\r\n      if (TWER.data.bgOverlay && isAlpha !== 0) {\r\n        TWER.map.addLayer({\r\n          id: 'bg-layer',\r\n          type: 'background',\r\n          paint: {\r\n            'background-color': TWER.data.bgOverlay\r\n          }\r\n        });\r\n      }\r\n\r\n      if (!TWER.isEmpty(TWER.clusterData)) {\r\n\r\n\r\n        // Add source data\r\n        TWER.map.addSource('locations', {\r\n          type: 'geojson',\r\n          data: TWER.clusterData,\r\n          generateId: true,\r\n          cluster: true,\r\n          clusterMaxZoom: TWER.data.clusterMaxZoom,\r\n          clusterRadius: 50,\r\n        });\r\n\r\n        // Add clusters layer\r\n        TWER.map.addLayer({\r\n          id: 'clusters',\r\n          type: 'circle',\r\n          source: 'locations',\r\n          filter: ['has', 'point_count'],\r\n          paint: {\r\n            'circle-color': '#fff',\r\n            'circle-radius': 40,\r\n            'circle-stroke-color': '#ac2929',\r\n            'circle-opacity': 0,\r\n            'circle-stroke-opacity': 0,\r\n          }\r\n        });\r\n\r\n        // Add numbers for clusters\r\n        TWER.map.addLayer({\r\n          id: 'markerPnt',\r\n          type: 'symbol',\r\n          source: 'locations',\r\n          filter: ['has', 'point_count'],\r\n          layout: {\r\n            'text-field': '{point_count_abbreviated}',\r\n            'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],\r\n            'text-size': 0\r\n          }\r\n        });\r\n\r\n        // Add default layer points (aka markers in code)\r\n        TWER.map.addLayer({\r\n          id: 'unclustered-point',\r\n          type: 'circle',\r\n          source: 'locations',\r\n          filter: ['!', ['has', 'point_count']],\r\n          paint: {\r\n            'circle-color': '#22b719',\r\n            'circle-radius': 15,\r\n            'circle-stroke-width': 1,\r\n            'circle-stroke-color': '#fff',\r\n            'circle-stroke-opacity': 0,\r\n            'circle-opacity': 0\r\n          },\r\n        });\r\n\r\n        // Add static markers to map\r\n        if (TWER.clusterData.features.length > 0) {\r\n          let i = 0;\r\n\r\n          const markersIdsRemoved = [];\r\n\r\n          for (const feature of TWER.clusterData.features) {\r\n            const marker = {};\r\n            const coords = feature.geometry.coordinates;\r\n            const props = feature.properties;\r\n            const desc = props?.description;\r\n\r\n\r\n            const markerElement = TWER.createNewMarker(props, coords, desc);\r\n\r\n            marker.element = new mapboxgl.Marker(markerElement).setLngLat(coords).addTo(TWER.map);\r\n            TWER.__afterCreateNewMarker(markerElement, props, coords);\r\n            marker.feature = feature;\r\n            marker.show = true;\r\n\r\n            // Remove marker from clusterData if it ignored cluster\r\n            if (!props.allowMarkerCluster && TWER.allowCluster) {\r\n              markersIdsRemoved.push(i);\r\n              // Push current markers to array\r\n              TWER.markersIgnoredClusters.push(marker);\r\n            } else {\r\n              // Push current markers to array\r\n              TWER.markers.push(marker);\r\n            }\r\n\r\n            i++;\r\n          }\r\n\r\n          if (markersIdsRemoved.length > 0) {\r\n            const indexSet = new Set(markersIdsRemoved);\r\n\r\n            let inClusterFeatures = [];\r\n            let outClusterFeatures = [];\r\n\r\n            TWER.clusterData.features.filter((value, i) => {\r\n              if(!indexSet.has(i)){\r\n                inClusterFeatures.push(value);\r\n              }  else {\r\n                outClusterFeatures.push(value);\r\n              }\r\n            });\r\n\r\n            TWER.clusterData.features = TWER.clusterData.features.filter((value, i) => !indexSet.has(i));\r\n            TWER.outClusterFeatures = outClusterFeatures;\r\n\r\n            TWER.map.getSource('locations').setData(TWER.clusterData);\r\n          }\r\n        }\r\n\r\n        let notClustersData = [];\r\n        let clustersData = [];\r\n        let viewPortMarkersData = [];\r\n        let markersInViewPort = [];\r\n        let clusters = [];\r\n\r\n        function markerExists(id, array) {\r\n          return array.some(function(marker) {\r\n            return marker.id === id;\r\n          });\r\n        }\r\n\r\n        TWER.map.on('render', () => {\r\n          if (!TWER.map.isSourceLoaded('locations') || !TWER.allowCluster) return;\r\n\r\n\r\n          //console.log('render TW');\r\n          notClustersData = [];\r\n          clustersData = [];\r\n          viewPortMarkersData = [];\r\n          markersInViewPort = [];\r\n\r\n          const viewPortMarkers = TWER.map.querySourceFeatures('locations', {\r\n            sourceLayer: ['unclustered-point']\r\n          });\r\n          const featuresNotClusters = TWER.map.querySourceFeatures('locations', {\r\n            filter: ['!', ['has', 'point_count']],\r\n            sourceLayer: ['unclustered-point']\r\n          });\r\n          const featuresClusters = TWER.map.querySourceFeatures('locations', {\r\n            filter: ['has', 'point_count'],\r\n            sourceLayer: ['unclustered-point']\r\n          });\r\n\r\n          if (viewPortMarkers.length > 0) {\r\n            for (let i = 0; i < viewPortMarkers.length; i++) {\r\n              if (!markerExists(viewPortMarkers[i].id, viewPortMarkersData)) {\r\n                viewPortMarkersData.push(viewPortMarkers[i]);\r\n              }\r\n            }\r\n          }\r\n\r\n          if (featuresNotClusters.length > 0) {\r\n            for (let i = 0; i < featuresNotClusters.length; i++) {\r\n              if (!markerExists(featuresNotClusters[i].id, notClustersData)) {\r\n                notClustersData.push(featuresNotClusters[i]);\r\n              }\r\n            }\r\n          }\r\n\r\n          if (featuresClusters.length > 0) {\r\n            for (let i = 0; i < featuresClusters.length; i++) {\r\n              if (!markerExists(featuresClusters[i].id, clustersData)) {\r\n                clustersData.push(featuresClusters[i]);\r\n              }\r\n            }\r\n          }\r\n\r\n          // Detect if clusters show\r\n          if (clustersData.length !== 0 && TWER.markers.length > 0) {\r\n            //console.log('TW 1');\r\n            // Get only show in viewport static markers\r\n            for (let i = 0; i < TWER.markers.length; i++) {\r\n              if (TWER.map.getBounds().contains(TWER.markers[i].element.getLngLat())) {\r\n                markersInViewPort.push(TWER.markers[i]);\r\n              }\r\n            }\r\n\r\n\r\n\r\n\r\n            for (let i = 0; i < markersInViewPort.length; i++) {\r\n              let notClustersMarkersIds = [];\r\n              let viewPortMarkersIds = markersInViewPort[i].feature.properties.id;\r\n              for (let j = 0; j < notClustersData.length; j++) {\r\n                notClustersMarkersIds.push(notClustersData[j].properties.id);\r\n              }\r\n\r\n              if (notClustersMarkersIds.includes(viewPortMarkersIds)) {\r\n                  markersInViewPort[i].show = true;\r\n                  markersInViewPort[i].element._element.style.display = 'block';\r\n              } else {\r\n\r\n                // Trick if cluster enabled and we in tour progress\r\n                if (!TWER.tourInProgress) {\r\n                  TWER.closePopups([markersInViewPort[i].feature.properties.id]);\r\n                }\r\n\r\n\r\n                markersInViewPort[i].show = false;\r\n                markersInViewPort[i].element._element.style.display = 'none';\r\n\r\n              }\r\n            }\r\n\r\n            // Check if show only one cluster\r\n            const clustersDataLength = clustersData.length;\r\n            const clustersLength = clusters.length;\r\n            let onlyOneClusterFlag = false;\r\n\r\n            if (!onlyOneClusterFlag) {\r\n              const currentClustersIds = [];\r\n              for (let j = 0; j < clustersData.length; j++) {\r\n                currentClustersIds.push(clustersData[j].id);\r\n              }\r\n\r\n              if (clusters.length !== 0) {\r\n                const clustersIdsRemoved = [];\r\n                for (let i = 0; i < clusters.length; i++) {\r\n\r\n\r\n                  if (!currentClustersIds.includes(clusters[i].feature.id)) {\r\n                    clusters[i].feature = {};\r\n                    clusters[i].element.remove();\r\n                    clusters[i].show = false;\r\n                    clustersIdsRemoved.push(i);\r\n                  }\r\n                }\r\n\r\n                //for (let i = 0; i < clustersData.length; i++) {\r\n                //    for (let j = 0; j < clusters.length; j++) {\r\n                //      const counterCluster = parseInt(clusters[i].element.getElement().getElementsByClassName('marker__center')[0].textContent);\r\n                //      clustersData[i].properties.point_count\r\n                //    }\r\n                //}\r\n\r\n                const indexSet = new Set(clustersIdsRemoved);\r\n\r\n                clusters = clusters.filter((value, i) => !indexSet.has(i));\r\n              }\r\n\r\n\r\n\r\n              // Create and show clusters\r\n              for (let i = 0; i < clustersData.length; i++) {\r\n                let skipCluster = false;\r\n                if (clusters.length !== 0) {\r\n                  for (let j = 0; j < clusters.length; j++) {\r\n\r\n                    const counterCluster = parseInt(clusters[j].element.getElement().getElementsByClassName('marker__center')[0].textContent);\r\n//  &&\r\n                    if (clusters[j].feature.id === clustersData[i].id) {\r\n                      skipCluster = true;\r\n\r\n                      if(counterCluster !== clustersData[i].properties.point_count) {\r\n                        clusters[j].element.getElement().getElementsByClassName('marker__center')[0].textContent = clustersData[i].properties.point_count;\r\n                      }\r\n                     // console.log(clusters[j], clustersData[i])\r\n                    }\r\n\r\n\r\n                  }\r\n                }\r\n\r\n\r\n\r\n                if (skipCluster) continue;\r\n\r\n\r\n\r\n\r\n                const props = clustersData[i].properties;\r\n                const coords = clustersData[i].geometry.coordinates;\r\n\r\n\r\n                let clusterElement = TWER.createNewCluster(props);\r\n                let cluster = {};\r\n\r\n                cluster.element = new mapboxgl.Marker(clusterElement).setLngLat(coords).addTo(TWER.map);\r\n\r\n                //console.log(clusterElement, cluster);\r\n\r\n                cluster.feature = clustersData[i];\r\n                cluster.show = true;\r\n                clusters.push(cluster);\r\n              }\r\n            }\r\n\r\n            TWER.globalClusterStatus = true;\r\n          } else {\r\n\r\n            for (let i = 0; i < TWER.markers.length; i++) {\r\n              if(lodash.has(TWER.markers[i], 'insideStoreLocator')) {\r\n\r\n                if (TWER.markers[i].insideStoreLocator) {\r\n                  if (TWER.markers[i].show === false) {\r\n                    TWER.markers[i].show = true;\r\n                    TWER.markers[i].element._element.style.display = 'block';\r\n                  }\r\n\r\n                  if (TWER.markers[i].mustShowInCluster) {\r\n                    TWER.markers[i].element._element.style.display = 'block';\r\n                  }\r\n                }\r\n              } else {\r\n                if (TWER.markers[i].show === false) {\r\n                  TWER.markers[i].show = true;\r\n                  TWER.markers[i].element._element.style.display = 'block';\r\n                }\r\n              }\r\n\r\n            }\r\n\r\n\r\n            const clustersIdsRemoved1 = [];\r\n            for (let i = 0; i < clusters.length; i++) {\r\n              if (clusters[i].show === true) {\r\n                clusters[i].show = false;\r\n                clusters[i].feature = {};\r\n                clusters[i].element.remove();\r\n                clustersIdsRemoved1.push(i);\r\n              }\r\n            }\r\n            const indexSet1 = new Set(clustersIdsRemoved1);\r\n            clusters = clusters.filter((value, i) => !indexSet1.has(i));\r\n          }\r\n\r\n        });\r\n\r\n        TWER.map.on('zoom', (event) => {\r\n          if (typeof event.originalEvent !== 'undefined') {\r\n            TWER.tourInProgress = false;\r\n          }\r\n        });\r\n\r\n        // Fire events after `zoomend` event\r\n        TWER.map.on('zoomend', function(event) {\r\n          // Check if zoom change after mousewheel or controls buttons\r\n          if (typeof event.originalEvent !== 'undefined') {\r\n            document.querySelectorAll('.js-twer-popup').forEach(element => {\r\n              const match = element.classList.value.match(/twer-popup-id-\\d+/gm);\r\n\r\n              if (match[0]) {\r\n                const $marker = document.getElementById(match[0]);\r\n                if (!!!$marker) {\r\n                  TWER.closePopups();\r\n                }\r\n              }\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n\r\n      // Set start template for Store Locator Marker\r\n      if (TWER.data.storeLocatorMarkerTemplate) {\r\n        this.setMarkerStyle(TWER.data.storeLocatorMarkerTemplate);\r\n      }\r\n\r\n      // Add Store Locator Marker after map load\r\n      if (TWER.data.storeLocatorMarker ) {\r\n        let coords = TWER.data.center;\r\n        this.addMarker(this.markerLocationProps, coords);\r\n      }\r\n    });\r\n\r\n  },\r\n\r\n  addMarker: function(props, coords) {\r\n    const markerElement = this.createNewMarker1(props, coords, '');\r\n    this.markerLocation = new mapboxgl.Marker(markerElement).setLngLat(coords).addTo(TWER.map);\r\n  },\r\n\r\n\r\n  setMarkerStyle: function(props) {\r\n    this.markerLocationProps = {...this.markerLocationProps, ...JSON.parse(props)};\r\n  },\r\n\r\n  removeMarker: function() {\r\n    this.markerLocation.remove();\r\n  },\r\n\r\n  isMarker: function(target) {\r\n    let isMarker = false;\r\n\r\n    if(target.classList.contains('js-twer-marker') || target.classList.contains('treweler-marker') || target.closest('.js-twer-marker')?.classList.contains('js-twer-marker')) {\r\n      isMarker = true;\r\n    }\r\n    return isMarker;\r\n  },\r\n\r\n  isCluster : function(target) {\r\n    let isCluster = false;\r\n\r\n    if(target.classList.contains('marker__center') || target.classList.contains('marker__border') || target.closest('.mapboxgl-marker')?.classList.contains('treweler-cluster')) {\r\n      isCluster = true;\r\n    }\r\n    return isCluster;\r\n  },\r\n\r\n  onClickMap: function() {\r\n    TWER.map.on('click', (event) => {\r\n      if (event.originalEvent.target.classList.contains('mapboxgl-canvas')) {\r\n        TWER.closePopups();\r\n      }\r\n\r\n\r\n      if (TWER.data.storeLocatorMarker && !this.isMarker( event.originalEvent.target ) && !this.isCluster( event.originalEvent.target )) {\r\n        this.removeMarker();\r\n        this.addMarker(this.markerLocationProps, event.lngLat.wrap());\r\n      }\r\n\r\n      // Exist from tour if click on map\r\n      TWER.tourInProgress = false;\r\n\r\n\r\n      if(TWER.data.mapCenterOnClick && !this.isMarker(event.originalEvent.target) && !this.isCluster( event.originalEvent.target )) {\r\n        TWER.map.flyTo({\r\n          center: event.lngLat.wrap(),\r\n          essential: true,\r\n        });\r\n      }\r\n\r\n\r\n    });\r\n  },\r\n  onClickMapTour: function() {\r\n    document.getElementById('twer-map').addEventListener('click', event => {\r\n      const $element = event.target;\r\n\r\n      if (!!!$element.closest('.js-twer-popup') && !$element.classList.contains('js-twer-marker') && !!!$element.closest('.js-twer-marker')) {\r\n        TWER.closeTourPopup();\r\n      }\r\n    });\r\n  },\r\n\r\n  closeTourPopup: function() {\r\n\r\n    if (TWER.popups === undefined || TWER.popups.length === 0) return false;\r\n    TWER.popups.forEach((popup, index, arr) => {\r\n      if (popup._container) {\r\n        if (popup._container.classList.contains('twer-popup--AlwaysShow')) return false;\r\n        if (popup._container.classList.contains('twer-popup--show')) return false;\r\n        if (popup._container.classList.contains('twer-popup--OpenDefault') && parseInt(localStorage.getItem('toggleTourNeverRunning')) === 0) return false;\r\n\r\n        let $rootElement;\r\n\r\n        if (popup._container.classList.contains('js-twer-popup')) {\r\n          $rootElement = popup._container;\r\n        }\r\n        if (!!popup._container.closest('.js-twer-popup')) {\r\n          $rootElement = popup._container.closest('.js-twer-popup');\r\n        }\r\n\r\n        $rootElement.classList.remove('twer-popup--TourShow');\r\n        $rootElement.classList.remove('twer-popup--OpenDefault');\r\n\r\n        setTimeout(function() {\r\n          popup.remove();\r\n        }, 600); // ori 250\r\n\r\n        TWER.popups.splice(index, 1);\r\n\r\n      }\r\n    });\r\n    document.querySelectorAll('.js-twer-marker').forEach(element => {\r\n      element.classList.remove('open');\r\n    });\r\n  },\r\n  closePopups: function(ids = [], params = {}, ...args) {\r\n\r\n    if (TWER.popups === undefined || TWER.popups.length === 0) return false;\r\n\r\n    let exceptIds = [];\r\n\r\n    if (params.hasOwnProperty('except')) {\r\n      exceptIds = params.except;\r\n    }\r\n\r\n    TWER.popups.forEach((popup, index) => {\r\n\r\n      // Check if popup container exist and all it`s good\r\n      if (typeof popup._container !== 'undefined') {\r\n        if (popup._container.classList.contains('twer-popup--AlwaysShow')) return;\r\n        if (popup._container.classList.contains('twer-popup--TourShow')) return;\r\n\r\n        const popupId = parseInt(popup.options.metadata.id);\r\n\r\n        // Only close elements by ID else close all popups\r\n        let idsCloseStatus = false;\r\n        if (ids.length !== 0) {\r\n          for (let i = 0; i < ids.length; i++) {\r\n            if (ids[i] !== popupId) {\r\n              idsCloseStatus = true;\r\n            }\r\n          }\r\n        }\r\n\r\n        // Ignore close popups by exceptIds data else close all popups\r\n        let exceptIdsStatus = false;\r\n        exceptIds.forEach((exceptId) => {\r\n          if (popup._container.classList.contains(`twer-popup-id-${exceptId}`)) {\r\n            exceptIdsStatus = true;\r\n          }\r\n        });\r\n        if (exceptIdsStatus) return;\r\n        if (idsCloseStatus) return;\r\n\r\n        popup.removeClassName('twer-popup--show');\r\n        popup.removeClassName('twer-popup--OpenDefault');\r\n\r\n        // Set pause before remove popup\r\n        setTimeout(() => {\r\n          popup.remove();\r\n        }, TWER.animationDelayClose);\r\n\r\n        TWER.popups[index] = null;\r\n      }\r\n    });\r\n\r\n    // Remove all null values from array\r\n    TWER.popups = TWER.popups.filter(function(el) {\r\n      return el != null;\r\n    });\r\n\r\n    document.querySelectorAll('.js-twer-marker').forEach(element => {\r\n      element.classList.remove('open');\r\n    });\r\n  },\r\n\r\n  openPopup: function(event, coords, params = {}, ...args) {\r\n    const $element = event.target;\r\n    const $popup = document.getElementsByClassName($element.getAttribute('id'))[0];\r\n\r\n    if ($popup !== undefined) return false;\r\n\r\n    let togglePopups = true;\r\n    if (params.hasOwnProperty('toggle')) {\r\n      togglePopups = params.toggle;\r\n    }\r\n\r\n    if (togglePopups) {\r\n      // Before open popup, close siblings popups\r\n      TWER.closePopups();\r\n      TWER.closeTourPopup();\r\n    }\r\n\r\n    if (!$element.classList.contains('open') && ($element.classList.contains('js-twer-marker') || !!$element.closest('.js-twer-marker'))) {\r\n      let $template, $rootElement;\r\n      const range = document.createRange();\r\n\r\n      if ($element.classList.contains('js-twer-marker')) {\r\n        $rootElement = $element;\r\n        $template = $rootElement.getElementsByTagName('template')[0];\r\n      }\r\n      if (!!$element.closest('.js-twer-marker')) {\r\n        $rootElement = $element.closest('.js-twer-marker');\r\n        $template = $rootElement.getElementsByTagName('template')[0];\r\n      }\r\n\r\n      if (!!$template) {\r\n        const someDiv = document.createElement('DIV');\r\n        const documentFragment = range.createContextualFragment($template.innerHTML);\r\n        someDiv.appendChild(documentFragment);\r\n        const classLists = someDiv.getElementsByClassName('js-twer-popup__wrap')[0].dataset.class;\r\n        const id = someDiv.getElementsByClassName('js-twer-popup__wrap')[0].dataset.idpopup;\r\n        const borderRadius = someDiv.getElementsByClassName('js-twer-popup__wrap')[0].dataset.borderradius;\r\n        const minwidthalternate = someDiv.getElementsByClassName('js-twer-popup__wrap')[0].dataset.minwidthalternate;\r\n\r\n        someDiv.getElementsByClassName('js-twer-popup__wrap')[0].removeAttribute('data-class');\r\n        someDiv.getElementsByClassName('js-twer-popup__wrap')[0].removeAttribute('data-idpopup');\r\n        someDiv.getElementsByClassName('js-twer-popup__wrap')[0].removeAttribute('data-borderradius');\r\n        someDiv.getElementsByClassName('js-twer-popup__wrap')[0].removeAttribute('data-minwidthalternate');\r\n\r\n        const templateHtml = someDiv.innerHTML;\r\n\r\n        $rootElement.classList.add('open');\r\n\r\n        let offsetPopup = 14;\r\n\r\n        if ($rootElement.classList.contains('twer-marker-type--balloon-default')) {\r\n          offsetPopup = parseInt($rootElement.getElementsByClassName('marker-svg')[0].dataset.height) + 3;\r\n        }\r\n        if ($rootElement.classList.contains('twer-marker-type--triangle-default')) {\r\n          offsetPopup = parseInt($rootElement.getElementsByClassName('marker-triangle')[0].dataset.height) + 10;\r\n          offsetPopup = parseInt(offsetPopup / 2);\r\n        }\r\n\r\n        // Show popup after marker click\r\n        const popup = new mapboxgl.Popup({\r\n          closeButton: false,\r\n          className: classLists,\r\n          closeOnClick: false,\r\n          focusAfterOpen: false,\r\n          anchor: 'bottom',\r\n          offset: offsetPopup,\r\n          metadata: {\r\n            id: id\r\n          }\r\n        }).setLngLat(coords).setHTML(templateHtml).setMaxWidth('none').addTo(TWER.map);\r\n\r\n        popup._content.style.borderRadius = `${borderRadius}px`;\r\n\r\n        if (minwidthalternate.length > 0) {\r\n          const currentStyleAttrVal = popup._content.closest('.js-twer-popup').getAttribute('style');\r\n          popup._content.closest('.js-twer-popup').setAttribute('style', `min-width:${minwidthalternate}px !important;${currentStyleAttrVal}`);\r\n        }\r\n\r\n        setTimeout(function() {\r\n          popup.addClassName('twer-popup--show');\r\n        }, TWER.animationDelayOpen);\r\n\r\n        TWER.popups.push(popup);\r\n      }\r\n\r\n    }\r\n\r\n    document.activeElement.blur();\r\n\r\n    jQuery( window.wp.mediaelement.initialize );\r\n  },\r\n  clustersHandlers: function() {\r\n\r\n    TWER.map.on('click', 'clusters', (event) => {\r\n      TWER.globalClusterStatus = true;\r\n\r\n      const features = TWER.map.queryRenderedFeatures(event.point, {\r\n        layers: ['clusters']\r\n      });\r\n\r\n      const clusterId = features[0].properties.cluster_id;\r\n\r\n      TWER.map.getSource('locations').getClusterExpansionZoom(clusterId, (err, zoom) => {\r\n          if (err) return;\r\n\r\n          TWER.map.easeTo({\r\n            center: features[0].geometry.coordinates,\r\n            zoom: zoom + 0.5\r\n          });\r\n        }\r\n      );\r\n\r\n    });\r\n\r\n    TWER.map.on('mouseenter', 'clusters', () => {\r\n      TWER.map.getCanvas().style.cursor = 'pointer';\r\n    });\r\n\r\n    TWER.map.on('mouseleave', 'clusters', () => {\r\n      TWER.map.getCanvas().style.cursor = '';\r\n    });\r\n  },\r\n\r\n  hex2rgba: function(hex, opacity) {\r\n    hex = hex.replace('#', '');\r\n    const r = parseInt(hex.substring(0, 2), 16);\r\n    const g = parseInt(hex.substring(2, 4), 16);\r\n    const b = parseInt(hex.substring(4, 6), 16);\r\n\r\n    return `rgba(${r},${g},${b},${opacity})`;\r\n  },\r\n  isEmpty: function(obj) {\r\n    for (let prop in obj) {\r\n      if (obj.hasOwnProperty(prop)) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return JSON.stringify(obj) === JSON.stringify({});\r\n  },\r\n  createNewCluster: function(props) {\r\n    const clusterElement = document.createElement('div');\r\n    clusterElement.innerHTML = `<div class=\"treweler-marker-cluster\"><div class=\"marker marker--cluster\" >\r\n                             <div class=\"marker-wrap\">\r\n                             <div class=\"marker__shadow\" style=\"border-color:${TWER.hex2rgba(TWER.clusterColor, 0.1)}\">\r\n                             <div class=\"marker__border\" style=\"border-color:${TWER.hex2rgba(TWER.clusterColor, 0.4)}\">\r\n                             <div class=\"marker__center\" style=\"background-color:${TWER.clusterColor};\">${props.point_count}</div>\r\n                             </div>\r\n                             </div>\r\n                             </div>\r\n                             </div></div>`;\r\n    clusterElement.classList.add('treweler-cluster');\r\n    clusterElement.classList.add('trew-cluster-id-' + props.cluster_id);\r\n\r\n    return clusterElement;\r\n  },\r\n  createNewMarker1: function(props, coords, desc) {\r\n\r\n    const markerElement = document.createElement('div');\r\n\r\n    if (props.marker_style === 'default') {\r\n      markerElement.innerHTML = `<div class=\"treweler-marker\"><div class=\"marker\">\r\n                 <div class=\"marker-wrap\">\r\n                 <div class=\"marker__shadow\" style=\"background-color:${TWER.hex2rgba(props.point_halo_color, props.point_halo_opacity)}\">\r\n                 <div class=\"marker__border\" style=\"border-color:${props.point_color};\">\r\n                 <div class=\"marker__center\"></div>\r\n                 </div>\r\n                 </div>\r\n                 </div>\r\n                 </div></div>`;\r\n    } else if ('dot-default' === props.marker_style) {\r\n      let iconHtml = '';\r\n      if (props.dot_icon_picker.length > 0 && props.dot_icon_show > 0) {\r\n        iconHtml = `<span class=\"marker-dot__icon material-icons material-icons--reset\" style=\"color:${props.dot_icon.color};font-size:${props.dot_icon.size}px;\">${props.dot_icon_picker}</span>`;\r\n      }\r\n\r\n      markerElement.innerHTML = `<div class=\"treweler-marker\" style=\"width:${props.dot.size}px;height:${props.dot.size}px;border-radius:${props.dot_corner_radius.size}${props.dot_corner_radius.units};border:${props.dot_border.size}px solid ${props.dot_border.color};background-color:${props.dot.color};\">${iconHtml}</div>`;\r\n    } else if ('triangle-default' === props.marker_style) {\r\n      const styleTriangle = `\r\n                        border-right-width:${props.triangle_width / 2}px;\r\n                        border-left-width:${props.triangle_width / 2}px;\r\n                        border-bottom-width: ${props.triangle_height}px;\r\n                        border-bottom-color: ${props.triangle_color};\r\n                        `;\r\n      markerElement.innerHTML = `<div data-height=\"${props.triangle_height}\" class=\"treweler-marker marker-triangle\" style=\"${styleTriangle}\"></div>`;\r\n    } else if ('balloon-default' === props.marker_style) {\r\n\r\n      const realMarkerSizeBalloon = props.balloon.size + (props.balloon_border.size + props.balloon_border.size);\r\n      const x = ((realMarkerSizeBalloon + realMarkerSizeBalloon - Math.sqrt(Math.pow(realMarkerSizeBalloon, 2) + Math.pow(realMarkerSizeBalloon, 2))) * (Math.sqrt(2) - 1) / 2);\r\n\r\n      let styleBalloon = `\r\n                        background-color: ${props.balloon.color};    \r\n                        border: ${props.balloon_border.size}px solid ${props.balloon_border.color};\r\n                        bottom:${x + x}px;                        \r\n                        width: ${props.balloon.size}px;\r\n                        height: ${props.balloon.size}px;`;\r\n\r\n      let styleBalloonDot = `\r\n                        width:${props.balloon_dot.size}px;\r\n                        height:${props.balloon_dot.size}px;\r\n                        margin-left:${(props.balloon_dot.size / 2) * -1}px;\r\n                        margin-top:${(props.balloon_dot.size / 2) * -1}px;\r\n                        background-color:${props.balloon_dot.color};\r\n                        `;\r\n\r\n      let iconHtml = '';\r\n      if (props.balloon_icon_picker.length > 0 && props.balloon_icon_show > 0) {\r\n        iconHtml = `<span class=\"marker-balloon__icon material-icons material-icons--reset\" style=\"color:${props.balloon_icon.color};font-size:${props.balloon_icon.size}px;\">${props.balloon_icon_picker}</span>`;\r\n      }\r\n\r\n      markerElement.innerHTML = `<div data-width=\"${props.balloon.size}\" data-height=\"${realMarkerSizeBalloon + x + x}\" class=\"treweler-marker marker-svg\"><div class=\"marker-balloon\" style=\"${styleBalloon}\"><div class=\"marker-balloon__dot\" style=\"${styleBalloonDot}\">${iconHtml}</div></div></div>`;\r\n      props.anchor = 'bottom';\r\n    } else if ('custom' === props.marker_style) {\r\n      const size = props.custom_marker_size_default !== '' ? props.custom_marker_size_default.split(';') : '42;42'.split(';');\r\n      markerElement.className = 'treweler-marker icon';\r\n      markerElement.style.backgroundImage = `url('${props.custom_marker_img}')`;\r\n      markerElement.style.backgroundSize = 'contain';\r\n      markerElement.style.backgroundRepeat = 'no-repeat';\r\n      markerElement.style.backgroundPosition = 'center center';\r\n      const width = (parseInt(size[1]) <= 42 ? (parseInt(size[1]) % 2 === 0 ? parseInt(size[1]) : parseInt(size[1]) + 1) : 42);\r\n      const height = (parseInt(size[0]) <= 42 ? (parseInt(size[0]) % 2 === 0 ? parseInt(size[0]) : parseInt(size[0]) + 1) : 42);\r\n      const finalWidth = parseInt(props.custom_marker_size) > 1 ? parseInt(props.custom_marker_size) : width;\r\n      const finalHeight = parseInt(props.custom_marker_size) > 1 ? parseInt(props.custom_marker_size) : height;\r\n      markerElement.style.width = `${finalWidth}px`;\r\n      markerElement.style.height = `${finalHeight}px`;\r\n      props.anchor = props.custom_marker_position;\r\n    } else {\r\n      markerElement.innerHTML = `<div class=\"treweler-marker\"><div class=\"marker\">\r\n                 <div class=\"marker-wrap\">\r\n                 <div class=\"marker__shadow\" style=\"background-color:${TWER.hex2rgba(props.point_halo_color, props.point_halo_opacity)}\">\r\n                 <div class=\"marker__border\" style=\"border-color:${props.point_color};\">\r\n                 <div class=\"marker__center\"></div>\r\n                 </div>\r\n                 </div>\r\n                 </div>\r\n                 </div></div>`;\r\n      props.anchor = 'center';\r\n    }\r\n\r\n    markerElement.classList.add(`js-twer-marker`);\r\n\r\n    markerElement.setAttribute('id', `twer-popup-id-${props.id}`);\r\n\r\n    // Add marker style class\r\n    markerElement.classList.add(`twer-cursor-${props.cursor}`);\r\n\r\n    // Add type of marker\r\n    markerElement.classList.add(`twer-marker-type--${props.marker_style}`);\r\n\r\n    return {\r\n      element: markerElement,\r\n      anchor: props.anchor\r\n    };\r\n  },\r\n\r\n  createNewMarker: function(props, coords, desc) {\r\n    let showPopup = true;\r\n    if (props.hasOwnProperty('showPopup')) {\r\n      showPopup = props.showPopup;\r\n    }\r\n\r\n\r\n    const markerElement = document.createElement('div');\r\n\r\n    let tourIndexNumberHTML = ``\r\n    if(props.tourIndexNumber !== '') {\r\n      const styles = [];\r\n      const tourNumberFontColor = TWER.data.tourNumberSettings.fontColor;\r\n      const tourNumberFontSize = TWER.data.tourNumberSettings.fontSize;\r\n      const tourNumberFontWeight = TWER.data.tourNumberSettings.fontWeight;\r\n\r\n      const tourNumberOffsetTop = TWER.data.tourNumberSettings.offset.top;\r\n      const tourNumberOffsetBottom = TWER.data.tourNumberSettings.offset.bottom;\r\n      const tourNumberOffsetLeft = TWER.data.tourNumberSettings.offset.left;\r\n      const tourNumberOffsetRight = TWER.data.tourNumberSettings.offset.right;\r\n\r\n\r\n\r\n      styles.push(`color:${tourNumberFontColor};`);\r\n      styles.push(`font-size:${tourNumberFontSize}px;`);\r\n      styles.push(`font-weight:${tourNumberFontWeight};`);\r\n\r\n      styles.push(`padding-top:${tourNumberOffsetTop}px;`);\r\n      styles.push(`padding-bottom:${tourNumberOffsetBottom}px;`);\r\n      styles.push(`padding-left:${tourNumberOffsetLeft}px;`);\r\n      styles.push(`padding-right:${tourNumberOffsetRight}px;`);\r\n\r\n      tourIndexNumberHTML = `<div class=\"twer-tour-index-number\" style=\"${styles.join('')}\">${props.tourIndexNumber}</div>`\r\n    }\r\n\r\n    if (props.icon === '' || props.icon === undefined) {\r\n      if (props.type === 'default') {\r\n        markerElement.innerHTML = `${tourIndexNumberHTML}<div class=\"treweler-marker\"><div class=\"marker\">\r\n                 <div class=\"marker-wrap\">\r\n                 <div class=\"marker__shadow\" style=\"background-color:${TWER.hex2rgba(props.halo_color, props.halo_opacity)}\">\r\n                 <div class=\"marker__border\" style=\"border-color:${props.color};\">\r\n                 <div class=\"marker__center\"></div>\r\n                 </div>\r\n                 </div>\r\n                 </div>\r\n                 </div></div>`;\r\n      } else if ('dot-default' === props.type) {\r\n        let iconHtml = '';\r\n        if (props.dot_icon.length > 0 && props.dot_icon_show > 0) {\r\n          iconHtml = `<span class=\"marker-dot__icon material-icons material-icons--reset\" style=\"color:${props.dot_icon_color};font-size:${props.dot_icon_size}px;\">${props.dot_icon}</span>`;\r\n        }\r\n\r\n        markerElement.innerHTML = `${tourIndexNumberHTML}<div class=\"treweler-marker\" style=\"width:${props.inner_size}px;height:${props.inner_size}px;border-radius:${props.corner_radius}${props.corner_radius_units};border:${props.border_width}px solid ${props.border_color};background-color:${props.dotcenter_color};\">${iconHtml}</div>`;\r\n      } else if ('triangle-default' === props.type) {\r\n        const styleTriangle = `\r\n                        border-right-width:${props.width_triangle / 2}px;\r\n                        border-left-width:${props.width_triangle / 2}px;\r\n                        border-bottom-width: ${props.height_triangle}px;\r\n                        border-bottom-color: ${props.color_triangle};\r\n                        `;\r\n        markerElement.innerHTML = `${tourIndexNumberHTML}<div data-height=\"${props.height_triangle}\" class=\"treweler-marker marker-triangle\" style=\"${styleTriangle}\"></div>`;\r\n      } else if ('balloon-default' === props.type) {\r\n\r\n        const realMarkerSizeBalloon = props.size_balloon + (props.border_width_balloon + props.border_width_balloon);\r\n        const x = ((realMarkerSizeBalloon + realMarkerSizeBalloon - Math.sqrt(Math.pow(realMarkerSizeBalloon, 2) + Math.pow(realMarkerSizeBalloon, 2))) * (Math.sqrt(2) - 1) / 2);\r\n\r\n        let styleBalloon = `\r\n                        background-color: ${props.color_balloon};    \r\n                        border: ${props.border_width_balloon}px solid ${props.border_color_balloon};\r\n                        bottom:${x + x}px;                        \r\n                        width: ${props.size_balloon}px;\r\n                        height: ${props.size_balloon}px;`;\r\n\r\n        let styleBalloonDot = `\r\n                        width:${props.dot_size}px;\r\n                        height:${props.dot_size}px;\r\n                        margin-left:${(props.dot_size / 2) * -1}px;\r\n                        margin-top:${(props.dot_size / 2) * -1}px;\r\n                        background-color:${props.dot_color};\r\n                        `;\r\n\r\n        let iconHtml = '';\r\n        if (props.balloon_icon.length > 0 && props.balloon_icon_show > 0) {\r\n          iconHtml = `<span class=\"marker-balloon__icon material-icons material-icons--reset\" style=\"color:${props.balloon_icon_color};font-size:${props.balloon_icon_size}px;\">${props.balloon_icon}</span>`;\r\n        }\r\n\r\n        markerElement.innerHTML = `${tourIndexNumberHTML}<div data-width=\"${props.size_balloon}\" data-height=\"${realMarkerSizeBalloon + x + x}\" class=\"treweler-marker marker-svg\"><div class=\"marker-balloon\" style=\"${styleBalloon}\"><div class=\"marker-balloon__dot\" style=\"${styleBalloonDot}\">${iconHtml}</div></div></div>`;\r\n        props.anchor = 'bottom';\r\n      } else {\r\n        if ((props.type !== 'custom')) {\r\n          const haloColor = props.halo_color;\r\n          const haloOpacity = props.halo_opacity;\r\n          const borderColor = props.color;\r\n          markerElement.innerHTML = `${tourIndexNumberHTML}<div class=\"treweler-marker\"><div class=\"marker\">\r\n                 <div class=\"marker-wrap\">\r\n                 <div class=\"marker__shadow\" ${haloColor && haloOpacity ? 'style=\"background-color:' + TWER.hex2rgba(haloColor, haloOpacity) + '\"' : ''}>\r\n                 <div class=\"marker__border\" ${borderColor ? 'style=\"border-color:' + borderColor + '\"' : ''}>\r\n                 <div class=\"marker__center\"></div>\r\n                 </div>\r\n                 </div>\r\n                 </div>\r\n                 </div></div>`;\r\n          props.anchor = 'center';\r\n        }\r\n      }\r\n\r\n    } else {\r\n      const size = props.size !== '' ? props.size.split(';') : '42;42'.split(';');\r\n      markerElement.className = 'treweler-marker icon';\r\n      markerElement.style.backgroundImage = `url('${props.icon}')`;\r\n      markerElement.style.backgroundSize = 'contain';\r\n      markerElement.style.backgroundRepeat = 'no-repeat';\r\n      markerElement.style.backgroundPosition = 'center center';\r\n      const width = (parseInt(size[1]) <= 42 ? (parseInt(size[1]) % 2 === 0 ? parseInt(size[1]) : parseInt(size[1]) + 1) : 42);\r\n      const height = (parseInt(size[0]) <= 42 ? (parseInt(size[0]) % 2 === 0 ? parseInt(size[0]) : parseInt(size[0]) + 1) : 42);\r\n      const finalWidth = parseInt(props.markerSize) > 1 ? parseInt(props.markerSize) : width;\r\n      const finalHeight = parseInt(props.markerSize) > 1 ? parseInt(props.markerSize) : height;\r\n      markerElement.style.width = `${finalWidth}px`;\r\n      markerElement.style.height = `${finalHeight}px`;\r\n      markerElement.innerHTML = `${tourIndexNumberHTML}`;\r\n    }\r\n    markerElement.classList.add(`js-twer-marker`);\r\n\r\n    markerElement.setAttribute('id', `twer-popup-id-${props.id}`);\r\n\r\n    // Category Handler\r\n    if (typeof props.category !== 'undefined') {\r\n      markerElement.classList.add(...props.category.split(' '));\r\n    }\r\n\r\n    // Add marker style class\r\n    markerElement.classList.add(`twer-cursor-${props.cursor}`);\r\n\r\n    // Add type of marker\r\n    markerElement.classList.add(`twer-marker-type--${props.type}`);\r\n\r\n    // If description exist - add template popup to marker\r\n    if (desc) {\r\n      const $template = document.createElement('template');\r\n      $template.innerHTML = desc;\r\n\r\n      if (!!markerElement.getElementsByTagName('template')) {\r\n        markerElement.appendChild($template);\r\n      }\r\n\r\n      // Add popup handlers if marker template / description JSON exist\r\n      if ('hover' === props.openby) {\r\n        markerElement.onmouseenter = (event) => {\r\n          this.openPopup(event, coords);\r\n        };\r\n        if (props.openDefault && showPopup) {\r\n          this.staticPopUp(markerElement, coords, 3);\r\n        }\r\n      } else if ('click' === props.openby) {\r\n        markerElement.onclick = (event) => {\r\n          this.openPopup(event, coords);\r\n        };\r\n        if (props.openDefault && showPopup) {\r\n          this.staticPopUp(markerElement, coords, 3);\r\n        }\r\n\r\n      } else if ('always_open' === props.openby) {\r\n        this.staticPopUp(markerElement, coords, 1);\r\n      }\r\n    }\r\n\r\n    // Hide marker\r\n    if (props.markerHide) {\r\n      let $rootMarker = [undefined];\r\n\r\n      if (markerElement.classList.contains('twer-marker-type--dot-default')) {\r\n        $rootMarker = markerElement.getElementsByClassName('treweler-marker');\r\n      } else if (markerElement.classList.contains('twer-marker-type--default')) {\r\n        $rootMarker = markerElement.getElementsByClassName('marker');\r\n      } else if (markerElement.classList.contains('twer-marker-type--balloon-default')) {\r\n        $rootMarker = markerElement.getElementsByClassName('treweler-marker');\r\n      } else if (markerElement.classList.contains('twer-marker-type--triangle-default')) {\r\n        $rootMarker = markerElement.getElementsByClassName('treweler-marker marker-triangle');\r\n      } else if (markerElement.classList.contains('twer-marker-type--custom')) {\r\n        markerElement.style.backgroundImage = 'none';\r\n      }\r\n\r\n      if (typeof $rootMarker[0] !== 'undefined') {\r\n        $rootMarker[0].style.visibility = 'hidden';\r\n        $rootMarker[0].style.opacity = 0;\r\n        $rootMarker[0].style.overflow = 'hidden';\r\n        $rootMarker[0].style.height = 0;\r\n        $rootMarker[0].style.width = 0;\r\n      }\r\n    }\r\n\r\n    // Show marker labels\r\n    if (props.markerLabelEnable) {\r\n\r\n      const labelParams = props.label;\r\n      const desc = labelParams.description.toString();\r\n\r\n      if (!lodash.isEmpty(desc)) {\r\n        const $templateLabel = document.getElementById('js-twer-marker-label');\r\n        markerElement.appendChild(document.importNode($templateLabel.content, true));\r\n        const $label = markerElement.getElementsByClassName('twer-marker-label')[0];\r\n        $label.classList.add(`twer-marker-label--${labelParams.position}`);\r\n        $label.innerHTML = desc.trim();\r\n        $label.style.color = labelParams.font_color;\r\n        $label.style.fontSize = `${labelParams.font_size}px`;\r\n        $label.style.fontWeight = labelParams.font_weight;\r\n        $label.style.letterSpacing = `${labelParams.letter_spacing}px`;\r\n        $label.style.lineHeight = labelParams.line_height;\r\n\r\n        if (labelParams.label_has_bg) {\r\n          $label.classList.add(`twer-marker-label--has-bg`);\r\n          $label.style.borderRadius = `${labelParams.label_border_radius}px`;\r\n          $label.style.paddingTop = `${labelParams.label_padding.top}px`;\r\n          $label.style.paddingBottom = `${labelParams.label_padding.bottom}px`;\r\n          $label.style.paddingLeft = `${labelParams.label_padding.left}px`;\r\n          $label.style.paddingRight = `${labelParams.label_padding.right}px`;\r\n\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      element: markerElement,\r\n      anchor: props.anchor\r\n    };\r\n  },\r\n  __afterCreateNewMarker: (marker, props, coords) => {\r\n    if (props.markerLabelEnable && props.label.description) {\r\n      let lineHeightDiff = 0; // Block size error due to text line-height.\r\n      const labelParams = props.label;\r\n      const $label = marker.element.getElementsByClassName('twer-marker-label')[0];\r\n      const $markerInner = marker.element.getElementsByClassName('marker');\r\n      const $markerInnerSvg = marker.element.getElementsByClassName('marker-svg');\r\n      let $rootMarker = [undefined];\r\n\r\n      let sizeMarker = [30, 30];\r\n      let sizeLabel = [103, 88];\r\n\r\n      if ($markerInner.length > 0) {\r\n        $rootMarker = $markerInner;\r\n      } else if ($markerInnerSvg.length > 0) {\r\n        $rootMarker = $markerInnerSvg;\r\n      } else {\r\n        $rootMarker = [marker.element];\r\n      }\r\n\r\n      if (typeof $rootMarker[0] !== 'undefined') {\r\n        sizeMarker[0] = $rootMarker[0].getBoundingClientRect().width;\r\n        sizeMarker[1] = $rootMarker[0].getBoundingClientRect().height;\r\n\r\n        if ($rootMarker[0].classList.contains('marker-svg')) {\r\n          const bottomValue = parseInt($rootMarker[0].getElementsByClassName('marker-balloon')[0].style.bottom);\r\n          sizeMarker[1] = sizeMarker[1] + bottomValue;\r\n\r\n          $rootMarker[0].getElementsByClassName('marker-balloon')[0].style.bottom = 0;\r\n        }\r\n\r\n        $rootMarker[0].style.left = '0px';\r\n        $rootMarker[0].style.top = '0px';\r\n        $rootMarker[0].closest('.js-twer-marker, .treweler-marker').style.width = `${sizeMarker[0]}px`;\r\n        $rootMarker[0].closest('.js-twer-marker, .treweler-marker').style.height = `${sizeMarker[1]}px`;\r\n      }\r\n\r\n      sizeLabel[0] = $label.getBoundingClientRect().width - lineHeightDiff;\r\n      sizeLabel[1] = $label.getBoundingClientRect().height - lineHeightDiff;\r\n\r\n      if (labelParams.position === 'top' || labelParams.position === 'bottom') {\r\n        sizeMarker[0] = sizeMarker[0] - 1;\r\n        sizeMarker[1] = sizeMarker[1] - 1;\r\n      }\r\n\r\n      if (labelParams.position === 'bottom_right' || labelParams.position === 'bottom_left' || labelParams.position === 'top_right' || labelParams.position === 'top_left') {\r\n\r\n        if (sizeMarker[0] === 30) {\r\n          sizeMarker[0] -= 7;\r\n        }\r\n        if (sizeMarker[1] === 30) {\r\n          sizeMarker[1] -= 7;\r\n        }\r\n      }\r\n\r\n      let offset = labelParams.margin - lineHeightDiff;\r\n      switch (labelParams.position) {\r\n        case 'left' :\r\n        case 'right' :\r\n          $label.style.marginTop = `-${sizeLabel[1] / 2}px`;\r\n          break;\r\n        case 'top' :\r\n        case 'bottom' :\r\n          $label.style.marginLeft = `-${sizeLabel[0] / 2}px`;\r\n          break;\r\n        case 'center' :\r\n          $label.style.marginLeft = `-${sizeLabel[0] / 2}px`;\r\n          $label.style.marginTop = `-${sizeLabel[1] / 2}px`;\r\n          break;\r\n\r\n      }\r\n      switch (labelParams.position) {\r\n        case 'right' :\r\n          $label.style.left = `${offset + sizeMarker[0]}px`;\r\n          break;\r\n        case 'bottom_right' :\r\n          $label.style.left = `${offset + sizeMarker[0]}px`;\r\n          $label.style.top = `${offset + sizeMarker[1]}px`;\r\n          break;\r\n        case 'top_right' :\r\n          $label.style.left = `${offset + sizeMarker[0]}px`;\r\n          $label.style.bottom = `${offset + sizeMarker[1]}px`;\r\n          break;\r\n        case 'left' :\r\n          $label.style.right = `${offset + sizeMarker[0]}px`;\r\n          break;\r\n        case 'bottom_left' :\r\n          $label.style.right = `${offset + sizeMarker[0]}px`;\r\n          $label.style.top = `${offset + sizeMarker[1]}px`;\r\n          break;\r\n        case 'top_left' :\r\n          $label.style.right = `${offset + sizeMarker[0]}px`;\r\n          $label.style.bottom = `${offset + sizeMarker[1]}px`;\r\n          break;\r\n        case 'top' :\r\n          $label.style.bottom = `${offset + sizeMarker[1]}px`;\r\n          break;\r\n        case 'bottom' :\r\n          $label.style.top = `${offset + sizeMarker[1]}px`;\r\n          break;\r\n      }\r\n    }\r\n\r\n    if (props.allowMarkerCenterOnClick) {\r\n      marker.element.addEventListener('click', (event) => {\r\n        event.preventDefault();\r\n        TWER.map.flyTo({\r\n          center: coords,\r\n          padding: {\r\n            top: props.markerClickOffset.top,\r\n            bottom: props.markerClickOffset.bottom,\r\n            left: props.markerClickOffset.left,\r\n            right: props.markerClickOffset.right\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n\r\n    if(props.markerLink.enable) {\r\n      marker.element.addEventListener('click', (event) => {\r\n        event.preventDefault();\r\n        let target = props.markerLink.openInNewWindow ? '_blank' : '_self';\r\n        if(TWER.isIframeMap() && !props.markerLink.openInNewWindow) {\r\n          target = '_parent';\r\n        }\r\n\r\n        window.open(props.markerLink.url, target);\r\n      });\r\n    }\r\n  },\r\n\r\n  isIframeMap: function() {\r\n    return document.body.classList.contains('twer-page-iframe-map');\r\n  },\r\n\r\n  staticPopUp: function(element, coords, showForever, idPop) {\r\n\r\n    const $element = element;\r\n    const $popup = document.getElementsByClassName($element.getAttribute('id'))[0];\r\n\r\n    if ($popup !== undefined) return false;\r\n\r\n    if (!$element.classList.contains('open') && ($element.classList.contains('js-twer-marker') || !!$element.closest('.js-twer-marker'))) {\r\n      let $template, $rootElement;\r\n      const range = document.createRange();\r\n\r\n      if ($element.classList.contains('js-twer-marker')) {\r\n        $rootElement = $element;\r\n        $template = $rootElement.getElementsByTagName('template')[0];\r\n      }\r\n      if (!!$element.closest('.js-twer-marker')) {\r\n        $rootElement = $element.closest('.js-twer-marker');\r\n        $template = $rootElement.getElementsByTagName('template')[0];\r\n      }\r\n\r\n      if (!!$template) {\r\n        const someDiv = document.createElement('DIV');\r\n        const documentFragment = range.createContextualFragment($template.innerHTML);\r\n        someDiv.appendChild(documentFragment);\r\n        const classLists = someDiv.getElementsByClassName('js-twer-popup__wrap')[0].dataset.class;\r\n        const id = someDiv.getElementsByClassName('js-twer-popup__wrap')[0].dataset.idpopup;\r\n        const borderRadius = someDiv.getElementsByClassName('js-twer-popup__wrap')[0].dataset.borderradius;\r\n        const minwidthalternate = someDiv.getElementsByClassName('js-twer-popup__wrap')[0].dataset.minwidthalternate;\r\n\r\n        someDiv.getElementsByClassName('js-twer-popup__wrap')[0].removeAttribute('data-class');\r\n        someDiv.getElementsByClassName('js-twer-popup__wrap')[0].removeAttribute('data-idpopup');\r\n        someDiv.getElementsByClassName('js-twer-popup__wrap')[0].removeAttribute('data-borderradius');\r\n        someDiv.getElementsByClassName('js-twer-popup__wrap')[0].removeAttribute('data-minwidthalternate');\r\n\r\n        const templateHtml = someDiv.innerHTML;\r\n\r\n        $rootElement.classList.add('open');\r\n\r\n        let offsetPopup = 14;\r\n\r\n        if ($rootElement.classList.contains('twer-marker-type--balloon-default')) {\r\n          offsetPopup = parseInt($rootElement.getElementsByClassName('marker-svg')[0].dataset.height) + 3;\r\n        }\r\n\r\n        if ($rootElement.classList.contains('twer-marker-type--triangle-default')) {\r\n          offsetPopup = parseInt($rootElement.getElementsByClassName('marker-triangle')[0].dataset.height) + 10;\r\n          offsetPopup = parseInt(offsetPopup / 2);\r\n        }\r\n\r\n        // Show popup after marker click\r\n        const popup = new mapboxgl.Popup({\r\n          className: classLists,\r\n          closeButton: false,\r\n          closeOnClick: false,\r\n          anchor: 'bottom',\r\n          focusAfterOpen: false,\r\n          offset: offsetPopup,\r\n          metadata: {\r\n            id: id\r\n          }\r\n        }).setLngLat(coords).setHTML(templateHtml).setMaxWidth('none').addTo(TWER.map);\r\n\r\n        popup._content.style.borderRadius = `${borderRadius}px`;\r\n\r\n        if (minwidthalternate.length > 0) {\r\n          const currentStyleAttrVal = popup._content.closest('.js-twer-popup').getAttribute('style');\r\n          popup._content.closest('.js-twer-popup').setAttribute('style', `min-width:${minwidthalternate}px !important;${currentStyleAttrVal}`);\r\n        }\r\n\r\n        if (showForever === 1) {\r\n          setTimeout(function() {\r\n            popup.addClassName('twer-popup--AlwaysShow');\r\n          }, 110);\r\n        } else if (showForever === 2) {\r\n          popup.addClassName('twer-popup--TourShow');\r\n        } else if (showForever === 3) {\r\n          setTimeout(function() {\r\n            popup.addClassName('twer-popup--OpenDefault');\r\n          }, 110);\r\n\r\n        } else {\r\n          popup.addClassName('twer-popup--show');\r\n\r\n        }\r\n\r\n        TWER.popups.push(popup);\r\n      }\r\n\r\n    }\r\n\r\n    document.activeElement.blur();\r\n  },\r\n};\r\n"],"names":["TWER_ADDONS","constructor","props","$btnCatMobile","jQuery","$mobileCatMenu","$select2Container","$selectMapCat","width","window","on","show","hide","select2","e","setDocHeight","document","documentElement","style","setProperty","visualViewport","height","TWER_CATEGORY_SWITCHER","i18n_categories","treweler_params","select2Options","selectionCssClass","dropdownCssClass","minimumResultsForSearch","Infinity","closeOnSelect","dropdownParent","placeholder","all","language","not_found","$parentWidget","closest","ddlShowAbove","hasClass","dropdownPosition","html","inLabel","count","length","countOptions","no_selected","one_selected","selected","select2Main","has","addClass","event","categoryId","parseInt","params","data","id","options","getElementById","optionsData","i","value","TWER","fitBounds","map","boundsData","linear","allowStoreLocator","allowCluster","markers","$markerElement","element","_element","classList","contains","display","globalClusterStatus","removedIndexesFeatures","removedIndexesMarkers","removedCats","isEmpty","clusterData","features","properties","categories","JSON","parse","cat_ids","includes","push","clusterDataDump","globalApprove","j","indexSet","Set","filter","feature","markerCategories","some","item","markersDataDump","globalApprove1","remove","indexSet1","getSource","setData","markersIgnoredClusters","lRoutesRaw","dataset","routes","split","routeAnyChecked","ids","is","iw","setLayoutProperty","coords","geometry","coordinates","desc","description","showPopup","markerElement","createNewMarker","mapboxgl","Marker","setLngLat","addTo","__afterCreateNewMarker","Fancybox","defaults","Hash","TWER_GALLERY","bind","closeButton","template","dragToClose","Image","zoom","click","wheel","Toolbar","items","place","type","class","label","tabindex","position","prev","preventDefault","fancybox","next","Carousel","Navigation","keyboard","Escape","Delete","Backspace","PageUp","PageDown","ArrowUp","ArrowDown","ArrowRight","ArrowLeft","$toolbar","plugins","$container","placeValue","$trigger","trim","$placeElement","getElementsByClassName","infoValue","getSlide","caption","separator","innerHTML","getElementsByTagName","alt","Thumbs","hash","TwerLayers","place_labels","road_labels","points_of_interest","transit_labels","mapStyle","activeLayers","layers","layersTypes","customStyle","handleStyleLoad","forEach","setConfigProperty","updateMapLayers","setLayerVisibility","layerId","visibility","updateLayerVisibility","layerType","layerGroups","showPlaceLabels","showRoadLabels","showPointOfInterestLabels","showTransitLabels","boundaries","building_labels","buildings","natural_features","pedestrian_labels","pedestrian_roads","transit","roads","land_structure","hillshade","water_depth","contour_lines","getStyle","layer","layerIds","Object","entries","TWER_PRELOADER","$preloader","$counter","querySelectorAll","initPreloader","plr","percent","setInterval","maxPercent","Math","floor","random","clearInterval","setTimeout","add","TWER_TOUR","tour","allowTour","tourAutoRun","localStorage","setItem","mainTourData","tourData","tourPopUp","tourType","tourFlySpeed","tourFlyCurve","tourLabelMarker","tourHandler","once","arr","tourPopUpGlobal","tourNumberContainer","tourNumber","tourNumberLabel","tourTextLabel","countedTour","twerStrInt","numInt","toLocaleString","minimumIntegerDigits","useGrouping","nextItem","ix","prevItem","addEventListener","tourInProgress","prevData","idx","tourPopUpMarker","showPopUp","advancedSettingsMarker","advanced_settings","console","log","title","jumpTo","center","geo","lang","lat","pitch","bearing","padding","top","tourOffsets","bottom","left","right","flyTo","speed","parseFloat","flySpeed","curve","flyCurve","closePopups","except","str","target","openPopup","toggle","nextData","_defineProperty","obj","key","defineProperty","enumerable","configurable","writable","TrewelerGallery","storeLocatorDataDump","clusterDataSources","routeData","popups","clusterColor","animationDelayClose","animationDelayOpen","geolocateControl","ajaxLoading","currentMapPageId","allMapMarkers","markerLocation","markerLocationProps","marker_style","point_halo_color","point_halo_opacity","point_color","custom_marker_img","cursor","anchor","initAllMapMarkers","FormData","append","fetch","ajax_url","method","credentials","body","then","response","json","catch","error","initMap","mapPageId","accessToken","container","minZoom","maxZoom","iniBearing","iniPitch","maxPitch","minPitch","attributionControl","logoPosition","wordmarkPosition","projection","name","fadeDuration","restrictPanning","maxBounds","restrictPanningData","Map","setFog","mapLightPreset","disableDragPan","dragPan","disable","addControl","AttributionControl","compact","compactAttribution","attributionPosition","mapLanguange","setRTLTextPlugin","MapboxLanguage","defaultLanguage","allowBearing","dragRotate","touchZoomRotate","disableRotation","scaleControl","ScaleControl","maxWidth","unit","scaleControlUnit","scaleControlPosition","fullscreenControl","FullscreenControl","fullscreenControlPosition","searchControl","MapboxGeocoder","searchControlPlaceholder","marker","searchControlPosition","zoomControl","NavigationControl","zoomControlPosition","scrollZoom","onLoadMap","clustersHandlers","onClickMap","getBounds","toArray","setRenderWorldCopies","worldCopy","match","matchedId","undefined","replace","alpha","bgOverlay","isAlpha","isNaN","addLayer","paint","addSource","generateId","cluster","clusterMaxZoom","clusterRadius","source","layout","markersIdsRemoved","allowMarkerCluster","inClusterFeatures","outClusterFeatures","notClustersData","clustersData","viewPortMarkersData","markersInViewPort","clusters","markerExists","array","isSourceLoaded","viewPortMarkers","querySourceFeatures","sourceLayer","featuresNotClusters","featuresClusters","getLngLat","notClustersMarkersIds","viewPortMarkersIds","clustersDataLength","clustersLength","onlyOneClusterFlag","currentClustersIds","clustersIdsRemoved","skipCluster","counterCluster","getElement","textContent","point_count","clusterElement","createNewCluster","lodash","insideStoreLocator","mustShowInCluster","clustersIdsRemoved1","originalEvent","$marker","storeLocatorMarkerTemplate","setMarkerStyle","storeLocatorMarker","addMarker","createNewMarker1","removeMarker","isMarker","isCluster","lngLat","wrap","mapCenterOnClick","essential","onClickMapTour","$element","closeTourPopup","popup","index","_container","getItem","$rootElement","splice","exceptIds","hasOwnProperty","popupId","metadata","idsCloseStatus","exceptIdsStatus","exceptId","removeClassName","el","$popup","getAttribute","togglePopups","$template","range","createRange","someDiv","createElement","documentFragment","createContextualFragment","appendChild","classLists","idpopup","borderRadius","borderradius","minwidthalternate","removeAttribute","templateHtml","offsetPopup","Popup","className","closeOnClick","focusAfterOpen","offset","setHTML","setMaxWidth","_content","currentStyleAttrVal","setAttribute","addClassName","activeElement","blur","wp","mediaelement","initialize","queryRenderedFeatures","point","clusterId","cluster_id","getClusterExpansionZoom","err","easeTo","getCanvas","hex2rgba","hex","opacity","r","substring","g","b","prop","stringify","iconHtml","dot_icon_picker","dot_icon_show","dot_icon","color","size","dot","dot_corner_radius","units","dot_border","styleTriangle","triangle_width","triangle_height","triangle_color","realMarkerSizeBalloon","balloon","balloon_border","x","sqrt","pow","styleBalloon","styleBalloonDot","balloon_dot","balloon_icon_picker","balloon_icon_show","balloon_icon","custom_marker_size_default","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","finalWidth","custom_marker_size","finalHeight","custom_marker_position","tourIndexNumberHTML","tourIndexNumber","styles","tourNumberFontColor","tourNumberSettings","fontColor","tourNumberFontSize","fontSize","tourNumberFontWeight","fontWeight","tourNumberOffsetTop","tourNumberOffsetBottom","tourNumberOffsetLeft","tourNumberOffsetRight","join","icon","halo_color","halo_opacity","dot_icon_color","dot_icon_size","inner_size","corner_radius","corner_radius_units","border_width","border_color","dotcenter_color","width_triangle","height_triangle","color_triangle","size_balloon","border_width_balloon","color_balloon","border_color_balloon","dot_size","dot_color","balloon_icon_color","balloon_icon_size","haloColor","haloOpacity","borderColor","markerSize","category","openby","onmouseenter","openDefault","staticPopUp","onclick","markerHide","$rootMarker","overflow","markerLabelEnable","labelParams","toString","$templateLabel","importNode","content","$label","font_color","font_size","font_weight","letterSpacing","letter_spacing","lineHeight","line_height","label_has_bg","label_border_radius","paddingTop","label_padding","paddingBottom","paddingLeft","paddingRight","lineHeightDiff","$markerInner","$markerInnerSvg","sizeMarker","sizeLabel","getBoundingClientRect","bottomValue","margin","marginTop","marginLeft","allowMarkerCenterOnClick","markerClickOffset","markerLink","enable","openInNewWindow","isIframeMap","open","url","showForever","idPop"],"sourceRoot":""}