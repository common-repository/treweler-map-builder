{"version":3,"file":"treweler-shapes.js","mappings":"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","sources":["webpack://treweler/./src/js/front/treweler-shapes.js"],"sourcesContent":["'use strict';\r\n\r\n/**\r\n * Init All Shapes For Front End\r\n */\r\nclass TWER_SHAPES {\r\n\r\n  /**\r\n   * Ð¡onstructor\r\n   *\r\n   * @param props\r\n   */\r\n\r\n  constructor(props) {\r\n    const shapes = TWER.data.shapes;\r\n\r\n    let shapesCollection = {\r\n      type : 'FeatureCollection',\r\n      features : []\r\n    };\r\n\r\n    if(shapes.length > 0) {\r\n      for(let i = 0; i < shapes.length; i ++) {\r\n        if(shapes[i].length > 0) {\r\n          const collection = typeof shapes[i] === 'string' ? JSON.parse(shapes[i]) : shapes[i];\r\n          const features = collection.features;\r\n          if (features.length > 0) {\r\n            for (let j = 0; j < features.length; j++) {\r\n              shapesCollection.features.push(features[j]);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    TWER.map.on('load', async () => {\r\n      if(shapesCollection.features.length > 0) {\r\n        shapesCollection = this.prepare_features(shapesCollection);\r\n        TWER.map.addSource('shapes_sources', {\r\n          type: 'geojson',\r\n          data: shapesCollection,\r\n        });\r\n        TWER.map.addLayer({\r\n          id: 'line_layer',\r\n          type: 'line',\r\n          'filter': [\r\n            'all',\r\n            ['==', '$type', 'LineString'],\r\n            ['!=', 'mode', 'static'],\r\n          ],\r\n          layout: {\r\n            'line-cap': 'round',\r\n            'line-join': 'round'\r\n          },\r\n          source: 'shapes_sources',\r\n          paint: {\r\n            'line-color':  ['to-color', ['get', 'line_color'] ],\r\n            'line-dasharray': ['get', 'line_dasharray'],\r\n            'line-width': ['to-number', ['get', 'line_width' ] ]\r\n          }\r\n        });\r\n\r\n        TWER.map.addLayer({\r\n          id: 'polygon_layer_fill',\r\n          type: 'fill',\r\n          'filter': [\r\n            'all',\r\n            ['==', '$type', 'Polygon'],\r\n            ['!=', 'mode', 'static'],\r\n          ],\r\n          source: 'shapes_sources',\r\n          paint: {\r\n            'fill-color' : ['to-color', ['get', 'fill_color'] ],\r\n          }\r\n        });\r\n        TWER.map.addLayer({\r\n          id: 'polygon_layer_stroke',\r\n          type: 'line',\r\n          'filter': [\r\n            'all',\r\n            ['==', '$type', 'Polygon'],\r\n            ['!=', 'mode', 'static'],\r\n          ],\r\n          layout: {\r\n            'line-cap': 'round',\r\n            'line-join': 'round'\r\n          },\r\n          source: 'shapes_sources',\r\n          paint: {\r\n            'line-color':  ['to-color', ['get', 'stroke_color'] ],\r\n            'line-dasharray': ['get', 'stroke_dasharray'],\r\n            'line-width': ['to-number', ['get', 'stroke_width' ] ]\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  prepare_features(collection) {\r\n    for(let i = 0; i < collection.features.length; i++) {\r\n\r\n      // Set right coordinates for Circle shape\r\n      if(collection.features[i].geometry.hasOwnProperty('coordinatesCircle')) {\r\n        collection.features[i].geometry.coordinates = collection.features[i].geometry.coordinatesCircle;\r\n      }\r\n    }\r\n    return collection;\r\n  }\r\n\r\n}\r\n\r\n!(() => {\r\n  window.addEventListener('load', () => {\r\n    new TWER_SHAPES();\r\n  });\r\n\r\n})();\r\n"],"names":["TWER_SHAPES","constructor","props","shapes","TWER","data","shapesCollection","type","features","length","i","collection","JSON","parse","j","push","map","on","prepare_features","addSource","addLayer","id","layout","source","paint","geometry","hasOwnProperty","coordinates","coordinatesCircle","window","addEventListener"],"sourceRoot":""}