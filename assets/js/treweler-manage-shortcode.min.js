!function(){"use strict";function e(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const{__:t}=wp.i18n;class o{constructor(){e(this,"$shortcode_fullwidth",null),e(this,"$shortcode_disable_zoom",null),e(this,"$shortcode_width",null),e(this,"$shortcode_width_unit",null),e(this,"$shortcode_height",null),e(this,"$shortcode_height_unit",null),e(this,"$shortcode_initial_point_lat",null),e(this,"$shortcode_initial_point_lon",null),e(this,"$shortcode_zoom_level",null),e(this,"$shortcode_zoom_number",null),e(this,"$shortcode_code",null),e(this,"$copyBtn",null),e(this,"shortcodeRawValues",{}),this.$shortcode_fullwidth=document.getElementById("shortcode_fullwidth"),this.$shortcode_disable_zoom=document.getElementById("shortcode_disable_zoom"),this.$shortcode_width=document.getElementById("shortcode_width"),this.$shortcode_width_unit=document.getElementById("shortcode_width_unit"),this.$shortcode_height=document.getElementById("shortcode_height"),this.$shortcode_height_unit=document.getElementById("shortcode_height_unit"),this.$shortcode_initial_point_lat=document.getElementById("shortcode_initial_point_lat"),this.$shortcode_initial_point_lon=document.getElementById("shortcode_initial_point_lon"),this.$shortcode_zoom_level=document.getElementById("shortcode_zoom_level"),this.$shortcode_zoom_number=document.getElementById("shortcode_zoom_number"),this.$shortcode_code=document.getElementById("shortcode_code"),this.$copyBtn=document.getElementsByClassName("js-twer-copy-text")[0],this.$copyBtn.addEventListener("click",(e=>{this.$shortcode_code.select(),document.execCommand("copy")})),[this.$shortcode_zoom_level,this.$shortcode_zoom_number].map(((e,t,o)=>{const s=e.id;"shortcode_zoom_number"===s&&(""===e.value?this.$shortcode_zoom_level.value=0:this.$shortcode_zoom_level.value=e.value),"shortcode_zoom_level"===s&&(""===this.$shortcode_zoom_number.value?e.value=0:e.value=this.$shortcode_zoom_number.value)})),[this.$shortcode_fullwidth,this.$shortcode_disable_zoom,this.$shortcode_width,this.$shortcode_width_unit,this.$shortcode_height,this.$shortcode_height_unit,this.$shortcode_initial_point_lat,this.$shortcode_initial_point_lon,this.$shortcode_zoom_level,this.$shortcode_zoom_number].map(((e,t,o)=>{switch(e.type){case"checkbox":this.shortcodeRawValues[e.id]=e.checked,e.addEventListener("change",(e=>{this.shortcodeRawValues[e.target.id]=e.target.checked,this.makeShortcodeCode()}));break;case"number":this.shortcodeRawValues[e.id]=e.value,e.addEventListener("keyup",(e=>{"shortcode_zoom_number"===e.target.id&&(""===e.target.value?(this.$shortcode_zoom_level.value=0,this.shortcodeRawValues.shortcode_zoom_level=0):(this.$shortcode_zoom_level.value=e.target.value,this.shortcodeRawValues.shortcode_zoom_level=e.target.value)),this.shortcodeRawValues[e.target.id]=e.target.value,this.makeShortcodeCode()}));break;case"select-one":this.shortcodeRawValues[e.id]=e.value,e.addEventListener("change",(e=>{this.shortcodeRawValues[e.target.id]=e.target.value,this.makeShortcodeCode()}));break;case"range":this.shortcodeRawValues[e.id]=e.value,e.addEventListener("input",(e=>{this.$shortcode_zoom_number.value=e.target.value,"shortcode_zoom_level"===e.target.id&&(this.shortcodeRawValues.shortcode_zoom_number=e.target.value),this.shortcodeRawValues[e.target.id]=e.target.value,this.makeShortcodeCode()}))}})),this.makeShortcodeCode()}makeShortcodeCode(){const e=new Set,t=this.shortcodeRawValues.shortcode_width_unit,o=this.shortcodeRawValues.shortcode_height_unit,s=this.shortcodeRawValues.shortcode_width,h=this.shortcodeRawValues.shortcode_height;""!==s&&(this.shortcodeRawValues.shortcode_width=`${parseFloat(s)}${t}`),""!==h&&(this.shortcodeRawValues.shortcode_height=`${parseFloat(h)}${o}`);for(let t in this.shortcodeRawValues){const o=this.idToShortcodeAttrConverter(t),s=this.shortcodeRawValues[t];switch(t){case"shortcode_fullwidth":case"shortcode_disable_zoom":s&&e.add(o);break;case"shortcode_width":case"shortcode_height":case"shortcode_initial_point_lat":case"shortcode_initial_point_lon":case"shortcode_zoom_number":""!==s&&e.add(o.replace(/#value#/g,s))}}const i=twer_ajax.post_id;let d=[...e].join(" ");""!==d.trim()&&(d=` ${d}`),this.$shortcode_code.value=`[treweler map-id="${i}"${d}]`}idToShortcodeAttrConverter(e){let t="";switch(e=e.replace(/shortcode_/g,"")){case"fullwidth":t='type="fullwidth"';break;case"disable_zoom":t='scrollzoom="no"';break;case"width_unit":t='width-unit="#unit#"';break;case"height_unit":t='height-unit="#unit#"';break;case"width":t='width="#value#"';break;case"height":t='height="#value#"';break;case"initial_point_lat":t='lat="#value#"';break;case"initial_point_lon":t='lon="#value#"';break;case"zoom_number":case"zoom_level":t='zoom="#value#"'}return t}}window.addEventListener("DOMContentLoaded",(()=>{new o}))}();