!function(){var e={8490:function(e){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function r(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(a,o,function(t){return e[t]}.bind(null,o));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";var a=r(3);function o(e){return!0===a(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,r;return!1!==o(e)&&"function"==typeof(t=e.constructor)&&!1!==o(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=t.PALETTE_MATERIAL_CHROME=t.PALETTE_MATERIAL_500=t.COLOR_NAMES=t.getLuminance=t.intToRgb=t.rgbToInt=t.rgbToHsv=t.rgbToHsl=t.hslToRgb=t.rgbToHex=t.parseColor=t.parseColorToHsla=t.parseColorToHsl=t.parseColorToRgba=t.parseColorToRgb=t.from=t.createPicker=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,o=!1,i=void 0;try{for(var n,l=e[Symbol.iterator]();!(a=(n=l.next()).done)&&(r.push(n.value),!t||r.length!==t);a=!0);}catch(e){o=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=r(2),n=s(r(0)),l=s(r(4));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var d="undefined"!=typeof window&&window.navigator.userAgent.indexOf("Edge")>-1,u="undefined"!=typeof window&&window.navigator.userAgent.indexOf("rv:")>-1,h={id:null,attachTo:"body",showHSL:!0,showRGB:!0,showHEX:!0,showAlpha:!1,color:"#ff0000",palette:null,paletteEditable:!1,useAlphaInPalette:"auto",slBarSize:[232,150],hueBarSize:[150,11],alphaBarSize:[150,11]},m="COLOR",g="RGBA_USER",v="HSLA_USER";function f(e,t,r){return e?e instanceof HTMLElement?e:e instanceof NodeList?e[0]:"string"==typeof e?document.querySelector(e):e.jquery?e.get(0):r?t:null:t}function b(e){var t=e.getContext("2d"),r=+e.width,a=+e.height,n=t.createLinearGradient(1,1,1,a-1);return n.addColorStop(0,"white"),n.addColorStop(1,"black"),{setHue:function(e){var o=t.createLinearGradient(1,0,r-1,0);o.addColorStop(0,"hsla("+e+", 100%, 50%, 0)"),o.addColorStop(1,"hsla("+e+", 100%, 50%, 1)"),t.fillStyle=n,t.fillRect(0,0,r,a),t.fillStyle=o,t.globalCompositeOperation="multiply",t.fillRect(0,0,r,a),t.globalCompositeOperation="source-over"},grabColor:function(e,r){return t.getImageData(e,r,1,1).data},findColor:function(e,t,n){var l=(0,i.rgbToHsv)(e,t,n),s=o(l,3),c=s[1],p=s[2];return[c*r,a-p*a]}}}function w(e,t,r){return null===e?t:/^\s*$/.test(e)?r:!!/true|yes|1/i.test(e)||!/false|no|0/i.test(e)&&t}function y(e,t,r){if(null===e)return t;if(/^\s*$/.test(e))return r;var a=e.split(",").map(Number);return 2===a.length&&a[0]&&a[1]?a:t}var k=function(){function e(t,r){if(c(this,e),r?(t=f(t),this.options=Object.assign({},h,r)):t&&(0,n.default)(t)?(this.options=Object.assign({},h,t),t=f(this.options.attachTo)):(this.options=Object.assign({},h),t=f((0,i.nvl)(t,this.options.attachTo))),!t)throw new Error("Container not found: "+this.options.attachTo);!function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"acp-";if(t.hasAttribute(r+"show-hsl")&&(e.showHSL=w(t.getAttribute(r+"show-hsl"),h.showHSL,!0)),t.hasAttribute(r+"show-rgb")&&(e.showRGB=w(t.getAttribute(r+"show-rgb"),h.showRGB,!0)),t.hasAttribute(r+"show-hex")&&(e.showHEX=w(t.getAttribute(r+"show-hex"),h.showHEX,!0)),t.hasAttribute(r+"show-alpha")&&(e.showAlpha=w(t.getAttribute(r+"show-alpha"),h.showAlpha,!0)),t.hasAttribute(r+"palette-editable")&&(e.paletteEditable=w(t.getAttribute(r+"palette-editable"),h.paletteEditable,!0)),t.hasAttribute(r+"sl-bar-size")&&(e.slBarSize=y(t.getAttribute(r+"sl-bar-size"),h.slBarSize,[232,150])),t.hasAttribute(r+"hue-bar-size")&&(e.hueBarSize=y(t.getAttribute(r+"hue-bar-size"),h.hueBarSize,[150,11]),e.alphaBarSize=e.hueBarSize),t.hasAttribute(r+"palette")){var a=t.getAttribute(r+"palette");switch(a){case"PALETTE_MATERIAL_500":e.palette=i.PALETTE_MATERIAL_500;break;case"PALETTE_MATERIAL_CHROME":case"":e.palette=i.PALETTE_MATERIAL_CHROME;break;default:e.palette=a.split(/[;|]/)}}t.hasAttribute(r+"color")&&(e.color=t.getAttribute(r+"color"))}(this.options,t),this.H=0,this.S=0,this.L=0,this.R=0,this.G=0,this.B=0,this.A=1,this.palette={},this.element=document.createElement("div"),this.options.id&&(this.element.id=this.options.id),this.element.className="a-color-picker",this.element.innerHTML=l.default,t.appendChild(this.element);var a=this.element.querySelector(".a-color-picker-h");this.setupHueCanvas(a),this.hueBarHelper=b(a),this.huePointer=this.element.querySelector(".a-color-picker-h+.a-color-picker-dot");var o=this.element.querySelector(".a-color-picker-sl");this.setupSlCanvas(o),this.slBarHelper=b(o),this.slPointer=this.element.querySelector(".a-color-picker-sl+.a-color-picker-dot"),this.preview=this.element.querySelector(".a-color-picker-preview"),this.setupClipboard(this.preview.querySelector(".a-color-picker-clipbaord")),this.options.showHSL?(this.setupInput(this.inputH=this.element.querySelector(".a-color-picker-hsl>input[nameref=H]")),this.setupInput(this.inputS=this.element.querySelector(".a-color-picker-hsl>input[nameref=S]")),this.setupInput(this.inputL=this.element.querySelector(".a-color-picker-hsl>input[nameref=L]"))):this.element.querySelector(".a-color-picker-hsl").remove(),this.options.showRGB?(this.setupInput(this.inputR=this.element.querySelector(".a-color-picker-rgb>input[nameref=R]")),this.setupInput(this.inputG=this.element.querySelector(".a-color-picker-rgb>input[nameref=G]")),this.setupInput(this.inputB=this.element.querySelector(".a-color-picker-rgb>input[nameref=B]"))):this.element.querySelector(".a-color-picker-rgb").remove(),this.options.showHEX?this.setupInput(this.inputRGBHEX=this.element.querySelector("input[nameref=RGBHEX]")):this.element.querySelector(".a-color-picker-rgbhex").remove(),this.options.paletteEditable||this.options.palette&&this.options.palette.length>0?this.setPalette(this.paletteRow=this.element.querySelector(".a-color-picker-palette")):(this.paletteRow=this.element.querySelector(".a-color-picker-palette"),this.paletteRow.remove()),this.options.showAlpha?(this.setupAlphaCanvas(this.element.querySelector(".a-color-picker-a")),this.alphaPointer=this.element.querySelector(".a-color-picker-a+.a-color-picker-dot")):this.element.querySelector(".a-color-picker-alpha").remove(),this.element.style.width=this.options.slBarSize[0]+"px",this.onValueChanged(m,this.options.color)}return a(e,[{key:"setupHueCanvas",value:function(e){var t=this;e.width=this.options.hueBarSize[0],e.height=this.options.hueBarSize[1];for(var r=e.getContext("2d"),a=r.createLinearGradient(0,0,this.options.hueBarSize[0],0),o=0;o<=1;o+=1/360)a.addColorStop(o,"hsl("+360*o+", 100%, 50%)");r.fillStyle=a,r.fillRect(0,0,this.options.hueBarSize[0],this.options.hueBarSize[1]);var n=function(r){var a=(0,i.limit)(r.clientX-e.getBoundingClientRect().left,0,t.options.hueBarSize[0]),o=Math.round(360*a/t.options.hueBarSize[0]);t.huePointer.style.left=a-7+"px",t.onValueChanged("H",o)},l=function e(){document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",e)};e.addEventListener("mousedown",(function(e){n(e),document.addEventListener("mousemove",n),document.addEventListener("mouseup",l)}))}},{key:"setupSlCanvas",value:function(e){var t=this;e.width=this.options.slBarSize[0],e.height=this.options.slBarSize[1];var r=function(r){var a=(0,i.limit)(r.clientX-e.getBoundingClientRect().left,0,t.options.slBarSize[0]-1),o=(0,i.limit)(r.clientY-e.getBoundingClientRect().top,0,t.options.slBarSize[1]-1),n=t.slBarHelper.grabColor(a,o);t.slPointer.style.left=a-7+"px",t.slPointer.style.top=o-7+"px",t.onValueChanged("RGB",n)},a=function e(){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",e)};e.addEventListener("mousedown",(function(e){r(e),document.addEventListener("mousemove",r),document.addEventListener("mouseup",a)}))}},{key:"setupAlphaCanvas",value:function(e){var t=this;e.width=this.options.alphaBarSize[0],e.height=this.options.alphaBarSize[1];var r=e.getContext("2d"),a=r.createLinearGradient(0,0,e.width-1,0);a.addColorStop(0,"hsla(0, 0%, 50%, 0)"),a.addColorStop(1,"hsla(0, 0%, 50%, 1)"),r.fillStyle=a,r.fillRect(0,0,this.options.alphaBarSize[0],this.options.alphaBarSize[1]);var o=function(r){var a=(0,i.limit)(r.clientX-e.getBoundingClientRect().left,0,t.options.alphaBarSize[0]),o=+(a/t.options.alphaBarSize[0]).toFixed(2);t.alphaPointer.style.left=a-7+"px",t.onValueChanged("ALPHA",o)},n=function e(){document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",e)};e.addEventListener("mousedown",(function(e){o(e),document.addEventListener("mousemove",o),document.addEventListener("mouseup",n)}))}},{key:"setupInput",value:function(e){var t=this,r=+e.min,a=+e.max,o=e.getAttribute("nameref");e.hasAttribute("select-on-focus")&&e.addEventListener("focus",(function(){e.select()})),"text"===e.type?e.addEventListener("change",(function(){t.onValueChanged(o,e.value)})):((d||u)&&e.addEventListener("keydown",(function(n){"Up"===n.key?(e.value=(0,i.limit)(+e.value+1,r,a),t.onValueChanged(o,e.value),n.returnValue=!1):"Down"===n.key&&(e.value=(0,i.limit)(+e.value-1,r,a),t.onValueChanged(o,e.value),n.returnValue=!1)})),e.addEventListener("change",(function(){var n=+e.value;t.onValueChanged(o,(0,i.limit)(n,r,a))})))}},{key:"setupClipboard",value:function(e){var t=this;e.title="click to copy",e.addEventListener("click",(function(){e.value=(0,i.parseColor)([t.R,t.G,t.B,t.A],"hexcss4"),e.select(),document.execCommand("copy")}))}},{key:"setPalette",value:function(e){var t=this,r="auto"===this.options.useAlphaInPalette?this.options.showAlpha:this.options.useAlphaInPalette,a=null;switch(this.options.palette){case"PALETTE_MATERIAL_500":a=i.PALETTE_MATERIAL_500;break;case"PALETTE_MATERIAL_CHROME":a=i.PALETTE_MATERIAL_CHROME;break;default:a=(0,i.ensureArray)(this.options.palette)}if(this.options.paletteEditable||a.length>0){var o=function(r,a,o){var i=e.querySelector('.a-color-picker-palette-color[data-color="'+r+'"]')||document.createElement("div");i.className="a-color-picker-palette-color",i.style.backgroundColor=r,i.setAttribute("data-color",r),i.title=r,e.insertBefore(i,a),t.palette[r]=!0,o&&t.onPaletteColorAdd(r)},n=function(r,a){r?(e.removeChild(r),t.palette[r.getAttribute("data-color")]=!1,a&&t.onPaletteColorRemove(r.getAttribute("data-color"))):(e.querySelectorAll(".a-color-picker-palette-color[data-color]").forEach((function(t){e.removeChild(t)})),Object.keys(t.palette).forEach((function(e){t.palette[e]=!1})),a&&t.onPaletteColorRemove())};if(a.map((function(e){return(0,i.parseColor)(e,r?"rgbcss4":"hex")})).filter((function(e){return!!e})).forEach((function(e){return o(e)})),this.options.paletteEditable){var l=document.createElement("div");l.className="a-color-picker-palette-color a-color-picker-palette-add",l.innerHTML="+",e.appendChild(l),e.addEventListener("click",(function(e){/a-color-picker-palette-add/.test(e.target.className)?e.shiftKey?n(null,!0):o(r?(0,i.parseColor)([t.R,t.G,t.B,t.A],"rgbcss4"):(0,i.rgbToHex)(t.R,t.G,t.B),e.target,!0):/a-color-picker-palette-color/.test(e.target.className)&&(e.shiftKey?n(e.target,!0):t.onValueChanged(m,e.target.getAttribute("data-color")))}))}else e.addEventListener("click",(function(e){/a-color-picker-palette-color/.test(e.target.className)&&t.onValueChanged(m,e.target.getAttribute("data-color"))}))}else e.style.display="none"}},{key:"updatePalette",value:function(e){this.paletteRow.innerHTML="",this.palette={},this.paletteRow.parentElement||this.element.appendChild(this.paletteRow),this.options.palette=e,this.setPalette(this.paletteRow)}},{key:"onValueChanged",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{silent:!1};switch(e){case"H":this.H=t;var a=(0,i.hslToRgb)(this.H,this.S,this.L),n=o(a,3);this.R=n[0],this.G=n[1],this.B=n[2],this.slBarHelper.setHue(t),this.updatePointerH(this.H),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"S":this.S=t;var l=(0,i.hslToRgb)(this.H,this.S,this.L),s=o(l,3);this.R=s[0],this.G=s[1],this.B=s[2],this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"L":this.L=t;var c=(0,i.hslToRgb)(this.H,this.S,this.L),p=o(c,3);this.R=p[0],this.G=p[1],this.B=p[2],this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"R":this.R=t;var d=(0,i.rgbToHsl)(this.R,this.G,this.B),u=o(d,3);this.H=u[0],this.S=u[1],this.L=u[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"G":this.G=t;var h=(0,i.rgbToHsl)(this.R,this.G,this.B),f=o(h,3);this.H=f[0],this.S=f[1],this.L=f[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"B":this.B=t;var b=(0,i.rgbToHsl)(this.R,this.G,this.B),w=o(b,3);this.H=w[0],this.S=w[1],this.L=w[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"RGB":var y=o(t,3);this.R=y[0],this.G=y[1],this.B=y[2];var k=(0,i.rgbToHsl)(this.R,this.G,this.B),E=o(k,3);this.H=E[0],this.S=E[1],this.L=E[2],this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B);break;case g:var _=o(t,4);this.R=_[0],this.G=_[1],this.B=_[2],this.A=_[3];var x=(0,i.rgbToHsl)(this.R,this.G,this.B),R=o(x,3);this.H=R[0],this.S=R[1],this.L=R[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B),this.updatePointerA(this.A);break;case v:var C=o(t,4);this.H=C[0],this.S=C[1],this.L=C[2],this.A=C[3];var T=(0,i.hslToRgb)(this.H,this.S,this.L),F=o(T,3);this.R=F[0],this.G=F[1],this.B=F[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B),this.updatePointerA(this.A);break;case"RGBHEX":var A=(0,i.cssColorToRgb)(t)||[this.R,this.G,this.B],S=o(A,3);this.R=S[0],this.G=S[1],this.B=S[2];var L=(0,i.rgbToHsl)(this.R,this.G,this.B),B=o(L,3);this.H=B[0],this.S=B[1],this.L=B[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B);break;case m:var H=(0,i.parseColor)(t,"rgba")||[0,0,0,1],j=o(H,4);this.R=j[0],this.G=j[1],this.B=j[2],this.A=j[3];var W=(0,i.rgbToHsl)(this.R,this.G,this.B),P=o(W,3);this.H=P[0],this.S=P[1],this.L=P[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B),this.updatePointerA(this.A);break;case"ALPHA":this.A=t}1===this.A?this.preview.style.backgroundColor="rgb("+this.R+","+this.G+","+this.B+")":this.preview.style.backgroundColor="rgba("+this.R+","+this.G+","+this.B+","+this.A+")",r&&r.silent||this.onchange&&this.onchange(this.preview.style.backgroundColor)}},{key:"onPaletteColorAdd",value:function(e){this.oncoloradd&&this.oncoloradd(e)}},{key:"onPaletteColorRemove",value:function(e){this.oncolorremove&&this.oncolorremove(e)}},{key:"updateInputHSL",value:function(e,t,r){this.options.showHSL&&(this.inputH.value=e,this.inputS.value=t,this.inputL.value=r)}},{key:"updateInputRGB",value:function(e,t,r){this.options.showRGB&&(this.inputR.value=e,this.inputG.value=t,this.inputB.value=r)}},{key:"updateInputRGBHEX",value:function(e,t,r){this.options.showHEX&&(this.inputRGBHEX.value=(0,i.rgbToHex)(e,t,r))}},{key:"updatePointerH",value:function(e){var t=this.options.hueBarSize[0]*e/360;this.huePointer.style.left=t-7+"px"}},{key:"updatePointerSL",value:function(e,t,r){var a=(0,i.hslToRgb)(e,t,r),n=o(a,3),l=n[0],s=n[1],c=n[2],p=this.slBarHelper.findColor(l,s,c),d=o(p,2),u=d[0],h=d[1];u>=0&&(this.slPointer.style.left=u-7+"px",this.slPointer.style.top=h-7+"px")}},{key:"updatePointerA",value:function(e){if(this.options.showAlpha){var t=this.options.alphaBarSize[0]*e;this.alphaPointer.style.left=t-7+"px"}}}]),e}(),E=function(){function e(t){c(this,e),this.name=t,this.listeners=[]}return a(e,[{key:"on",value:function(e){e&&this.listeners.push(e)}},{key:"off",value:function(e){this.listeners=e?this.listeners.filter((function(t){return t!==e})):[]}},{key:"emit",value:function(e,t){for(var r=this.listeners.slice(0),a=0;a<r.length;a++)r[a].apply(t,e)}}]),e}();function _(e,t){var r=new k(e,t),a={change:new E("change"),coloradd:new E("coloradd"),colorremove:new E("colorremove")},n=!0,l={},s={get element(){return r.element},get rgb(){return[r.R,r.G,r.B]},set rgb(e){var t=o(e,3),a=t[0],n=t[1],l=t[2],s=[(0,i.limit)(a,0,255),(0,i.limit)(n,0,255),(0,i.limit)(l,0,255)];a=s[0],n=s[1],l=s[2],r.onValueChanged(g,[a,n,l,1])},get hsl(){return[r.H,r.S,r.L]},set hsl(e){var t=o(e,3),a=t[0],n=t[1],l=t[2],s=[(0,i.limit)(a,0,360),(0,i.limit)(n,0,100),(0,i.limit)(l,0,100)];a=s[0],n=s[1],l=s[2],r.onValueChanged(v,[a,n,l,1])},get rgbhex(){return this.all.hex},get rgba(){return[r.R,r.G,r.B,r.A]},set rgba(e){var t=o(e,4),a=t[0],n=t[1],l=t[2],s=t[3],c=[(0,i.limit)(a,0,255),(0,i.limit)(n,0,255),(0,i.limit)(l,0,255),(0,i.limit)(s,0,1)];a=c[0],n=c[1],l=c[2],s=c[3],r.onValueChanged(g,[a,n,l,s])},get hsla(){return[r.H,r.S,r.L,r.A]},set hsla(e){var t=o(e,4),a=t[0],n=t[1],l=t[2],s=t[3],c=[(0,i.limit)(a,0,360),(0,i.limit)(n,0,100),(0,i.limit)(l,0,100),(0,i.limit)(s,0,1)];a=c[0],n=c[1],l=c[2],s=c[3],r.onValueChanged(v,[a,n,l,s])},get color(){return this.all.toString()},set color(e){r.onValueChanged(m,e)},setColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r.onValueChanged(m,e,{silent:t})},get all(){if(n){var e=[r.R,r.G,r.B,r.A],t=r.A<1?"rgba("+r.R+","+r.G+","+r.B+","+r.A+")":i.rgbToHex.apply(void 0,e);(l=(0,i.parseColor)(e,l)).toString=function(){return t},n=!1}return Object.assign({},l)},get onchange(){return a.change&&a.change.listeners[0]},set onchange(e){this.off("change").on("change",e)},get oncoloradd(){return a.coloradd&&a.coloradd.listeners[0]},set oncoloradd(e){this.off("coloradd").on("coloradd",e)},get oncolorremove(){return a.colorremove&&a.colorremove.listeners[0]},set oncolorremove(e){this.off("colorremove").on("colorremove",e)},get palette(){return Object.keys(r.palette).filter((function(e){return r.palette[e]}))},set palette(e){r.updatePalette(e)},show:function(){r.element.classList.remove("hidden")},hide:function(){r.element.classList.add("hidden")},toggle:function(){r.element.classList.toggle("hidden")},on:function(e,t){return e&&a[e]&&a[e].on(t),this},off:function(e,t){return e&&a[e]&&a[e].off(t),this},destroy:function(){a.change.off(),a.coloradd.off(),a.colorremove.off(),r.element.remove(),a=null,r=null}};return r.onchange=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n=!0,a.change.emit([s].concat(t),s)},r.oncoloradd=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];a.coloradd.emit([s].concat(t),s)},r.oncolorremove=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];a.colorremove.emit([s].concat(t),s)},r.element.ctrl=s,s}if("undefined"!=typeof window&&!document.querySelector('head>style[data-source="a-color-picker"]')){var x=r(5).toString(),R=document.createElement("style");R.setAttribute("type","text/css"),R.setAttribute("data-source","a-color-picker"),R.innerHTML=x,document.querySelector("head").appendChild(R)}t.createPicker=_,t.from=function(e,t){var r=function(e){return e?Array.isArray(e)?e:e instanceof HTMLElement?[e]:e instanceof NodeList?[].concat(p(e)):"string"==typeof e?[].concat(p(document.querySelectorAll(e))):e.jquery?e.get():[]:[]}(e).map((function(e,r){var a=_(e,t);return a.index=r,a}));return r.on=function(e,t){return r.forEach((function(r){return r.on(e,t)})),this},r.off=function(e){return r.forEach((function(t){return t.off(e)})),this},r},t.parseColorToRgb=i.parseColorToRgb,t.parseColorToRgba=i.parseColorToRgba,t.parseColorToHsl=i.parseColorToHsl,t.parseColorToHsla=i.parseColorToHsla,t.parseColor=i.parseColor,t.rgbToHex=i.rgbToHex,t.hslToRgb=i.hslToRgb,t.rgbToHsl=i.rgbToHsl,t.rgbToHsv=i.rgbToHsv,t.rgbToInt=i.rgbToInt,t.intToRgb=i.intToRgb,t.getLuminance=i.getLuminance,t.COLOR_NAMES=i.COLOR_NAMES,t.PALETTE_MATERIAL_500=i.PALETTE_MATERIAL_500,t.PALETTE_MATERIAL_CHROME=i.PALETTE_MATERIAL_CHROME,t.VERSION="1.2.1"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nvl=t.ensureArray=t.limit=t.getLuminance=t.parseColor=t.parseColorToHsla=t.parseColorToHsl=t.cssHslaToHsla=t.cssHslToHsl=t.parseColorToRgba=t.parseColorToRgb=t.cssRgbaToRgba=t.cssRgbToRgb=t.cssColorToRgba=t.cssColorToRgb=t.intToRgb=t.rgbToInt=t.rgbToHsv=t.rgbToHsl=t.hslToRgb=t.rgbToHex=t.PALETTE_MATERIAL_CHROME=t.PALETTE_MATERIAL_500=t.COLOR_NAMES=void 0;var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,o=!1,i=void 0;try{for(var n,l=e[Symbol.iterator]();!(a=(n=l.next()).done)&&(r.push(n.value),!t||r.length!==t);a=!0);}catch(e){o=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(e){return e&&e.__esModule?e:{default:e}}(r(0));function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var n={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4","indianred ":"#CD5C5C","indigo ":"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function l(e,t,r){return e=+e,isNaN(e)||e<t?t:e>r?r:e}function s(e,t){return null==e?t:e}function c(e,t,r){var a=[l(e,0,255),l(t,0,255),l(r,0,255)];return"#"+("000000"+((e=a[0])<<16|(t=a[1])<<8|(r=a[2])).toString(16)).slice(-6)}function p(e,t,r){var a=void 0,o=void 0,i=void 0,n=[l(e,0,360)/360,l(t,0,100)/100,l(r,0,100)/100];if(e=n[0],r=n[2],0==(t=n[1]))a=o=i=r;else{var s=function(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e},c=r<.5?r*(1+t):r+t-r*t,p=2*r-c;a=s(p,c,e+1/3),o=s(p,c,e),i=s(p,c,e-1/3)}return[255*a,255*o,255*i].map(Math.round)}function d(e,t,r){var a=[l(e,0,255)/255,l(t,0,255)/255,l(r,0,255)/255];e=a[0],t=a[1],r=a[2];var o=Math.max(e,t,r),i=Math.min(e,t,r),n=void 0,s=void 0,c=(o+i)/2;if(o==i)n=s=0;else{var p=o-i;switch(s=c>.5?p/(2-o-i):p/(o+i),o){case e:n=(t-r)/p+(t<r?6:0);break;case t:n=(r-e)/p+2;break;case r:n=(e-t)/p+4}n/=6}return[360*n,100*s,100*c].map(Math.round)}function u(e,t,r){return e<<16|t<<8|r}function h(e){if(e){var t=n[e.toString().toLowerCase()],r=/^\s*#?((([0-9A-F])([0-9A-F])([0-9A-F]))|(([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})))\s*$/i.exec(t||e)||[],o=a(r,10),i=o[3],l=o[4],s=o[5],c=o[7],p=o[8],d=o[9];if(void 0!==i)return[parseInt(i+i,16),parseInt(l+l,16),parseInt(s+s,16)];if(void 0!==c)return[parseInt(c,16),parseInt(p,16),parseInt(d,16)]}}function m(e){if(e){var t=n[e.toString().toLowerCase()],r=/^\s*#?((([0-9A-F])([0-9A-F])([0-9A-F])([0-9A-F])?)|(([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})?))\s*$/i.exec(t||e)||[],o=a(r,12),i=o[3],l=o[4],s=o[5],c=o[6],p=o[8],d=o[9],u=o[10],h=o[11];if(void 0!==i)return[parseInt(i+i,16),parseInt(l+l,16),parseInt(s+s,16),c?+(parseInt(c+c,16)/255).toFixed(2):1];if(void 0!==p)return[parseInt(p,16),parseInt(d,16),parseInt(u,16),h?+(parseInt(h,16)/255).toFixed(2):1]}}function g(e){if(e){var t=/^rgb\((\d+)[\s,](\d+)[\s,](\d+)\)/i.exec(e)||[],r=a(t,4),o=r[0],i=r[1],n=r[2],s=r[3];return o?[l(i,0,255),l(n,0,255),l(s,0,255)]:void 0}}function v(e){if(e){var t=/^rgba?\((\d+)\s*[\s,]\s*(\d+)\s*[\s,]\s*(\d+)(\s*[\s,]\s*(\d*(.\d+)?))?\)/i.exec(e)||[],r=a(t,6),o=r[0],i=r[1],n=r[2],c=r[3],p=r[5];return o?[l(i,0,255),l(n,0,255),l(c,0,255),l(s(p,1),0,1)]:void 0}}function f(e){if(Array.isArray(e))return[l(e[0],0,255),l(e[1],0,255),l(e[2],0,255),l(s(e[3],1),0,1)];var t=m(e)||v(e);return t&&3===t.length&&t.push(1),t}function b(e){if(e){var t=/^hsl\((\d+)[\s,](\d+)[\s,](\d+)\)/i.exec(e)||[],r=a(t,4),o=r[0],i=r[1],n=r[2],s=r[3];return o?[l(i,0,360),l(n,0,100),l(s,0,100)]:void 0}}function w(e){if(e){var t=/^hsla?\((\d+)\s*[\s,]\s*(\d+)\s*[\s,]\s*(\d+)(\s*[\s,]\s*(\d*(.\d+)?))?\)/i.exec(e)||[],r=a(t,6),o=r[0],i=r[1],n=r[2],c=r[3],p=r[5];return o?[l(i,0,255),l(n,0,255),l(c,0,255),l(s(p,1),0,1)]:void 0}}function y(e){if(Array.isArray(e))return[l(e[0],0,360),l(e[1],0,100),l(e[2],0,100),l(s(e[3],1),0,1)];var t=w(e);return t&&3===t.length&&t.push(1),t}function k(e,t){switch(t){case"rgb":default:return e.slice(0,3);case"rgbcss":return"rgb("+e[0]+", "+e[1]+", "+e[2]+")";case"rgbcss4":return"rgb("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")";case"rgba":return e;case"rgbacss":return"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")";case"hsl":return d.apply(void 0,i(e));case"hslcss":return"hsl("+(e=d.apply(void 0,i(e)))[0]+", "+e[1]+", "+e[2]+")";case"hslcss4":var r=d.apply(void 0,i(e));return"hsl("+r[0]+", "+r[1]+", "+r[2]+", "+e[3]+")";case"hsla":return[].concat(i(d.apply(void 0,i(e))),[e[3]]);case"hslacss":var a=d.apply(void 0,i(e));return"hsla("+a[0]+", "+a[1]+", "+a[2]+", "+e[3]+")";case"hex":return c.apply(void 0,i(e));case"hexcss4":return c.apply(void 0,i(e))+("00"+parseInt(255*e[3]).toString(16)).slice(-2);case"int":return u.apply(void 0,i(e))}}t.COLOR_NAMES=n,t.PALETTE_MATERIAL_500=["#F44336","#E91E63","#E91E63","#9C27B0","#9C27B0","#673AB7","#673AB7","#3F51B5","#3F51B5","#2196F3","#2196F3","#03A9F4","#03A9F4","#00BCD4","#00BCD4","#009688","#009688","#4CAF50","#4CAF50","#8BC34A","#8BC34A","#CDDC39","#CDDC39","#FFEB3B","#FFEB3B","#FFC107","#FFC107","#FF9800","#FF9800","#FF5722","#FF5722","#795548","#795548","#9E9E9E","#9E9E9E","#607D8B","#607D8B"],t.PALETTE_MATERIAL_CHROME=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#9e9e9e","#607d8b"],t.rgbToHex=c,t.hslToRgb=p,t.rgbToHsl=d,t.rgbToHsv=function(e,t,r){var a=[l(e,0,255)/255,l(t,0,255)/255,l(r,0,255)/255];e=a[0],t=a[1],r=a[2];var o,i=Math.max(e,t,r),n=Math.min(e,t,r),s=void 0,c=i,p=i-n;if(o=0===i?0:p/i,i==n)s=0;else{switch(i){case e:s=(t-r)/p+(t<r?6:0);break;case t:s=(r-e)/p+2;break;case r:s=(e-t)/p+4}s/=6}return[s,o,c]},t.rgbToInt=u,t.intToRgb=function(e){return[e>>16&255,e>>8&255,255&e]},t.cssColorToRgb=h,t.cssColorToRgba=m,t.cssRgbToRgb=g,t.cssRgbaToRgba=v,t.parseColorToRgb=function(e){return Array.isArray(e)?e=[l(e[0],0,255),l(e[1],0,255),l(e[2],0,255)]:h(e)||g(e)},t.parseColorToRgba=f,t.cssHslToHsl=b,t.cssHslaToHsla=w,t.parseColorToHsl=function(e){return Array.isArray(e)?e=[l(e[0],0,360),l(e[1],0,100),l(e[2],0,100)]:b(e)},t.parseColorToHsla=y,t.parseColor=function(e,t){if(t=t||"rgb",null!=e){var r=void 0;if((r=f(e))||(r=y(e))&&(r=[].concat(i(p.apply(void 0,i(r))),[r[3]])))return(0,o.default)(t)?["rgb","rgbcss","rgbcss4","rgba","rgbacss","hsl","hslcss","hslcss4","hsla","hslacss","hex","hexcss4","int"].reduce((function(e,t){return e[t]=k(r,t),e}),t||{}):k(r,t.toString().toLowerCase())}},t.getLuminance=function(e,t,r){return.2126*(e=(e/=255)<.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t=(t/=255)<.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*((r/=255)<.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},t.limit=l,t.ensureArray=function(e){return e?Array.from(e):[]},t.nvl=s},function(e,t,r){"use strict";e.exports=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}},function(e,t){e.exports='<div class="a-color-picker-row a-color-picker-stack a-color-picker-row-top"> <canvas class="a-color-picker-sl a-color-picker-transparent"></canvas> <div class=a-color-picker-dot></div> </div> <div class=a-color-picker-row> <div class="a-color-picker-stack a-color-picker-transparent a-color-picker-circle"> <div class=a-color-picker-preview> <input class=a-color-picker-clipbaord type=text> </div> </div> <div class=a-color-picker-column> <div class="a-color-picker-cell a-color-picker-stack"> <canvas class=a-color-picker-h></canvas> <div class=a-color-picker-dot></div> </div> <div class="a-color-picker-cell a-color-picker-alpha a-color-picker-stack" show-on-alpha> <canvas class="a-color-picker-a a-color-picker-transparent"></canvas> <div class=a-color-picker-dot></div> </div> </div> </div> <div class="a-color-picker-row a-color-picker-hsl" show-on-hsl> <label>H</label> <input nameref=H type=number maxlength=3 min=0 max=360 value=0> <label>S</label> <input nameref=S type=number maxlength=3 min=0 max=100 value=0> <label>L</label> <input nameref=L type=number maxlength=3 min=0 max=100 value=0> </div> <div class="a-color-picker-row a-color-picker-rgb" show-on-rgb> <label>R</label> <input nameref=R type=number maxlength=3 min=0 max=255 value=0> <label>G</label> <input nameref=G type=number maxlength=3 min=0 max=255 value=0> <label>B</label> <input nameref=B type=number maxlength=3 min=0 max=255 value=0> </div> <div class="a-color-picker-row a-color-picker-rgbhex a-color-picker-single-input" show-on-single-input> <label>HEX</label> <input nameref=RGBHEX type=text select-on-focus> </div> <div class="a-color-picker-row a-color-picker-palette"></div>'},function(e,t,r){var a=r(6);e.exports="string"==typeof a?a:a.toString()},function(e,t,r){(e.exports=r(7)(!1)).push([e.i,"/*!\n * a-color-picker\n * https://github.com/narsenico/a-color-picker\n *\n * Copyright (c) 2017-2018, Gianfranco Caldi.\n * Released under the MIT License.\n */.a-color-picker{background-color:#fff;padding:0;display:inline-flex;flex-direction:column;user-select:none;width:232px;font:400 10px Helvetica,Arial,sans-serif;border-radius:3px;box-shadow:0 0 0 1px rgba(0,0,0,.05),0 2px 4px rgba(0,0,0,.25)}.a-color-picker,.a-color-picker-row,.a-color-picker input{box-sizing:border-box}.a-color-picker-row{padding:15px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;user-select:none}.a-color-picker-row-top{padding:0}.a-color-picker-row:not(:first-child){border-top:1px solid #f5f5f5}.a-color-picker-column{display:flex;flex-direction:column}.a-color-picker-cell{flex:1 1 auto;margin-bottom:4px}.a-color-picker-cell:last-child{margin-bottom:0}.a-color-picker-stack{position:relative}.a-color-picker-dot{position:absolute;width:14px;height:14px;top:0;left:0;background:#fff;pointer-events:none;border-radius:50px;z-index:1000;box-shadow:0 1px 2px rgba(0,0,0,.75)}.a-color-picker-a,.a-color-picker-h,.a-color-picker-sl{cursor:cell}.a-color-picker-a+.a-color-picker-dot,.a-color-picker-h+.a-color-picker-dot{top:-2px}.a-color-picker-a,.a-color-picker-h{border-radius:2px}.a-color-picker-preview{box-sizing:border-box;width:30px;height:30px;user-select:none;border-radius:15px}.a-color-picker-circle{border-radius:50px;border:1px solid #eee}.a-color-picker-hsl,.a-color-picker-rgb,.a-color-picker-single-input{justify-content:space-evenly}.a-color-picker-hsl>label,.a-color-picker-rgb>label,.a-color-picker-single-input>label{padding:0 8px;flex:0 0 auto;color:#969696}.a-color-picker-hsl>input,.a-color-picker-rgb>input,.a-color-picker-single-input>input{text-align:center;padding:2px 0;width:0;flex:1 1 auto;border:1px solid #e0e0e0;line-height:20px}.a-color-picker-hsl>input::-webkit-inner-spin-button,.a-color-picker-rgb>input::-webkit-inner-spin-button,.a-color-picker-single-input>input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.a-color-picker-hsl>input:focus,.a-color-picker-rgb>input:focus,.a-color-picker-single-input>input:focus{border-color:#04a9f4;outline:none}.a-color-picker-transparent{background-image:linear-gradient(-45deg,#cdcdcd 25%,transparent 0),linear-gradient(45deg,#cdcdcd 25%,transparent 0),linear-gradient(-45deg,transparent 75%,#cdcdcd 0),linear-gradient(45deg,transparent 75%,#cdcdcd 0);background-size:11px 11px;background-position:0 0,0 -5.5px,-5.5px 5.5px,5.5px 0}.a-color-picker-sl{border-radius:3px 3px 0 0}.a-color-picker.hide-alpha [show-on-alpha],.a-color-picker.hide-hsl [show-on-hsl],.a-color-picker.hide-rgb [show-on-rgb],.a-color-picker.hide-single-input [show-on-single-input]{display:none}.a-color-picker-clipbaord{width:100%;height:100%;opacity:0;cursor:pointer}.a-color-picker-palette{flex-flow:wrap;flex-direction:row;justify-content:flex-start;padding:10px}.a-color-picker-palette-color{width:15px;height:15px;flex:0 1 15px;margin:3px;box-sizing:border-box;cursor:pointer;border-radius:3px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.1)}.a-color-picker-palette-add{text-align:center;line-height:13px;color:#607d8b}.a-color-picker.hidden{display:none}",""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",a=e[3];if(!a)return r;if(t&&"function"==typeof btoa){var o=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(a),i=a.sources.map((function(e){return"/*# sourceURL="+a.sourceRoot+e+" */"}));return[r].concat(i).concat([o]).join("\n")}return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r})).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(a[i]=!0)}for(o=0;o<e.length;o++){var n=e[o];"number"==typeof n[0]&&a[n[0]]||(r&&!n[2]?n[2]=r:r&&(n[2]="("+n[2]+") and ("+r+")"),t.push(n))}},t}}])}},t={};function r(a){var o=t[a];if(void 0!==o)return o.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,r),i.exports}!function(){"use strict";r(8490);const{__:e}=wp.i18n;const{__:t}=wp.i18n;const{__:a}=wp.i18n;var o;window.TWER={};let i={};String.prototype.splice||(String.prototype.splice=function(e,t,r){return this.slice(0,e)+r+this.slice(e+Math.abs(t))}),jQuery.noConflict(),function(e){e((function(){const t=e("#treweler-camera-bearing"),r=e("#treweler-camera-pitch"),a=e("#treweler-camera-initial-pitch"),n=e("#treweler-camera-initial-pitch-range"),l=e("#treweler-camera-initial-bearing"),s=e("#treweler-camera-initial-bearing-range"),c=(e("#treweler-camera-min-pitch-range"),e("#range-treweler-camera-pitch-mr")),p=(e("#treweler-camera-max-pitch-range"),e("#range-treweler-camera-pitch-mr-right")),d=new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:!0},showAccuracyCircle:!1,trackUserLocation:!0,showUserHeading:!0});e("#map").length&&(function(){let t=""!=e("#latitude").val().trim()?e("#latitude").val().trim():"0.1",n=""!=e("#longitude").val().trim()?e("#longitude").val().trim():"0.1",s=""!=e("#setZoom").val().trim()?e("#setZoom").val():0,u=0!=parseFloat(e("#setZoom_min_range").val())?parseFloat(e("#setZoom_min_range").val()):0,h=0!=parseFloat(e("#setZoom_max_range").val())?parseFloat(e("#setZoom_max_range").val()):24,m=0!=parseInt(a.val())?parseFloat(a.val()).toFixed(2):0,g=0!=parseInt(l.val())?parseFloat(l.val()).toFixed(2):0,v=r.prop("checked")?parseFloat(c.val()).toFixed(2):0,f=r.prop("checked")?parseFloat(p.val()).toFixed(2):85,b=""!=e("#custom_style").val().trim()?e("#custom_style").val():e("#map_styles").val(),w=e("#map_light_preset").val();const y=document.getElementById("twer-wordmark-position"),k=document.getElementById("twer-attribution-position"),E=document.getElementById("twer-compact-attribution"),_=document.getElementById("treweler_map_projection");"0"===n&&(n=.1),"0"===t&&(t=.1),mapboxgl.accessToken=twer_ajax.api_key,TWER.map=new mapboxgl.Map({container:"map",style:b,center:[n,t],minZoom:u,maxZoom:h,zoom:s,bearing:g,pitch:m,maxPitch:f,minPitch:v,attributionControl:!1,logoPosition:y.options[y.selectedIndex].value,projection:{name:_.value}}),new class{constructor(){var e,t;t={place_labels:"showPlaceLabels",road_labels:"showRoadLabels",points_of_interest:"showPointOfInterestLabels",transit_labels:"showTransitLabels"},(e="layerMappings")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t,this.mapStylesElement=document.getElementById("map_styles"),this.layersTypes=["showPlaceLabels","showRoadLabels","showPointOfInterestLabels","showTransitLabels"],TWER.map.on("style.load",(()=>{this.handleStyleLoad()})),this.mapStylesElement.addEventListener("change",(e=>{this.toggleLayerSettings()})),document.addEventListener("change",(e=>{e.target.name.startsWith("_treweler_map_layers")&&this.handleStyleLoad()})),this.toggleLayerSettings()}toggleLayerSettings(){const e=this.mapStylesElement.value,t=document.querySelectorAll('input[name^="_treweler_map_layers"]'),r=document.getElementById("twer-nav-layers-tab");"mapbox://styles/mapbox/navigation-guidance-day-v4"===e||"mapbox://styles/mapbox/navigation-guidance-night-v4"===e||""!==jQuery("#custom_style").val().trim()?(r.classList.add("d-none"),jQuery("#twer-nav-general-tab").tab("show")):r.classList.remove("d-none"),[...t].map((t=>{"mapbox://styles/mapbox/standard-beta"===e?this.layerMappings[t.value]?("place_labels"===t.value&&t.closest(".section-treweler-map-layers").classList.add("is-first-row"),t.closest(".section-treweler-map-layers").classList.remove("d-none")):t.closest(".section-treweler-map-layers").classList.add("d-none"):"mapbox://styles/mapbox/navigation-guidance-day-v4"===e||"mapbox://styles/mapbox/navigation-guidance-night-v4"===e?t.checked=!0:(t.closest(".section-treweler-map-layers").classList.remove("is-first-row"),t.closest(".section-treweler-map-layers").classList.remove("d-none"))}))}getCheckboxValues(){return[...document.querySelectorAll('input[name^="_treweler_map_layers"]:checked')].map((e=>this.layerMappings[e.value]||e.value))}setLayerVisibility(e,t){TWER.map.setLayoutProperty(e,"visibility",t?"visible":"none")}updateLayerVisibility(e,t,r){e.forEach((e=>{this.setLayerVisibility(e,t.includes(r))}))}handleStyleLoad(){const e=this.getCheckboxValues();"mapbox://styles/mapbox/standard-beta"===this.mapStylesElement.value?this.layersTypes.forEach((t=>{TWER.map.setConfigProperty("basemap",t,e.includes(t))})):""===jQuery("#custom_style").val().trim()&&this.updateMapLayers()}updateMapLayers(){const e=this.getCheckboxValues(),t={showPlaceLabels:["continent-label","country-label","state-label","settlement-major-label","settlement-minor-label","settlement-subdivision-label"],showRoadLabels:["road-exit-shield","road-label-simple","road-exit-shield-navigation","road-number-shield","road-number-shield-navigation","road-label-navigation","road-label","road-intersection"],showPointOfInterestLabels:["poi-label"],showTransitLabels:["airport-label","transit-label","ferry-aerialway-label"],boundaries:["admin-0-boundary-disputed","admin-0-boundary","admin-1-boundary","admin-0-boundary-bg","admin-1-boundary-bg"],building_labels:["block-number-label","building-number-label","building-entrance"],buildings:["building","building-underground","building-outline"],natural_features:["water-point-label","water-line-label","natural-point-label","natural-line-label","waterway-label"],pedestrian_labels:["golf-hole-label","path-pedestrian-label"],pedestrian_roads:["bridge-pedestrian","bridge-steps","bridge-path","bridge-pedestrian-case","bridge-steps-bg","bridge-path-bg","golf-hole-line","road-pedestrian","road-steps","road-path","road-pedestrian-case","road-steps-bg","road-path-bg","road-pedestrian-polygon-pattern","road-pedestrian-polygon-fill","tunnel-pedestrian","tunnel-steps","tunnel-path","gate-label","bridge-path-cycleway-piste","bridge-path-trail","road-path-cycleway-piste","road-path-trail","tunnel-path-cycleway-piste","tunnel-path-trail"],transit:["aerialway","bridge-rail-tracks","bridge-rail","road-rail-tracks","road-rail","ferry-auto","ferry","aeroway-line","aeroway-polygon"],roads:["bridge-oneway-arrow-white","bridge-oneway-arrow-blue","bridge-motorway-trunk-2","bridge-major-link-2","bridge-motorway-trunk-2-case","bridge-major-link-2-case","bridge-motorway-trunk","bridge-primary","bridge-secondary-tertiary","bridge-street-low","bridge-street","bridge-major-link","bridge-minor-link","bridge-minor","bridge-construction","bridge-motorway-trunk-case","bridge-major-link-case","bridge-primary-case","bridge-secondary-tertiary-case","bridge-minor-link-case","bridge-street-case","bridge-minor-case","crosswalks","road-oneway-arrow-white","road-oneway-arrow-blue","level-crossing","road-motorway-trunk","road-primary","road-secondary-tertiary","road-street-low","road-street","road-major-link","road-minor-link","road-minor","road-construction","turning-feature","road-motorway-trunk-case","road-major-link-case","road-primary-case","road-secondary-tertiary-case","road-minor-link-case","road-street-case","road-minor-case","turning-feature-outline","road-polygon","tunnel-oneway-arrow-white","tunnel-oneway-arrow-blue","tunnel-motorway-trunk","tunnel-primary","tunnel-secondary-tertiary","tunnel-street-low","tunnel-street","tunnel-major-link","tunnel-minor-link","tunnel-minor","tunnel-construction","tunnel-motorway-trunk-case","tunnel-major-link-case","tunnel-primary-case","tunnel-secondary-tertiary-case","tunnel-minor-link-case","tunnel-street-case","tunnel-minor-case","bridge-simple","bridge-case-simple","road-simple","tunnel-simple","incident-startpoints-navigation","incident-endpoints-navigation","incident-closure-line-highlights-navigation","incident-closure-lines-navigation","traffic-bridge-oneway-arrow-white-navigation","traffic-bridge-oneway-arrow-blue-navigation","traffic-road-oneway-arrow-white-navigation","traffic-road-oneway-arrow-blue-navigation","traffic-tunnel-oneway-arrow-white-navigation","traffic-tunnel-oneway-arrow-blue-navigation","traffic-level-crossing-navigation","traffic-bridge-road-motorway-trunk-navigation","traffic-bridge-road-motorway-trunk-case-navigation","traffic-bridge-road-major-link-navigation","traffic-bridge-road-primary-navigation","traffic-bridge-road-secondary-tertiary-navigation","traffic-bridge-road-street-navigation","traffic-bridge-road-minor-navigation","traffic-bridge-road-link-navigation","bridge-motorway-trunk-2-navigation","bridge-major-link-2-navigation","bridge-motorway-trunk-2-case-navigation","bridge-major-link-2-case-navigation","bridge-motorway-trunk-navigation","bridge-primary-navigation","bridge-secondary-tertiary-navigation","bridge-street-navigation","bridge-minor-navigation","bridge-major-link-navigation","bridge-construction-navigation","bridge-motorway-trunk-case-navigation","bridge-major-link-case-navigation","bridge-primary-case-navigation","bridge-secondary-tertiary-case-navigation","bridge-street-case-navigation","bridge-street-low-navigation","bridge-minor-case-navigation","turning-feature-navigation","level-crossing-navigation","traffic-tunnel-motorway-trunk-navigation","road-motorway-trunk-navigation","traffic-tunnel-major-link-navigation","road-motorway-trunk-case-low-navigation","traffic-tunnel-primary-navigation","road-primary-navigation","traffic-tunnel-secondary-tertiary-navigation","road-secondary-tertiary-navigation","traffic-tunnel-street-navigation","road-street-navigation","traffic-tunnel-minor-navigation","traffic-tunnel-link-navigation","road-minor-navigation","road-major-link-navigation","road-construction-navigation","road-motorway-trunk-case-navigation","road-major-link-case-navigation","road-primary-case-navigation","road-secondary-tertiary-case-navigation","road-street-case-navigation","road-street-low-navigation","road-minor-case-navigation","turning-feature-outline-navigation","tunnel-motorway-trunk-navigation","tunnel-primary-navigation","tunnel-secondary-tertiary-navigation","tunnel-street-navigation","tunnel-minor-navigation","tunnel-major-link-navigation","tunnel-construction-navigation","tunnel-motorway-trunk-case-navigation","tunnel-major-link-case-navigation","tunnel-primary-case-navigation","tunnel-secondary-tertiary-case-navigation","tunnel-street-case-navigation","tunnel-street-low-navigation","tunnel-minor-case-navigation"],land_structure:["land-structure-line","land-structure-polygon","pitch-outline","landuse","national-park","landcover","national-park_tint-band","cliff","wetland-pattern","wetland"],hillshade:["hillshade"],water_depth:["water-depth"],contour_lines:["contour-label","contour-line"]};TWER.map.getStyle().layers.map((r=>{for(const[a,o]of Object.entries(t))if(o.includes(r.id)){this.setLayerVisibility(r.id,e.includes(a));break}}))}},TWER.map.on("style.load",(()=>{TWER.map.setFog({}),"mapbox://styles/mapbox/standard-beta"===e("#map_styles").val()&&""===e("#custom_style").val().trim()&&TWER.map.setConfigProperty("basemap","lightPreset",w)})),_.addEventListener("change",(e=>{TWER.map.setProjection(e.target.value)}));let x=[],R=[],C=new Set;function T(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r="main"in t?t.main:e("#treweler-boundaries-fill-main .input-color").val(),a="hover"in t?t.hover:e("#treweler-boundaries-fill-hover .input-color").val(),o="select"in t?t.select:e("#treweler-boundaries-fill-selected .input-color").val();R=R.length>0?R:e("#treweler-boundaries-regions-custom-colors").val().trim(),Array.isArray(R)||(""===R&&(R="[]"),R=JSON.parse(R));const i=["match",["feature-state","action"],"hover",a,"select",o,"unselect",a,"unhover",r,r];if(R.length>0){let e=0;for(let t=0;t<R.length;t++)if(R[t].active){let r=2+e,a=3+e;i.splice(r,0,`customize_${R[t].id}`),i.splice(a,0,R[t].color),e+=2}}return i}function F(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="action"in t&&t.action,a=T(t);for(let t in i)if(TWER.map.setPaintProperty(`boundaries-${t}-layer`,"fill-color",a),r){let a=r;"customize"===r&&(a=`customize_${e}`),TWER.map.setFeatureState({source:t,id:e},{action:a})}}const A=e("#world_copy").prop("checked");function S(t){const r=[],a={};["bg-layer","boundaries-very_high-layer","boundaries-high-layer","boundaries-low-layer","boundaries-very_low-layer","boundaries-medium-layer","boundaries-very_high-line-layer","boundaries-high-line-layer","boundaries-low-line-layer","boundaries-very_low-line-layer","boundaries-medium-line-layer"].forEach((e=>{var t,o;t=e,o=e=>{e.source&&(a[e.source]=TWER.map.getSource(e.source).serialize()),r.push(e)},TWER.map.getStyle().layers.forEach((e=>{e.id.includes(t)&&o(e)}))})),TWER.map.setStyle(t),setTimeout((()=>{if(Object.entries(a).forEach((e=>{let[t,r]=e;TWER.map.addSource(t,r)})),r.length>0&&r.forEach((e=>{TWER.map.getLayer(e.id)||TWER.map.addLayer(e)})),x.length>0)for(let e=0;e<x.length;e++)for(let t in i)TWER.map.setFeatureState({source:t,id:x[e]},{action:"select"});else e("#treweler-boundaries").prop("checked")&&(function(){if(x=x.length>0?x:e("#treweler-boundaries-regions-selected").val().trim(),Array.isArray(x)||(""===x&&(x="[]"),x=JSON.parse(x)),R=R.length>0?R:e("#treweler-boundaries-regions-custom-colors").val().trim(),Array.isArray(R)||(""===R&&(R="[]"),R=JSON.parse(R)),x.length>0)for(let e=0;e<x.length;e++)F(x[e],{action:"select"});if(R.length>0)for(let e=0;e<R.length;e++)R[e].active&&x.includes(R[e].id)&&F(R[e].id,{action:"customize"})}(),function(){C=0!==C.size?C:e("#treweler-boundaries-regions-hide").val().trim(),"string"==typeof C&&(""===C&&(C="[]"),C=new Set(JSON.parse(C)));const t=function(e){if(!e)return!1;const[t,r="",a="",o=""]=e.split("_");return{column:t.toUpperCase().replace(/ /g,"_"),value:r,admin:a.toUpperCase().replace(/ /g,"_"),admin_num:parseInt(o)}}(e("#treweler-boundaries-regions").val());let r=["all"];if("world"!==e("#treweler-boundaries-regions").val()&&(r.push(["==",t.column,t.value]),""!==t.admin&&r.push(["==",t.admin,t.admin_num])),0!==C.size){C.forEach((e=>{r.push(["!=","NAME",e])}));for(let e in i)TWER.map.setFilter(`boundaries-${e}-layer`,r),TWER.map.setFilter(`boundaries-${e}-line-layer`,r)}}())}),1e3)}function L(t){void 0===t&&(t=e("#treweler-restrict-panning").prop("checked")),t?e(".section-treweler-restrict-panning-southwest, .section-treweler-restrict-panning-northeast").css("display","table-row"):e(".section-treweler-restrict-panning-southwest, .section-treweler-restrict-panning-northeast").css("display","none")}if(TWER.map.setRenderWorldCopies(A),e("#world_copy").on("change",(function(){TWER.map.setRenderWorldCopies(e(this).prop("checked"))})),TWER.map.on("load",(async()=>{let t=e("#overlay-style-map").val();TWER.map.addLayer({id:"bg-layer",type:"background",paint:{"background-color":t}})})),e("#map_styles").on("change",(function(){""===e("#custom_style").val().trim()&&(S(e(this).val()),"mapbox://styles/mapbox/standard-beta"===e("#map_styles").val()?e("#map_light_preset").closest(".js-twer-row").removeClass("d-none"):e("#map_light_preset").closest(".js-twer-row").addClass("d-none"),"mapbox://styles/mapbox/standard-beta"===e("#map_styles").val()&&TWER.map.setConfigProperty("basemap","lightPreset",e("#map_light_preset").val()))})),e("#custom_style").on("change",(function(){let t=e(this).val();""===t.trim()?(t=e("#map_styles").val(),e("#twer-nav-layers-tab").removeClass("d-none")):(e("#twer-nav-layers-tab").addClass("d-none"),e("#twer-nav-general-tab").tab("show")),S(t),e("#map_light_preset").closest(".js-twer-row").addClass("d-none")})),e("#map_light_preset").on("change",(function(){"mapbox://styles/mapbox/standard-beta"===e("#map_styles").val()&&""===e("#custom_style").val().trim()&&TWER.map.setConfigProperty("basemap","lightPreset",e("#map_light_preset").val())})),e(document).on("change","#treweler-restrict-panning",(e=>{L(e.target.checked)})),L(),TWER.map.on("zoom",(function(){if(e("#latlng_map_prev").prop("checked")){let t=TWER.map.getCenter();e("#longitude").val(t.lng),e("#latitude").val(t.lat)}if(e("#zoom_map_prev").prop("checked")){let t=parseFloat(TWER.map.getZoom()).toFixed(2);""!=t.trim()&&"NaN"!=t.trim()&&0!=t&&.23!=t||(t=0),e("#setZoom_range").val(t),e("#setZoom").val(t)}})),TWER.map.addControl(new mapboxgl.AttributionControl({compact:E.checked}),k.options[k.selectedIndex].value),e("#treweler-map-controls-distance-scale").length&&e("#treweler-map-controls-distance-scale").prop("checked")){const t=e("#treweler-map-controls-distance-unit").val();TWER.map.addControl(new mapboxgl.ScaleControl({maxWidth:100,unit:t||"imperial"}),e("#treweler-map-controls-distance-position").val())}e("#treweler-map-controls-fullscreen").length&&e("#treweler-map-controls-fullscreen").prop("checked")&&TWER.map.addControl(new mapboxgl.FullscreenControl,e("#treweler-map-controls-fullscreen-position").val()),e("#treweler-map-controls-search").length&&e("#treweler-map-controls-search").prop("checked")&&(TWER.map.addControl(o=new MapboxGeocoder({accessToken:mapboxgl.accessToken,zoom:14,placeholder:"Enter search...",mapboxgl:mapboxgl,marker:!1}),e("#treweler-map-controls-search-position").val()),o.on("result",(function(t){let r=t.result.center;e("#latitude").val(r[1]),e("#longitude").val(r[0])}))),e("#treweler-map-controls-zoom-pan").length&&e("#treweler-map-controls-zoom-pan").prop("checked")&&TWER.map.addControl(new mapboxgl.NavigationControl,e("#treweler-map-controls-zoom-pan-position").val()),e("#treweler-map-controls-geolocate").length&&e("#treweler-map-controls-geolocate").prop("checked")&&(TWER.map.addControl(d,e("#treweler-map-controls-geolocate-position").val()),"treweler-style"===e("#treweler-map-controls-geolocate-style").val()?d._container.classList.add("twer-geolocation-control"):d._container.classList.remove("twer-geolocation-control")),e("#latlng_map_prev").length&&e("#latlng_map_prev").prop("checked")?(e("#latitude").attr("readonly","readonly"),e("#longitude").attr("readonly","readonly"),TWER.map.dragPan.enable(),TWER.map.dragRotate.enable(),TWER.map.on("drag",(function(){let t=TWER.map.getCenter();e("#longitude").val(t.lng),e("#latitude").val(t.lat)}))):(e("#latitude").removeAttr("readonly"),e("#longitude").removeAttr("readonly"),TWER.map.dragPan.disable(),TWER.map.dragRotate.disable()),e("#zoom_map_prev").length&&e("#zoom_map_prev").prop("checked")?(e("#setZoom_range").attr("disabled","disabled"),e("#setZoom").attr("readonly","readonly"),TWER.map.doubleClickZoom.enable(),TWER.map.scrollZoom.enable(),!e("#latlng_map_prev").prop("checked")&&e("#zoom_map_prev").prop("checked")&&(TWER.map.on("wheel",(function(t){let r=parseFloat(TWER.map.getZoom()).toFixed(2),a=parseFloat(e("#latitude").val()),o=parseFloat(e("#longitude").val());TWER.map.scrollZoom.setWheelZoomRate(1),TWER.map.zoomTo(r,{center:[o,a]})})),TWER.map.on("dblclick",(function(t){if(!e("#latlng_map_prev").prop("checked")&&e("#zoom_map_prev").prop("checked")){t.preventDefault();let r=parseInt(TWER.map.getZoom()),a=parseFloat(e("#latitude").val()),o=parseFloat(e("#longitude").val());e("#setZoom").val(r),e("#setZoom_range").val(r),t.lngLat.lng=o,t.lngLat.lat=a,t._defaultPrevented=!1,TWER.map.doubleClickZoom.enable(),TWER.map.zoomTo(r,{center:[o,a]})}})))):(e("#setZoom_range").removeAttr("disabled"),e("#setZoom").removeAttr("readonly"),TWER.map.doubleClickZoom.disable(),TWER.map.scrollZoom.disable())}(),e(".section-treweler-map-controls select").on("change",(function(){const t=e(this).val();switch(e(this).attr("id")){case"treweler-map-controls-distance-position":e("#treweler-map-controls-distance-scale").prop("checked")&&TWER.map._controls.forEach(((r,a)=>{if("ScaleControl"===r.constructor.name){e(TWER.map._container).find(".mapboxgl-ctrl-scale").remove();const r=e("#treweler-map-controls-distance-unit").val();console.log(r),TWER.map.addControl(new mapboxgl.ScaleControl({maxWidth:100,unit:r||"imperial"}),t)}}));break;case"treweler-map-controls-fullscreen-position":e("#treweler-map-controls-fullscreen").prop("checked")&&TWER.map._controls.forEach(((r,a)=>{"FullscreenControl"===r.constructor.name&&(e(TWER.map._container).find(".mapboxgl-ctrl-fullscreen").parent(".mapboxgl-ctrl-group").remove(),TWER.map.addControl(new mapboxgl.FullscreenControl,t))}));break;case"treweler-map-controls-search-position":if(e("#treweler-map-controls-search").prop("checked")){e(TWER.map._container).find(".mapboxgl-ctrl-geocoder").remove();var r=new MapboxGeocoder({accessToken:mapboxgl.accessToken,zoom:14,placeholder:"Enter search...",mapboxgl:mapboxgl,marker:!1});TWER.map.addControl(r,t),r.on("result",(function(t){let r=t.result.center;e("#latitude").val(r[1]),e("#longitude").val(r[0])}))}break;case"treweler-map-controls-zoom-pan-position":e("#treweler-map-controls-zoom-pan").prop("checked")&&TWER.map._controls.forEach(((r,a)=>{"NavigationControl"===r.constructor.name&&(e(TWER.map._container).find(".mapboxgl-ctrl-zoom-in").parent(".mapboxgl-ctrl-group").remove(),TWER.map.addControl(new mapboxgl.NavigationControl,t))}));break;case"treweler-map-controls-geolocate-position":e("#treweler-map-controls-geolocate").prop("checked")&&(TWER.map.removeControl(d),TWER.map.addControl(d,t),"treweler-style"===e("#treweler-map-controls-geolocate-style").val()?d._container.classList.add("twer-geolocation-control"):d._container.classList.remove("twer-geolocation-control"));break;case"treweler-map-controls-geolocate-style":e("#treweler-map-controls-geolocate").prop("checked")&&("treweler-style"===e("#treweler-map-controls-geolocate-style").val()?e(".mapboxgl-ctrl-geolocate").parent().addClass("twer-geolocation-control"):e(".mapboxgl-ctrl-geolocate").parent().removeClass("twer-geolocation-control"))}})),e("#treweler-map-controls-distance-unit").on("change",(function(){const t=e(this).val();e("#treweler-map-controls-distance-scale").prop("checked")&&TWER.map._controls.forEach(((r,a)=>{"ScaleControl"===r.constructor.name&&(e(TWER.map._container).find(".mapboxgl-ctrl-scale").remove(),TWER.map.addControl(new mapboxgl.ScaleControl({maxWidth:100,unit:t||"imperial"}),e("#treweler-map-controls-distance-position").val()))}))})),e('input[type="checkbox"]').on("change",(function(){if("distance_scale"===e(this).val()){const r=e("#treweler-map-controls-distance-unit").val();console.log(r);var t=new mapboxgl.ScaleControl({maxWidth:100,unit:r||"imperial"});e(this).prop("checked")?TWER.map.addControl(t,e("#treweler-map-controls-distance-position").val()):e(TWER.map._container).find(".mapboxgl-ctrl-scale").remove()}if("fullscreen"===e(this).val()){var r=new mapboxgl.FullscreenControl;e(this).prop("checked")?TWER.map.addControl(r,e("#treweler-map-controls-fullscreen-position").val()):e(TWER.map._container).find(".mapboxgl-ctrl-fullscreen").parent(".mapboxgl-ctrl-group").remove()}if("search"===e(this).val())if(e(this).prop("checked")){var a=new MapboxGeocoder({accessToken:mapboxgl.accessToken,zoom:14,placeholder:"Enter search...",mapboxgl:mapboxgl,marker:!1});TWER.map.addControl(a,e("#treweler-map-controls-search-position").val()),a.on("result",(function(t){let r=t.result.center;e("#latitude").val(r[1]),e("#longitude").val(r[0])}))}else e(TWER.map._container).find(".mapboxgl-ctrl-geocoder").remove();if("zoom_pan"===e(this).val()){var o=new mapboxgl.NavigationControl;e(this).prop("checked")?TWER.map.addControl(o,e("#treweler-map-controls-zoom-pan-position").val()):e(TWER.map._container).find(".mapboxgl-ctrl-zoom-in").parent(".mapboxgl-ctrl-group").remove()}"geolocate"===e(this).val()&&(e(this).prop("checked")?(TWER.map.addControl(d,e("#treweler-map-controls-geolocate-position").val()),"treweler-style"===e("#treweler-map-controls-geolocate-style").val()?d._container.classList.add("twer-geolocation-control"):d._container.classList.remove("twer-geolocation-control")):TWER.map.removeControl(d))})),e('input[type="checkbox"]#latlng_map_prev, input[type="checkbox"]#zoom_map_prev').on("change",(function(){"latlng_map_prev"==e(this).attr("id")&&(e(this).prop("checked")?(e("#latitude").attr("readonly","readonly"),e("#longitude").attr("readonly","readonly"),TWER.map.dragPan.enable(),TWER.map.dragRotate.enable(),TWER.map.on("drag",(function(){let t=TWER.map.getCenter();e("#longitude").val(t.lng),e("#latitude").val(t.lat)}))):(e("#latitude").removeAttr("readonly"),e("#longitude").removeAttr("readonly"),TWER.map.dragPan.disable(),TWER.map.dragRotate.disable())),"zoom_map_prev"==e(this).attr("id")&&(e(this).prop("checked")?(e("#setZoom_range").attr("disabled","disabled"),e("#setZoom").attr("readonly","readonly"),TWER.map.doubleClickZoom.enable(),TWER.map.scrollZoom.enable(),TWER.map.dragRotate.enable()):(e("#setZoom_range").removeAttr("disabled"),e("#setZoom").removeAttr("readonly"),TWER.map.doubleClickZoom.disable(),TWER.map.scrollZoom.disable(),TWER.map.dragRotate.disable())),!e("#latlng_map_prev").prop("checked")&&e("#zoom_map_prev").prop("checked")&&(TWER.map.on("wheel",(function(t){if(!e("#latlng_map_prev").prop("checked")&&e("#zoom_map_prev").prop("checked")){TWER.map.scrollZoom.setWheelZoomRate(1);let t=parseFloat(TWER.map.getZoom()).toFixed(2),r=parseFloat(e("#latitude").val()),a=parseFloat(e("#longitude").val());TWER.map.zoomTo(t,{center:[a,r]})}})),TWER.map.on("dblclick",(function(t){if(!e("#latlng_map_prev").prop("checked")&&e("#zoom_map_prev").prop("checked")){t.preventDefault();let r=parseInt(TWER.map.getZoom()),a=parseFloat(e("#latitude").val()),o=parseFloat(e("#longitude").val());e("#setZoom").val(r),e("#setZoom_range").val(r),t.lngLat.lng=o,t.lngLat.lat=a,t._defaultPrevented=!1,TWER.map.doubleClickZoom.enable(),TWER.map.zoomTo(r,{center:[o,a]})}})))})),e("#latitude, #longitude").on("change keyup",(function(){""!=e("#latitude").val().trim()&&""!=e("#longitude").val().trim()&&TWER.map.setCenter([e("#longitude").val(),e("#latitude").val()])})),e("#setZoom, #setZoom_range").on("input",(function(){let t=parseFloat(e(this).val()).toFixed(2),r=parseFloat(e("#latitude").val()),a=parseFloat(e("#longitude").val());""!=t.trim()&&"NaN"!=t.trim()&&0!=t&&.23!=t||(t=0),TWER.map.zoomTo(t,{center:[a,r],duration:2e3}),"setZoom"==e(this).attr("id")?e("#setZoom_range").val(t):e("#setZoom").val(t)})),e(".js-zoom-range, .js-zoom-range-input").on("input",(function(){let t=parseFloat(e(this).val()).toFixed(2);""!=t.trim()&&"NaN"!=t.trim()&&0!=t&&.23!=t||(t=0),"range-input"==e(this).data("id")?e(this).closest(".js-twer-range").find(".js-zoom-range").val(t):e(this).closest(".js-twer-range").find(".js-zoom-range-input").val(t)})),e(".twer-root").each((function(){e(this).find('[data-toggle="tooltip"]').tooltip({container:e(this).closest(".twer-root")})})),e("#setZoom_min_range, #setZoom_max_range").on("input",(function(){let t=parseFloat(e("#setZoom_min_range").val()),r=parseFloat(e("#setZoom_max_range").val());e(this).hasClass("lower-slider")?(e(this).hasClass("active")||(e(this).addClass("active"),e(".upper-slider").removeClass("active")),r<=t+1&&(e("#setZoom_max_range").val(t+2),r==t&&e("#setZoom_max_range").val(t+2))):e(this).hasClass("upper-slider")&&(e(this).hasClass("active")||(e(this).addClass("active"),e(".lower-slider").removeClass("active")),t>=r-1&&(e("#setZoom_min_range").val(r-2),r==t&&e("#setZoom_min_range").val(r-2)));let a=parseFloat(e("#setZoom_min_range").val()),o=parseFloat(e("#setZoom_max_range").val());e("#default_min_zoom").val(a),e("#default_max_zoom").val(o),e("#setZoom_range").attr({min:a,max:o}),e("#setZoom").attr({min:a,max:o}),a>=parseFloat(e("#setZoom").val())?(e("#setZoom").val(a),e("#setZoom_range").val(a).trigger("input")):o<=parseFloat(e("#setZoom").val())&&(e("#setZoom").val(o),e("#setZoom_range").val(o).trigger("input")),TWER.map.setMinZoom(a),TWER.map.setMaxZoom(o)})),e("#default_min_zoom, #default_max_zoom").on("input",(function(){let t=parseFloat(e("#default_min_zoom").val()),r=parseFloat(e("#default_max_zoom").val());e("#setZoom_min_range").val(t),e("#setZoom_max_range").val(r),e("#setZoom_range").attr({min:t,max:r}),e("#setZoom").attr({min:t,max:r}),t>=parseFloat(e("#setZoom").val())?(e("#setZoom").val(t),e("#setZoom_range").val(t).trigger("input")):r<=parseFloat(e("#setZoom").val())&&(e("#setZoom").val(r),e("#setZoom_range").val(r).trigger("input")),TWER.map.setMinZoom(t),TWER.map.setMaxZoom(r)}))),e("#color-picker-btn, .clr-picker span").on("click",(function(){0===e(".color-picker").find(".a-color-picker").length?TWER_HELPERS.AColorPicker.from(".color-picker").on("change",((t,r)=>{e(".clr-picker span").css("background-color",t.color),e("#clusterColor").val(t.color),e(".color-picker").attr("acp-color",t.color)})).on("coloradd",((t,r)=>{let a=e("#addCustomColor");-1===a.val().indexOf("|"+r)&&(a.val(a.val()+"|"+r),jQuery.ajax({url:twer_ajax.url,type:"POST",data:{action:"treweler_add_colorpicker_custom_color",cust_color:a.val()},success:function(t){let r=e(".color-picker"),a=r.attr("default-palette");r.attr("acp-palette",a+""+t),e(".color-picker-text-name").attr("acp-palette",a+""+t),e(".color-picker-text-descr").attr("acp-palette",a+""+t)}}))})).on("colorremove",((t,r)=>{let a=e("#addCustomColor");if(-1!=a.val().indexOf("|"+r)){let t=a.val().replace("|"+r,"");a.val(t),jQuery.ajax({url:twer_ajax.url,type:"POST",data:{action:"treweler_add_colorpicker_custom_color",cust_color:a.val()},success:function(t){let r=e(".color-picker"),a=r.attr("default-palette");r.attr("acp-palette",a+""+t),e(".color-picker-text-name").attr("acp-palette",a+""+t),e(".color-picker-text-descr").attr("acp-palette",a+""+t)}})}})):e(".color-picker").find(".a-color-picker").remove()})),e(window).on("click",(function(t){e(t.target).hasClass("a-color-picker")||0!=e(t.target).parents(".a-color-picker").length||"color-picker-btn"==e(t.target).attr("id")||e(t.target).hasClass("color-holder")||e(t.target).hasClass("a-color-picker-palette-color")||e(".color-picker").find(".a-color-picker").remove()})),e("#text-name-color-picker-btn, #map-text-color-name span").on("click",(function(){0===e(".color-picker-text-name").find(".a-color-picker").length?TWER_HELPERS.AColorPicker.from(".color-picker-text-name").on("change",((t,r)=>{e("#map-text-color-name span").css("background-color",t.color),e("#map_name_color").val(t.color),e(".color-picker-text-name").attr("acp-color",t.color)})).on("coloradd",((t,r)=>{let a=e("#addCustomColor");-1===a.val().indexOf("|"+r)&&(a.val(a.val()+"|"+r),jQuery.ajax({url:twer_ajax.url,type:"POST",data:{action:"treweler_add_colorpicker_custom_color",cust_color:a.val()},success:function(t){let r=e(".color-picker-text-name"),a=r.attr("default-palette");r.attr("acp-palette",a+""+t),e(".color-picker-text-descr").attr("acp-palette",a+""+t),e(".color-picker").attr("acp-palette",a+""+t)}}))})).on("colorremove",((t,r)=>{let a=e("#addCustomColor");if(-1!=a.val().indexOf("|"+r)){let t=a.val().replace("|"+r,"");a.val(t),jQuery.ajax({url:twer_ajax.url,type:"POST",data:{action:"treweler_add_colorpicker_custom_color",cust_color:a.val()},success:function(t){let r=e(".color-picker-text-name"),a=r.attr("default-palette");r.attr("acp-palette",a+""+t),e(".color-picker-text-descr").attr("acp-palette",a+""+t),e(".color-picker").attr("acp-palette",a+""+t)}})}})):e(".color-picker-text-name").find(".a-color-picker").remove()})),e(window).on("click",(function(t){e(t.target).hasClass("a-color-picker")||0!=e(t.target).parents(".a-color-picker").length||"text-name-color-picker-btn"==e(t.target).attr("id")||e(t.target).hasClass("color-holder")||e(t.target).hasClass("a-color-picker-palette-color")||e(".color-picker-text-name").find(".a-color-picker").remove()})),e("#text-descr-color-picker-btn, #map-text-color-descr span").on("click",(function(){0===e(".color-picker-text-descr").find(".a-color-picker").length?TWER_HELPERS.AColorPicker.from(".color-picker-text-descr").on("change",((t,r)=>{e("#map-text-color-descr span").css("background-color",t.color),e("#map_description_color").val(t.color),e(".color-picker-text-descr").attr("acp-color",t.color)})).on("coloradd",((t,r)=>{let a=e("#addCustomColor");-1===a.val().indexOf("|"+r)&&(a.val(a.val()+"|"+r),jQuery.ajax({url:twer_ajax.url,type:"POST",data:{action:"treweler_add_colorpicker_custom_color",cust_color:a.val()},success:function(t){let r=e(".color-picker-text-descr"),a=r.attr("default-palette");r.attr("acp-palette",a+""+t),e(".color-picker-text-name").attr("acp-palette",a+""+t),e(".color-picker").attr("acp-palette",a+""+t)}}))})).on("colorremove",((t,r)=>{let a=e("#addCustomColor");if(-1!=a.val().indexOf("|"+r)){let t=a.val().replace("|"+r,"");a.val(t),jQuery.ajax({url:twer_ajax.url,type:"POST",data:{action:"treweler_add_colorpicker_custom_color",cust_color:a.val()},success:function(t){let r=e(".color-picker-text-descr"),a=r.attr("default-palette");r.attr("acp-palette",a+""+t),e(".color-picker-text-name").attr("acp-palette",a+""+t),e(".color-picker").attr("acp-palette",a+""+t)}})}})):e(".color-picker-text-descr").find(".a-color-picker").remove()})),e(window).on("click",(function(t){e(t.target).hasClass("a-color-picker")||0!=e(t.target).parents(".a-color-picker").length||"text-descr-color-picker-btn"==e(t.target).attr("id")||e(t.target).hasClass("color-holder")||e(t.target).hasClass("a-color-picker-palette-color")||e(".color-picker-text-descr").find(".a-color-picker").remove()})),e(".js-twer-color-picker").on("click",(function(t){t.stopPropagation();var r=e(this),a=r.children("span"),o=r.closest(".js-twer-color-picker-wrap"),i=o.find(".js-twer-color-picker-palette"),n=o.find('input[type="hidden"]');0===i.find(".a-color-picker").length?TWER_HELPERS.AColorPicker.from(i[0]).on("change",((e,t)=>{a.css("background-color",e.color),n.val(e.color),i.attr("acp-color",e.color)})).on("coloradd",((t,r)=>{let a=e("#addCustomColor");-1===a.val().indexOf("|"+r)&&(a.val(a.val()+"|"+r),jQuery.ajax({url:twer_ajax.url,type:"POST",data:{action:"treweler_add_colorpicker_custom_color",cust_color:a.val()},success:function(t){let r=i.attr("default-palette");i.attr("acp-palette",r+""+t),i.attr("acp-palette",r+""+t),e(".color-picker").attr("acp-palette",r+""+t)}}))})).on("colorremove",((t,r)=>{let a=e("#addCustomColor");if(-1!=a.val().indexOf("|"+r)){let e=a.val().replace("|"+r,"");a.val(e),jQuery.ajax({url:twer_ajax.url,type:"POST",data:{action:"treweler_add_colorpicker_custom_color",cust_color:a.val()},success:function(e){let t=i.attr("default-palette");i.attr("acp-palette",t+""+e)}})}})):i.find(".a-color-picker").remove()})),e(".js-twer-color-picker-palette").on("click",(function(e){e.stopPropagation()})),e(window).on("click",(function(){e(".js-twer-color-picker-palette").find(".a-color-picker").remove()})),e("#sc_shortcode").length&&(e("#sc_isFullwidth").on("change",(function(){let t=e("#sc_shortcode").val(),r='type="fullwidth"';e(this).prop("checked")&&-1===t.indexOf(r)?(t=t.splice(-1,0," "+r),e("#sc_shortcode").val(t)):(t=t.replace(" "+r,""),e("#sc_shortcode").val(t))})),e("#sc_isScrollZoom").on("change",(function(){let t=e("#sc_shortcode").val(),r='scrollzoom="no"';e(this).prop("checked")&&-1===t.indexOf(r)?(t=t.splice(-1,0," "+r),e("#sc_shortcode").val(t)):(t=t.replace(" "+r,""),e("#sc_shortcode").val(t))})),e("#sc_width, #sc_height").on("input",(function(){let t=e("#sc_shortcode").val();if("sc_width"===e(this).attr("id")){let r='width="'+e(this).val()+e("#sc_width_unit").val()+'"';if(-1===t.indexOf("width="))t=t.splice(-1,0," "+r),e("#sc_shortcode").val(t);else{let a=t.indexOf('"',t.indexOf('width="')+'width="'.length);t=t.replace(t.substring(t.indexOf(' width="'),a+1),""),""==e(this).val().trim()||isNaN(e(this).val())||(t=t.splice(-1,0," "+r)),e("#sc_shortcode").val(t)}}else if("sc_height"===e(this).attr("id")){let r='height="'+e(this).val()+e("#sc_height_unit").val()+'"';if(-1===t.indexOf("height="))t=t.splice(-1,0," "+r),e("#sc_shortcode").val(t);else{let a=t.indexOf('"',t.indexOf('height="')+'height="'.length);t=t.replace(t.substring(t.indexOf(' height="'),a+1),""),""==e(this).val().trim()||isNaN(e(this).val())||(t=t.splice(-1,0," "+r)),e("#sc_shortcode").val(t)}}})),e("#sc_width_unit, #sc_height_unit").on("input",(function(){let t=e("#sc_shortcode").val();if("sc_width_unit"===e(this).attr("id")){let r='width="'+e("#sc_width").val()+e("#sc_width_unit").val()+'"';if(-1===t.indexOf("width="))t=t.splice(-1,0," "+r),e("#sc_shortcode").val(t);else{let a=t.indexOf('"',t.indexOf('width="')+'width="'.length);t=t.replace(t.substring(t.indexOf(' width="'),a+1),""),""==e("#sc_width").val().trim()||isNaN(e("#sc_width").val())||(t=t.splice(-1,0," "+r)),e("#sc_shortcode").val(t)}}else if("sc_height_unit"===e(this).attr("id")){let r='height="'+e("#sc_height").val()+e("#sc_height_unit").val()+'"';if(-1===t.indexOf("height="))t=t.splice(-1,0," "+r),e("#sc_shortcode").val(t);else{let a=t.indexOf('"',t.indexOf('height="')+'height="'.length);t=t.replace(t.substring(t.indexOf(' height="'),a+1),""),""==e("#sc_height").val().trim()||isNaN(e("#sc_height").val())||(t=t.splice(-1,0," "+r)),e("#sc_shortcode").val(t)}}})),e("#copy_shortcode_btn").on("click",(function(){document.getElementById("sc_shortcode").select(),document.execCommand("copy")})));const u=e(".section-treweler-camera-pitch-mr");t.is(":checked")||u.hide(),t.click((function(){e(this).prop("checked")?u.show():u.hide()})),window.addEventListener("click",(function(e){TWER.map.on("pitch",(function(){let e=parseFloat(TWER.map.getPitch()).toFixed(2),t=parseFloat(TWER.map.getBearing()).toFixed(2);a.val(e),n.val(e),l.val(t),s.val(t)}))})),l.add(s).on("input",(function(){!function(e){let t=parseFloat(e).toFixed(2);l.val(t),s.val(t),TWER.map.setBearing(t)}(l.val())})),a.add(n).on("input",(function(){!function(e){let t=parseFloat(e).toFixed(2);a.val(t),n.val(t),TWER.map.setPitch(t)}(a.val())})),e("#range-treweler-camera-pitch-mr, #range-treweler-camera-pitch-mr-right").on("input",(function(){let t=parseFloat(e("#range-treweler-camera-pitch-mr").val()),r=parseFloat(e("#range-treweler-camera-pitch-mr-right").val());e(this).hasClass("lower-slider")?(e(this).hasClass("active")||(e(this).addClass("active"),e(".upper-slider").removeClass("active")),r<=t+1&&(e("#range-treweler-camera-pitch-mr-right").val(t+2),r==t&&e("#range-treweler-camera-pitch-mr-right").val(t+2))):e(this).hasClass("upper-slider")&&(e(this).hasClass("active")||(e(this).addClass("active"),e(".lower-slider").removeClass("active")),t>=r-1&&(e("#range-treweler-camera-pitch-mr").val(r-2),r==t&&e("#range-treweler-camera-pitch-mr").val(r-2)));let o=parseFloat(e("#range-treweler-camera-pitch-mr").val()),i=parseFloat(e("#range-treweler-camera-pitch-mr-right").val());e("#num-treweler-camera-pitch-mr").val(o),e("#num-treweler-camera-pitch-mr-right").val(i),n.attr({min:o,max:i}),a.attr({min:o,max:i}),o>=parseFloat(a.val())?(a.val(o),n.val(o).trigger("input")):i<=parseFloat(a.val())&&(a.val(i),n.val(i).trigger("input")),TWER.map.setMinPitch(o),TWER.map.setMaxPitch(i)})),e("#num-treweler-camera-pitch-mr, #num-treweler-camera-pitch-mr-right").on("input",(function(){let t=parseFloat(e("#num-treweler-camera-pitch-mr").val()),r=parseFloat(e("#num-treweler-camera-pitch-mr-right").val());e("#range-treweler-camera-pitch-mr").val(t),e("#range-treweler-camera-pitch-mr-right").val(r),n.attr({min:t,max:r}),a.attr({min:t,max:r}),t>=parseFloat(a.val())?(a.val(t),n.val(t).trigger("input")):r<=parseFloat(a.val())&&(a.val(r),n.val(r).trigger("input")),TWER.map.setMinPitch(t),TWER.map.setMaxPitch(r)}));const h=e("#treweler-tour-type"),m=e(".section-treweler-tour-fly-speed"),g=e(".section-treweler-tour-fly-curve");"fly"!==h.val()&&(m.hide(),g.hide()),h.change((function(){"fly"===e(this).val()?(m.show(),g.show()):(m.hide(),g.hide()),e(".js-adv-checkbox").trigger("change")}))}))}(jQuery),jQuery(document).ready((function(t){new class{constructor(t){this.$=$=t;const r=document.querySelectorAll(".js-twer-attach-add"),a=document.querySelectorAll(".js-twer-attach-remove");r.forEach((t=>{t.addEventListener("click",(t=>{var r,a,o,i;t.preventDefault();const n=t.target,l=n.closest(".js-twer-attach-wrap");let s;s||(s=wp.media({title:(null==l||null===(r=l.dataset)||void 0===r?void 0:r.title)||e("Select image","treweler"),button:{text:(null==l||null===(a=l.dataset)||void 0===a?void 0:a.buttonText)||e("Upload image","treweler")},library:{type:(null==l||null===(o=l.dataset)||void 0===o||null===(i=o.libraryType)||void 0===i?void 0:i.split(","))||["image"]},multiple:!1}),s.on("select",(()=>{const e=s.state().get("selection").first().toJSON(),t=e.url,r=e.id,a=l.getElementsByClassName("js-twer-attach-thumb")[0];if("application"===e.type){var o;const t=document.createElement("div");t.style.whiteSpace="nowrap",t.className="twer-app-file",t.innerText=e.filename,null===(o=l.getElementsByClassName("twer-app-file")[0])||void 0===o||o.remove(),a.appendChild(t)}else{var i;const r=document.createElement("img");r.setAttribute("src",t),r.setAttribute("alt",e.title),null===(i=l.getElementsByTagName("img")[0])||void 0===i||i.remove(),a.appendChild(r)}n.classList.contains("button")||(n.style.display="none"),a.nextElementSibling.style.display="block",l.getElementsByTagName("input")[0].value=r,$(document).trigger("twer-attach-add",[s])}))),s.open()}))})),a.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.target,r=t.closest(".js-twer-attach-wrap"),a=r.getElementsByClassName("js-twer-attach-thumb")[0];var o;r.getElementsByClassName("twer-app-file")?r.getElementsByClassName("twer-app-file")[0].remove():null===(o=r.getElementsByTagName("img")[0])||void 0===o||o.remove(),r.getElementsByTagName("input")[0].value="",t.closest(".js-twer-attach-actions").style.display="none",a.getElementsByClassName("js-twer-attach-add")[0].style.display="block",$(document).trigger("twer-attach-remove")}))}));const o=document.querySelectorAll(".js-twer-attach-gallery-add");$(".js-twer-attach-gallery-wrap").each(((e,t)=>{const r=$(t);r.sortable({cursor:"move",placeholder:"twer-attach-gallery__thumb",forcePlaceholderSize:!0,forceHelperSize:!0,scroll:!0,revert:!1,tolerance:"pointer",items:"> div",update:function(e,t){const a=r.find("input"),o=[];r.children("div").each((function(e,t){o.push($(t).data("id"))})),a.val(o.join(","))}}).disableSelection()})),$(document).on("click",".js-twer-attach-gallery-remove",(function(e){e.preventDefault();const t=$(this).closest(".js-twer-attach-gallery-wrap"),r=t.find("input"),a=[];$(this).closest(".twer-attach-gallery__thumb").remove(),t.children("div").each((function(e,t){a.push($(t).data("id"))})),r.val(a.join(","))})),o.forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault();const r=t.target;let a;a||(a=wp.media({title:e("Select images","treweler"),button:{text:e("Upload images","treweler")},library:{type:["image"]},multiple:"add"}),a.on("open",(()=>{const e=r.closest(".js-twer-attach-gallery-wrap").getElementsByTagName("input")[0].value;let t=a.state().get("selection");e.length>0&&e.split(",").forEach((function(e){let r=wp.media.attachment(e);r.fetch(),t.add(r?[r]:[])}))})),a.on("select",(()=>{const t=a.state().get("selection"),o=r.closest(".js-twer-attach-gallery-wrap"),i=[],n=o.getElementsByClassName("twer-attach-gallery__thumb");for(;n.length>0;)n[0].parentNode.removeChild(n[0]);t.map((function(t){t=t.toJSON();let a=document.createElement("div");a.setAttribute("class","twer-attach-gallery__thumb"),a.setAttribute("data-id",t.id);let n=document.createElement("img");n.setAttribute("src",t.url),n.setAttribute("alt",t.title);let l=document.createElement("a");l.setAttribute("href","#"),l.setAttribute("title",e("Remove","treweler")),l.setAttribute("class","twer-attach-gallery__remove js-twer-attach-gallery-remove"),a.appendChild(n),a.appendChild(l),o.insertBefore(a,r),i.push(t.id)})),o.getElementsByTagName("input")[0].value=i.join(",")}))),a.open()}))}))}}(t),new class{constructor(e){this.$=$=e,this.$widgets=$(["#treweler-widgets-top-left","#treweler-widgets-middle-left","#treweler-widgets-bottom-left","#treweler-widgets-top-right","#treweler-widgets-middle-right","#treweler-widgets-bottom-right"].join(", "));const t=document.querySelectorAll(".js-twer-widgets");this.initSortable(),t.forEach((e=>{e.addEventListener("click",(e=>{this.toggleWidget(e),this.addWidget(e),this.removeWidget(e)})),e.addEventListener("keyup",(e=>{this.updateHeadWidget(e)}))}))}initSortable(){this.$widgets.sortable({connectWith:".js-twer-ui-repeater",handle:".js-twer-widget-ui-handle",cursor:"move",receive:(e,t)=>this.updateAlienWidget(e,t)}).disableSelection()}updateHeadWidget(e){const t=e.target;if(t.classList.contains("js-twer-dynamic-description")){const e=t.closest(".js-twer-widget").getElementsByClassName("js-twer-title-widget")[0];t.value?e.innerText=t.value:e.innerHTML="&nbsp;"}}updateAlienWidget(e,t){const r=t.item[0],a=t.sender[0],o=r.parentNode,i=o.dataset.position,n=a.dataset.position,l=o.childElementCount.toString();let s=r.innerHTML;const c=new RegExp(`${n}`,"mg"),p=new RegExp(`${n.replace("_","-")}`,"mg");s=s.replace(c,i),s=s.replace(p,i.replace("_","-")),s=s.replace(/\]\[\d+\]\[/gm,`][${l}][`),s=s.replace(/-\d+-/gm,`-${l}-`),r.innerHTML=s,this.updateSortable()}updateSortable(){this.$widgets.sortable("refresh"),this.$widgets.sortable("refreshPositions")}removeWidget(e){e.target.classList.contains("js-twer-remove-widget")&&(e.preventDefault(),e.target.closest(".js-twer-widget").remove(),this.updateSortable())}toggleWidget(e){const t=e.target.closest(".js-twer-widget-handle");t&&(e.preventDefault(),t.closest(".js-twer-widget").classList.toggle("open"))}addWidget(e){if(e.target.classList.contains("js-twer-add-widget")){e.preventDefault();const t=e.target.closest(".js-twer-widget"),r=t.getElementsByClassName("js-twer-repeater-template")[0],a=t.getElementsByClassName("js-twer-repeater")[0],o=document.createRange();let i=r.innerHTML;i=i.replace(/data-/gm,""),i=i.replace(/%index%/gm,a.childElementCount.toString());const n=o.createContextualFragment(i);a.appendChild(n),e.target.blur(),this.updateSortable()}}}(t),new class{constructor(e){this.$=$=e,this.$widgets=$(["#treweler-widgets-tour-list"].join(", "));const t=document.querySelectorAll(".js-twer-widgets");this.initSortable(),t.forEach((e=>{e.addEventListener("click",(e=>{this.toggleWidget(e),this.addWidget(e),this.removeWidget(e)})),e.addEventListener("keyup",(e=>{this.updateHeadWidget(e)}))})),this.triggerHelper()}initSortable(){this.$widgets.sortable({connectWith:".js-twer-ui-repeater",handle:".js-twer-widget-marker-ui-handle",cursor:"move",receive:(e,t)=>this.updateAlienWidget(e,t)}).disableSelection()}updateHeadWidget(e){const t=e.target;if(t.classList.contains("marker-picker")){const e=t.closest(".js-twer-widget-marker").getElementsByClassName("js-twer-title-widget")[0];t.options[t.selectedIndex].text?e.innerText=t.options[t.selectedIndex].text:e.innerHTML="&nbsp;"}}updateAlienWidget(e,t){const r=t.item[0],a=t.sender[0],o=r.parentNode,i=o.dataset.position,n=a.dataset.position,l=o.childElementCount.toString();let s=r.innerHTML;const c=new RegExp(`${n}`,"mg"),p=new RegExp(`${n.replace("_","-")}`,"mg");s=s.replace(c,i),s=s.replace(p,i.replace("_","-")),s=s.replace(/\]\[\d+\]\[/gm,`][${l}][`),s=s.replace(/-\d+-/gm,`-${l}-`),r.innerHTML=s,this.updateSortable()}updateSortable(){this.$widgets.sortable("refresh"),this.$widgets.sortable("refreshPositions"),this.triggerHelper()}removeWidget(e){e.target.classList.contains("js-twer-remove-widget")&&(e.preventDefault(),e.target.closest(".js-twer-widget-marker").remove(),this.updateSortable())}toggleWidget(e){const t=e.target.closest(".js-twer-widget-marker-handle");t&&(e.preventDefault(),t.closest(".js-twer-widget-marker").classList.toggle("open"))}addWidget(e){if(e.target.classList.contains("js-twer-add-widget-marker")){e.preventDefault();const t=e.target.closest(".widget-marker-container"),r=t.getElementsByClassName("js-twer-repeater-template")[0],a=t.getElementsByClassName("js-twer-repeater")[0],o=document.createRange();let i=t.getElementsByClassName("tour-marker-picker")[0];if(parseInt(i.value)<=0)return;let n=r.innerHTML;n=n.replace(/data-/gm,""),n=n.replace(/%index%/gm,a.childElementCount.toString()),n=n.replace(/%title%/gm,i.options[i.selectedIndex].text.toString()),n=n.replace(/%idMarker%/gm,i.value.toString());const l=o.createContextualFragment(n);a.appendChild(l),e.target.blur(),this.updateSortable()}}triggerHelper(){$(".js-zoom-range, .js-zoom-range-input").on("input",(function(){let e=parseFloat($(this).val()).toFixed(2);""!==e.trim()&&"NaN"!==e.trim()&&0!==e&&.23!==e||(e=0),"range-input"===$(this).data("id")?$(this).closest(".js-twer-range").find(".js-zoom-range").val(e):$(this).closest(".js-twer-range").find(".js-zoom-range-input").val(e)})),$(".twer-root").tooltip({selector:".twer-help-tooltip"}),$(".marker-picker").on("change",(function(){let e=$("option:selected",this),t=e.text();parseInt(e.val())>0?$(this).closest(".widget").find(".js-twer-title-widget").html(t):$(this).closest(".widget").find(".js-twer-title-widget").html("&nbsp;")}));const e=$("#treweler-tour-type");$(".js-adv-checkbox").on("change",(function(){$(this).is(":checked")?($(this).closest(".widget").find(".cogs").show(),$(this).closest(".widget").find(".adv-settings").show(),"fly"!==e.val()&&$(this).closest(".widget").find(".adv-fly").hide()):($(this).closest(".widget").find(".cogs").hide(),$(this).closest(".widget").find(".adv-settings").hide(),"fly"!==e.val()&&$(this).closest(".widget").find(".adv-fly").hide())}))}}(t),new class{constructor(e){this.$=$=e;const t=document.querySelectorAll(".js-twer-tr-toggle"),r=[];t.forEach((e=>{const t=document.getElementById(e.getAttribute("id").replace("-toggle",""));r.push(t),t.options[t.selectedIndex].value===e.dataset.trigger?(e.classList.add("twer-tr-toggle--show"),e.classList.remove("twer-tr-toggle--hide")):(e.classList.remove("twer-tr-toggle--show"),e.classList.add("twer-tr-toggle--hide"))})),r.forEach((e=>{e.addEventListener("change",(e=>{const t=document.getElementById(e.target.getAttribute("id")+"-toggle");e.target.value===t.dataset.trigger?(t.classList.add("twer-tr-toggle--show"),t.classList.remove("twer-tr-toggle--hide")):(t.classList.remove("twer-tr-toggle--show"),t.classList.add("twer-tr-toggle--hide"))}))}))}}(t)}))}()}();